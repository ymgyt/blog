<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="ja">
    <title>Happy developing - cncf</title>
    <subtitle>æ¥½ã—ã„é–‹ç™ºãƒ©ã‚¤ãƒ•</subtitle>
    <link href="https://blog.ymgyt.io/tags/cncf/atom.xml" rel="self" type="application/atom+xml"/>
    <link href="https://blog.ymgyt.io/entry/"/>
    <author><name>ymgyt</name></author>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2019-09-27T00:00:00+00:00</updated>
    <id>https://blog.ymgyt.io/tags/cncf/atom.xml</id>
    <entry xml:lang="ja">
        <title>ğŸ—¼ Kubernetes Meetup Tokyo #23ã«ã„ã£ã¦ãã¾ã—ãŸ</title>
        <published>2019-09-27T00:00:00+00:00</published>
        <updated>2019-09-27T00:00:00+00:00</updated>
        <author>
          <name>ymgyt</name>
        </author>
        <link rel="alternate" href="https://blog.ymgyt.io/entry/kubernetes-meetup-tokyo-23/" type="text/html"/>
        <id>https://blog.ymgyt.io/entry/kubernetes-meetup-tokyo-23/</id>
        
        <content type="html">&lt;p&gt;2019å¹´9æœˆ27æ—¥ã«é–‹å‚¬ã•ã‚ŒãŸ&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;k8sjp.connpass.com&#x2F;event&#x2F;145942&#x2F;&quot;&gt;Kubernetes Meetup Tokyo #23&lt;&#x2F;a&gt;ã«ãƒ–ãƒ­ã‚°æ ã§å‚åŠ ã•ã›ã¦ã„ãŸã ã„ãŸã®ã§ã€ãã®æ¨¡æ§˜ã«ã¤ã„ã¦æ›¸ã„ã¦ã„ãã¾ã™ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;hui-chang&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#hui-chang&quot; aria-label=&quot;Anchor link for: hui-chang&quot;&gt;ä¼šå ´&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;ä¼šå ´ã¯æ¸‹è°·ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®éš£ã«èª•ç”Ÿã—ãŸæ¸‹è°·ã‚¹ã‚¯ãƒ©ãƒ³ãƒ–ãƒ«ã‚¹ã‚¯ã‚¨ã‚¢ã§ã™ã€‚ãƒ“ãƒ«ã®æ­£å¼ã‚ªãƒ¼ãƒ—ãƒ³ãŒ11æœˆã‹ã‚‰ã¨ã®ã“ã¨ã§çµ¶è³›å†…è£…å·¥äº‹ä¸­ã§ã—ãŸã€‚
æ¸‹è°·é§…ç›´çµã§ã¨ã¦ã‚‚ä¾¿åˆ©ãªç«‹åœ°ã§ã™ã€‚ã‚¹ãƒãƒ³ã‚µãƒ¼ã¯&lt;strong&gt;CyberAgent&lt;&#x2F;strong&gt;ç¤¾ã§ã™ã€‚&lt;&#x2F;p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;site_1.jpeg&quot; 
      alt=&quot;&quot;, 
       width=&quot;32%,&quot;   
      
    &gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;site_2.jpeg&quot; 
      alt=&quot;&quot;, 
       width=&quot;32%,&quot;   
      
    &gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;site_3.jpeg&quot; 
      alt=&quot;&quot;, 
       width=&quot;32%,&quot;   
      
    &gt;
    
  &lt;&#x2F;div&gt;
  &lt;figcaption&gt;Sessionå¾Œã®æ‡‡è«‡ä¼šã®æ§˜å­&lt;&#x2F;figcaption&gt;
&lt;&#x2F;figure&gt;
&lt;h2 id=&quot;session&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#session&quot; aria-label=&quot;Anchor link for: session&quot;&gt;Session&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;zerokarashi-merukubernetes-controller&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#zerokarashi-merukubernetes-controller&quot; aria-label=&quot;Anchor link for: zerokarashi-merukubernetes-controller&quot;&gt;ã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹Kubernetes Controller&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;techbookfest.org&#x2F;event&#x2F;tbf07&quot;&gt;æŠ€è¡“æ›¸å…¸7&lt;&#x2F;a&gt;ã§è²·ã‚ã›ã¦ã„ãŸã ã„ãŸã€&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;go-vargo.booth.pm&#x2F;items&#x2F;1566979&quot;&gt;å®Ÿè·µå…¥é–€Kubernetes ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã¸ã®é“&lt;&#x2F;a&gt;ã®è‘—è€…ã§ã‚ã‚‰ã‚Œã‚‹&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;go_vargo&quot;&gt;ãƒãƒ«ã‚´ã•ã‚“&lt;&#x2F;a&gt;ã«ã‚ˆã‚‹Kubernetes Controllerã«ã¤ã„ã¦ã®ç™ºè¡¨ã€‚&lt;&#x2F;p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;load_to_custom_controller.jpeg&quot; 
      alt=&quot;&quot;, 
       
      
    &gt;
    
  &lt;&#x2F;div&gt;
  
&lt;&#x2F;figure&gt;
&lt;iframe class=&quot;speakerdeck-iframe&quot; frameborder=&quot;0&quot; src=&quot;https:&#x2F;&#x2F;speakerdeck.com&#x2F;player&#x2F;173fdf8b50f445ba895b82fb6650825c&quot; title=&quot;ã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹Kubernetes Controller &#x2F; Under the Kubernetes  Controller&quot; allowfullscreen=&quot;true&quot; mozallowfullscreen=&quot;true&quot; webkitallowfullscreen=&quot;true&quot; style=&quot;border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 100%; height: auto; aspect-ratio: 560 &#x2F; 420;&quot; data-ratio=&quot;1.3333333333333333&quot;&gt;&lt;&#x2F;iframe&gt;
&lt;p&gt;Controllerã®æ¦‚è¦ã‹ã‚‰å†…éƒ¨ã®å®Ÿè£…ã«ã¤ã„ã¦ã¾ã§èª¬æ˜ã•ã‚Œã¦ã„ã‚‹100Pè¶…ãˆã®åŠ›ä½œã‚¹ãƒ©ã‚¤ãƒ‰ã§ã™ã€‚
ReplicaSetã‚’applyã—ã¦ã‹ã‚‰ãƒ‡ãƒªãƒãƒªã•ã‚Œã‚‹ã¾ã§ã®å‡¦ç†ã‚’è©²å½“ã‚½ãƒ¼ã‚¹ã¸ã®å‚ç…§ç®‡æ‰€ã¾ã§æ·»ãˆã¦èª¬æ˜ã—ã¦ãã‚Œã¦ãŠã‚Šé–‹å§‹10åˆ†ã§ã“ã‚Œã¦ã‚ˆã‹ã£ãŸã¨æ€ãˆã¾ã—ãŸã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;kubebuilder-controller-runtimeru-men-with-v2-updates&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#kubebuilder-controller-runtimeru-men-with-v2-updates&quot; aria-label=&quot;Anchor link for: kubebuilder-controller-runtimeru-men-with-v2-updates&quot;&gt;kubebuilder&#x2F;controller-runtimeå…¥é–€ with v2 updates&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kfyharukz&quot;&gt;kfyharukzã•ã‚“&lt;&#x2F;a&gt;ã«ã‚ˆã‚‹kubebuilder v2ã®ç´¹ä»‹&#x2F;ãƒ‡ãƒ¢ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;kubernetesã®APIã‚’æ‹¡å¼µã™ã‚‹ãŸã‚ã®SDK &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes-sigs&#x2F;kubebuilder&quot;&gt;kubebuilder&lt;&#x2F;a&gt;ã«ã¤ã„ã¦ã®ç™ºè¡¨ã§ã™ã€‚&lt;&#x2F;p&gt;
&lt;iframe src=&quot;&#x2F;&#x2F;www.slideshare.net&#x2F;slideshow&#x2F;embed_code&#x2F;key&#x2F;fl9arNMEK2OZya&quot; width=&quot;595&quot; height=&quot;485&quot; frameborder=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; style=&quot;border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;&quot; allowfullscreen&gt; &lt;&#x2F;iframe&gt; &lt;div style=&quot;margin-bottom:5px&quot;&gt; &lt;strong&gt; &lt;a href=&quot;&#x2F;&#x2F;www.slideshare.net&#x2F;KazuhitoMatsuda1&#x2F;kubernetes-meetup-tokyo-23-kubebuilderv2&quot; title=&quot;Kubernetes Meetup Tokyo #23 kubebuilder-v2&quot; target=&quot;_blank&quot;&gt;Kubernetes Meetup Tokyo #23 kubebuilder-v2&lt;&#x2F;a&gt; &lt;&#x2F;strong&gt; from &lt;strong&gt;&lt;a href=&quot;&#x2F;&#x2F;www.slideshare.net&#x2F;KazuhitoMatsuda1&quot; target=&quot;_blank&quot;&gt;Kazuhito Matsuda&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt; &lt;&#x2F;div&gt;
&lt;p&gt;Kubernetesã®builtin Resouceã®ç†è§£ã‚‚ã¾ã ã‚ã‚„ã—ã„è‡ªåˆ†ã«ã¨ã£ã¦ã¯ç™ºå±•çš„ãªå†…å®¹ã§ã—ãŸã€‚CKAåˆæ ¼ã§ããŸã‚‰Custom Resourceã«ã‚‚æŒ‘æˆ¦ã—ãŸã„ã§ã™ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;kubernetes-1-16-sig-api-machinerynobian-geng-nei-rong&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#kubernetes-1-16-sig-api-machinerynobian-geng-nei-rong&quot; aria-label=&quot;Anchor link for: kubernetes-1-16-sig-api-machinerynobian-geng-nei-rong&quot;&gt;Kubernetes 1.16: SIG-API Machineryã®å¤‰æ›´å†…å®¹&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Introduction of Operator FrameworkãŒè¡Œã‚ã‚Œã‚‹äºˆå®šã§ã—ãŸãŒã€ç™ºè¡¨è€…ã®æ–¹ãŒä½“èª¿ä¸è‰¯ã¨ã®ã“ã¨ã§å†…å®¹ãŒå¤‰æ›´ã«ãªã‚Šã¾ã—ãŸã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;Ladicle&quot;&gt;Ladicleã•ã‚“&lt;&#x2F;a&gt;ã«ã‚ˆã‚‹&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;qiita.com&#x2F;Ladicle&#x2F;items&#x2F;f192d266b80e873eb0a8&quot;&gt;Kubernetes 1.16: SIG-API Machineryã®å¤‰æ›´å†…å®¹&lt;&#x2F;a&gt;
ãã‚‚ãã‚‚SIGã¨ã„ã†å˜èªãŒã‚ã‹ã£ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚èª¿ã¹ã¦ã¿ãŸã¨ã“ã‚Kubernetes Projectã®é–‹ç™ºå˜ä½ã¨ã„ã†æ„Ÿã˜ã§ã—ã‚‡ã†ã‹ã€‚
èˆˆå‘³ãŒã‚ã‚‹SIGã‹ã‚‰è¿½ã„ã‹ã‘ã¦ã¿ã‚‹ã¨ã¨ã£ã‹ã‹ã‚Šã¨ã—ã¦ã¯ã‚ˆã„ã¨ã„ã†ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚‚ã„ãŸã ãã¾ã—ãŸã€‚&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;community&#x2F;blob&#x2F;master&#x2F;sig-list.md&quot;&gt;sig-list&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;qiita.com&#x2F;organizations&#x2F;zlab&quot;&gt;zlabç¤¾&lt;&#x2F;a&gt;ãŒQiitaã§Kubernetesã‚„Goé–¢é€£ã§å‚è€ƒã«ãªã‚‹è¨˜äº‹ã‚’ãŸãã•ã‚“ã‚ã’ã¦ãã‚Œã¦ã„ã‚‹ã®ã§ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã—ãŸã€‚&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;qiita.com&#x2F;organizations&#x2F;zlab&quot;&gt;zlab&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;kubernetes-1-16-sig-cli-nobian-geng-nei-rong&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#kubernetes-1-16-sig-cli-nobian-geng-nei-rong&quot; aria-label=&quot;Anchor link for: kubernetes-1-16-sig-cli-nobian-geng-nei-rong&quot;&gt;Kubernetes 1.16: SIG-CLI ã®å¤‰æ›´å†…å®¹&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;åŒã˜ã&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;qiita.com&#x2F;organizations&#x2F;zlab&quot;&gt;zlabç¤¾&lt;&#x2F;a&gt;ã®&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;superbrothers&quot;&gt;ã™ã±ã¶ã‚‰ã•ã‚“&lt;&#x2F;a&gt;ã«ã‚ˆã‚‹&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;qiita.com&#x2F;superbrothers&#x2F;items&#x2F;e78a8a04347e57900fd9&quot;&gt;Kubernetes 1.16: SIG-CLI ã®å¤‰æ›´å†…å®¹&lt;&#x2F;a&gt;ã§ã™ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;kubectlã®å®Ÿè·µçš„ãªè§£èª¬ã§è‡ªåˆ†ãŒæ‰“ã£ãŸã“ã¨ãŒãªã„ã‚³ãƒãƒ³ãƒ‰ã‚„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã°ã‹ã‚Šã§ã—ãŸã€‚&lt;br &#x2F;&gt;
&lt;code&gt;kubectl debug&lt;&#x2F;code&gt; ã¯åˆ©ç”¨ã§ããŸã‚‰ã¨ã¦ã‚‚ä¾¿åˆ©ãã†ãªã®ã§å¾…ã¡é ã—ã„ã§ã™ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;lt&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#lt&quot; aria-label=&quot;Anchor link for: lt&quot;&gt;LT&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;clusterapi-v1alpha1-v1alpha2&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#clusterapi-v1alpha1-v1alpha2&quot; aria-label=&quot;Anchor link for: clusterapi-v1alpha1-v1alpha2&quot;&gt;ClusterAPI v1alpha1 â†’ v1alpha2&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;r_takaishi&quot;&gt;r_takaishiã•ã‚“&lt;&#x2F;a&gt;ã«ã‚ˆã‚‹ClusterAPIã«ã¤ã„ã¦ã€‚
ç™ºè¡¨è³‡æ–™ã®ãƒªãƒ³ã‚¯ãŒè¦‹ã¤ã‘ã‚‰ã‚Œãšã€‚
ClusterAPIã«ã¤ã„ã¦ã¯ã¾ã£ãŸãã‚ã‹ã£ã¦ãŠã‚‰ãšã€‚ãã‚‚ãã‚‚Kubernetesã£ã¦Cluster(ç‰¹ã«controll plane)ã¯ä½œæˆã•ã‚Œã¦ã„ã‚‹å‰æã ã¨è€ƒãˆã¦ã„ãŸã®ã§æ°—ã«ãªã‚‹ã¨ã“ã‚ã§ã™ã€‚
æŠ€è¡“æ›¸å…¸7ã§ã¯è²·ãˆã¦ã„ãªã‹ã£ãŸ&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;techiemedia.booth.pm&#x2F;items&#x2F;1579677&quot;&gt;ã¯ã˜ã‚ã‚‹Cluster API&lt;&#x2F;a&gt;èª­ã‚“ã§å‡ºç›´ã—ã¾ã™ã€‚&lt;&#x2F;p&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;cluster_api_book.jpeg&quot; 
      alt=&quot;&quot;, 
       
      
    &gt;
    
  &lt;&#x2F;div&gt;
  
&lt;&#x2F;figure&gt;
&lt;h3 id=&quot;zi-dong-hua-hashell-operator-totomoni&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#zi-dong-hua-hashell-operator-totomoni&quot; aria-label=&quot;Anchor link for: zi-dong-hua-hashell-operator-totomoni&quot;&gt;è‡ªå‹•åŒ–ã¯shell-operator ã¨ã¨ã‚‚ã«ã€‚&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;nwiizo&quot;&gt;nwiizoã•ã‚“&lt;&#x2F;a&gt;ã•ã‚“ã«ã‚ˆã‚‹shell(bash)ã¨kubernetesã«ã¤ã„ã¦ã€‚
ãã‚‚ãã‚‚ã€operatorã«ã¤ã„ã¦ã®ã‚ã‹ã£ã¦ã„ãªã„ã®ã§ã€ãªã‚“ã‹bashã§ã‚‚kubernetesã®å‡¦ç†ã«ã¯ã•ã‚ã‚‹ã‚“ã ãªãã‚‰ã„ã®ç†è§£ã—ã‹ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚
ã“ã“ã¯è­°è«–ã®ã‚ã‚‹ã¨ã“ã‚ã ã¨æ€ã„ã¾ã™ãŒã€è‡ªåˆ†ã¯ä»¥ä¸‹ã®ç‚¹ã‹ã‚‰ã‚ã¾ã‚Šbashã‚’æœ¬ç•ªé–¢é€£ã®å‡¦ç†ã«çµ„ã¿è¾¼ã¿ãŸããªã„ã¨è€ƒãˆã¦ã„ã‚‹ã®ã§ã™ãŒã©ã†ãªã‚“ã§ã—ã‚‡ã†ã‹ã€‚&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;networkå‡¦ç†ã«ã¯å¿…ãštimeoutè¨­å®šã—ãŸã„&lt;&#x2F;li&gt;
&lt;li&gt;error handling&lt;&#x2F;li&gt;
&lt;li&gt;logging(structured, leveling,...)&lt;&#x2F;li&gt;
&lt;li&gt;signal handling(gracefully shutdown, resource cleanupç­‰)&lt;&#x2F;li&gt;
&lt;li&gt;testæ›¸ããŸã„&lt;&#x2F;li&gt;
&lt;li&gt;ä¾å­˜ã‚’æ˜ç¤º&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;(bashã§ã§ããªã„ã“ã¨ã¯ãªã„ã¨æ€ã†ã®ã§ã™ãŒä¸Šè¨˜ã®ã“ã¨ã‚„ã‚ã†ã¨ã™ã‚‹ã¨è‚¥å¤§åŒ–ã™ã‚‹ã‹scriptã®æ‰‹è»½ã•ãŒçµå±€å¤±ã‚ã‚Œã‚‹)&lt;&#x2F;p&gt;
&lt;h3 id=&quot;zi-zuo-controller-niyoru-secret-nopei-bu-toshou-ji-unblee&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#zi-zuo-controller-niyoru-secret-nopei-bu-toshou-ji-unblee&quot; aria-label=&quot;Anchor link for: zi-zuo-controller-niyoru-secret-nopei-bu-toshou-ji-unblee&quot;&gt;è‡ªä½œ Controller ã«ã‚ˆã‚‹ Secret ã®é…å¸ƒã¨åé›† - unblee&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;unblee&quot;&gt;unbleeã•ã‚“&lt;&#x2F;a&gt;ã«ã‚ˆã‚‹&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;speakerdeck.com&#x2F;unblee&#x2F;distributing-and-collecting-secrets-with-self-made-controller&quot;&gt;è‡ªä½œ Controller ã«ã‚ˆã‚‹ Secret ã®é…å¸ƒã¨åé›†&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;wantedlyç¤¾ã§ã®Kubernetesé‹ç”¨ä¸Šã®èª²é¡Œã‚’Controllerã‚’ä½œæˆã—ã¦è§£æ±ºã•ã‚ŒãŸãŠè©±ã§ã—ãŸã€‚&lt;br &#x2F;&gt;
1-MicroService 1-Namespaceã§é‹ç”¨ã•ã‚Œã¦ã„ã‚‹ãã†ã§ã™ã€å®Ÿé‹ç”¨ã•ã‚Œã¦ã„ã‚‹æ–¹ã€…ã®Namespaceã®åˆ‡ã‚Šæ–¹ã«ã¤ã„ã¦ã¯ã‚‚ã£ã¨ãŠè©±ã‚’ä¼ºã£ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã—ãŸã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;ken-tan-hui&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#ken-tan-hui&quot; aria-label=&quot;Anchor link for: ken-tan-hui&quot;&gt;æ‡‡è«‡ä¼š&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Sessionã¨LTã®é–“ã«30åˆ†ç¨‹åº¦ã®æ‡‡è«‡ä¼šã®æ™‚é–“ãŒè¨­ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚(é£²é£Ÿç‰©ã®æä¾›ã¯&lt;strong&gt;CyberAgent&lt;&#x2F;strong&gt;ç¤¾)
ãŸã¾ãŸã¾æŠ€è¡“æ›¸å…¸7ã§è²·ã£ã¦ã€å½“æ—¥ã‚‚èª­ã‚“ã§ã„ãŸã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã¸ã®é“ã®è‘—è€…ã®&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;go_vargo&quot;&gt;ãƒãƒ«ã‚´ã•ã‚“&lt;&#x2F;a&gt;ãŒç™ºè¡¨ã•ã‚Œã¦ã„ãŸã®ã§ã€æœ¬è²·ã„ã¾ã—ãŸã¨ã”æŒ¨æ‹¶ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚ã¾ãŸCKAã€CKADã‚’ãŠæŒã¡ã¨ã®ã“ã¨ã§ã€&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;qiita.com&#x2F;go_vargo&#x2F;items&#x2F;3644c3a44734e2c155f4&quot;&gt;CKAã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹&lt;&#x2F;a&gt;ã‚‚èã‘ã¾ã—ãŸã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;Ladicle&quot;&gt;Ladicleã•ã‚“&lt;&#x2F;a&gt;ã®ç™ºè¡¨ã®éš›ã«ç”¨ã„ã‚‰ã‚Œã¦ã„ãŸQiitaã®iconã©ã“ã‹ã§ã¿ãŸã“ã¨ã‚ã‚‹ãªãƒ¼æ€ã£ã¦ã„ãŸã®ã§ã™ãŒã€&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;gihyo.jp&#x2F;dp&#x2F;ebook&#x2F;2017&#x2F;978-4-7741-8845-4&quot;&gt;Software Design 2017å¹´9æœˆå·&lt;&#x2F;a&gt;ã®ç‰¹é›† WebæŠ€è¡“ã€è¶…ã€‘å…¥é–€ã„ã¾ä¸€åº¦æŒ¯ã‚Šè¿”ã‚‹Webã®ã—ãã¿ã¨é–‹ç™ºæ–¹æ³•ã§&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Ladicle&#x2F;http-handson&quot;&gt;web serverã®å®Ÿè£…&lt;&#x2F;a&gt;ã‚’goã§ã‚„ã‚‰ã‚Œã¦ã„ã‚‹æ–¹ã§ã‚ã‚‹ã“ã¨ã‚’æ€ã„å‡ºã—ã¾ã—ãŸã€‚&lt;br &#x2F;&gt;
&lt;code&gt;go-bindata&lt;&#x2F;code&gt;ã§é™çš„ã‚¢ã‚»ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’goã®ãƒã‚¤ãƒŠãƒªãƒ¼ã«çµ„ã¿è¾¼ã‚€ã‚„ã‚Šæ–¹ã‚’ã“ã“ã§ã¯ã˜ã‚ã¦çŸ¥ã‚Šã¾ã—ãŸã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;ci-hui&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#ci-hui&quot; aria-label=&quot;Anchor link for: ci-hui&quot;&gt;æ¬¡å›&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;æ¬¡å›ã¯10æœˆ24æ—¥ã§ã€Kubernetesä¸Šã§å‹•ã‹ã™ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®ãƒ‡ãƒãƒƒã‚¯ã¨ãƒ†ã‚¹ãƒˆã«ã¤ã„ã¦ã ãã†ã§ã™ã€‚
ã“ã¡ã‚‰ã‚‚æ¥½ã—ã¿ã§ã™ã­ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;matome&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#matome&quot; aria-label=&quot;Anchor link for: matome&quot;&gt;ã¾ã¨ã‚&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Kubernetes Meetup Tokyoã«ã¯åˆå‚åŠ ã§ã€è‡ªåˆ†ã®Kubernetesã«ã¤ã„ã¦ã®ç†è§£ãŒã€GKEã«slack botã‚’deployã—ã¦ã¿ã‚‹ç¨‹åº¦(&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;blog.howtelevision.co.jp&#x2F;entry&#x2F;2019&#x2F;04&#x2F;30&#x2F;193747&quot;&gt;ä¼šç¤¾ã®ãƒ–ãƒ­ã‚°ã§è¨˜äº‹&lt;&#x2F;a&gt;ã«ã—ã¾ã—ãŸã€‚)
ã§ã—ãŸãŒã¨ã¦ã‚‚å‹‰å¼·ã«ãªã‚Šå‚åŠ ã—ã¦ã‚ˆã‹ã£ãŸã§ã™ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;setukakunanodezerokarashi-merukubernetes-controllerwootutemiru&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#setukakunanodezerokarashi-merukubernetes-controllerwootutemiru&quot; aria-label=&quot;Anchor link for: setukakunanodezerokarashi-merukubernetes-controllerwootutemiru&quot;&gt;ã›ã£ã‹ããªã®ã§ã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹Kubernetes Controllerã‚’ãŠã£ã¦ã¿ã‚‹&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;speakerdeck.com&#x2F;govargo&#x2F;under-the-kubernetes-controller-36f9b71b-9781-4846-9625-23c31da93014&quot;&gt;ã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹Kubernetes Controller&lt;&#x2F;a&gt;ã§ã€ReplicaSetã‚’applyã—ãŸéš›ã®Controllerã®æŒ™å‹•ãŒè©²å½“ã‚³ãƒ¼ãƒ‰ã®ãƒªãƒ³ã‚¯ã¤ãã§è§£èª¬ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€è¿½ãˆã‚‹ã¨ã“ã‚ã¾ã§ãŠã£ã¦ã¿ã¾ã—ãŸã€‚&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;tree&#x2F;release-1.16&quot;&gt;kubernetesã®versionã¯1.16ã§ã™&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;kubectl-apply&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#kubectl-apply&quot; aria-label=&quot;Anchor link for: kubectl-apply&quot;&gt;&lt;code&gt;kubectl apply&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;

&lt;a href=&quot;https:&amp;#x2F;&amp;#x2F;speakerdeck.com&amp;#x2F;govargo&amp;#x2F;under-the-kubernetes-controller-36f9b71b-9781-4846-9625-23c31da93014?slide=19&quot;&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;controller_1.jpeg&quot; 
      alt=&quot;&quot;, 
       
      
    &gt;
    
  &lt;&#x2F;div&gt;
  
&lt;&#x2F;figure&gt;

&lt;&#x2F;a&gt;
&lt;p&gt;&lt;code&gt;kubectl&lt;&#x2F;code&gt;ã§ReplicaSetã‚’applyã—ã¦ã€api-serverã§å‡¦ç†ã•ã‚Œã¦ã„ã‚‹å‰æã§ã™ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;replicaset-controllernoqi-dong&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#replicaset-controllernoqi-dong&quot; aria-label=&quot;Anchor link for: replicaset-controllernoqi-dong&quot;&gt;&lt;code&gt;ReplicaSet Controller&lt;&#x2F;code&gt;ã®èµ·å‹•&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;slideã§ã¯ã€&lt;code&gt;ReplicaSetController&lt;&#x2F;code&gt;ãŒ&lt;code&gt;ReplicaSet&lt;&#x2F;code&gt;ãŒç”Ÿæˆã•ã‚ŒãŸã“ã¨ã‚’æ¤œçŸ¥ã—ãŸã¨ã“ã‚ã‹ã‚‰è§£èª¬ã•ã‚Œã¦ã„ã¾ã™ãŒã€èµ·å‹•å‡¦ç†ã‚’ç°¡å˜ã«ãŠã£ã¦ã¿ã¾ã—ãŸã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;ReplicaSetController&lt;&#x2F;code&gt;è‡ªä½“ã¯ã€&lt;code&gt;kube-controller-manager&lt;&#x2F;code&gt; binaryã«å«ã¾ã‚Œã¦ã„ã‚‹ã®ã§ã€èµ·å‹•å‡¦ç†ã¯&lt;code&gt;kube-controller-manager&lt;&#x2F;code&gt;ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ã€‚&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;&#x2F;&#x2F; Run runs the KubeControllerManagerOptions.  This should never exit.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; Run&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;c&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;config&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;CompletedConfig&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; stopCh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;lt;-chan struct&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;{})&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;  &#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;  if&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; StartControllers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;controllerContext&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; saTokenControllerInitFunc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; NewControllerInitializers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;controllerContext&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;LoopMode&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;),&lt;&#x2F;span&gt;&lt;span&gt; unsecuredMux&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; != nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;			klog&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Fatalf&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt;error starting controllers: &lt;&#x2F;span&gt;&lt;span style=&quot;color: #EBCB8B;&quot;&gt;%v&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;&amp;quot;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;  &#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;cmd&#x2F;kube-controller-manager&#x2F;app&#x2F;controllermanager.go#L234&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;cmd&#x2F;kube-controller-manager&#x2F;app&#x2F;controllermanager.go#L234&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; NewControllerInitializers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;loopMode ControllerLoopMode&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; map&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;InitFunc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  controllers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; := map&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;InitFunc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;  &#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  controllers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt;replicaset&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;&amp;quot;]&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; startReplicaSetController&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;  &#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;  return&lt;&#x2F;span&gt;&lt;span&gt; controllers&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;cmd&#x2F;kube-controller-manager&#x2F;app&#x2F;controllermanager.go#L386&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;cmd&#x2F;kube-controller-manager&#x2F;app&#x2F;controllermanager.go#L386&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; StartControllers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;ctx ControllerContext&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; startSATokenController InitFunc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; controllers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; map&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;InitFunc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; unsecuredMux&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;mux&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;PathRecorderMux&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;   &#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;  for&lt;&#x2F;span&gt;&lt;span&gt; controllerName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; initFn&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; := range&lt;&#x2F;span&gt;&lt;span&gt; controllers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;		&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		debugHandler&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; started&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; initFn&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;ctx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;		&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;  }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;  return nil&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;release-1.16&#x2F;&#x2F;cmd&#x2F;kube-controller-manager&#x2F;app&#x2F;controllermanager.go#L498&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;release-1.16&#x2F;&#x2F;cmd&#x2F;kube-controller-manager&#x2F;app&#x2F;controllermanager.go#L498:6:title&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;å„controllerã®èµ·å‹•å‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚
è‚å¿ƒã®&lt;code&gt;ReplicaSetController&lt;&#x2F;code&gt;ã®èµ·å‹•å‡¦ç†ã‚’ã¿ã¦ã¿ã¾ã™ã€‚&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; startReplicaSetController&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;ctx ControllerContext&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) (&lt;&#x2F;span&gt;&lt;span&gt;http&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Handler&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; bool&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	go&lt;&#x2F;span&gt;&lt;span&gt; replicaset&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;NewReplicaSetController&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		ctx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;InformerFactory&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Apps&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;V1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;ReplicaSets&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(),&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		ctx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;InformerFactory&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Core&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;V1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Pods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(),&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		ctx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;ClientBuilder&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;ClientOrDie&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt;replicaset-controller&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;&amp;quot;),&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		replicaset&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;BurstReplicas&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	).&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Run&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;ctx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;ComponentConfig&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;ReplicaSetController&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;ConcurrentRSSyncs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;),&lt;&#x2F;span&gt;&lt;span&gt; ctx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Stop&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	return nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; true&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; nil&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;cmd&#x2F;kube-controller-manager&#x2F;app&#x2F;apps.go#L69&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;cmd&#x2F;kube-controller-manager&#x2F;app&#x2F;apps.go#L69&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;ReplicaSetController&lt;&#x2F;code&gt;ã®ç”Ÿæˆã¨èµ·å‹•å‡¦ç†ã‚’åˆ¥goroutineã§å®Ÿè¡Œã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;rsc &lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;ReplicaSetController&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; Run&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;workers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; int&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; stopCh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;lt;-chan struct&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;{}) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	for&lt;&#x2F;span&gt;&lt;span&gt; i&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt; 0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; i&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;lt;&lt;&#x2F;span&gt;&lt;span&gt; workers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; i&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;++&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		go&lt;&#x2F;span&gt;&lt;span&gt; wait&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Until&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;worker&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; time&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Second&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; stopCh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	&amp;lt;-&lt;&#x2F;span&gt;&lt;span&gt;stopCh&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L177&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L177:34&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;æŒ‡å®šã•ã‚ŒãŸæ•°ã®workerã‚’èµ·å‹•ã—ã¦ã€&lt;code&gt;stopCh&lt;&#x2F;code&gt;ã§blockã—ã¦ã„ã¾ã™ã€‚&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;rsc &lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;ReplicaSetController&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; worker&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;() {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	for&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;processNextWorkItem&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;() {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;rsc &lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;ReplicaSetController&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; processNextWorkItem&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;()&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; bool&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; quit&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;queue&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Get&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	if&lt;&#x2F;span&gt;&lt;span&gt; quit&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		return false&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	defer&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;queue&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Done&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;syncHandler&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	if&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; == nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;queue&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Forget&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		return true&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	utilruntime&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;HandleError&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;fmt&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Errorf&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt;Sync &lt;&#x2F;span&gt;&lt;span style=&quot;color: #EBCB8B;&quot;&gt;%q&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt; failed with &lt;&#x2F;span&gt;&lt;span style=&quot;color: #EBCB8B;&quot;&gt;%v&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;&amp;quot;,&lt;&#x2F;span&gt;&lt;span&gt; key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;queue&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;AddRateLimited&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	return true&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L432&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L432:34&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;è‚å¿ƒã®workerã¯queueã‹ã‚‰taskã‚’å–å¾—ã—ã¦ã€&lt;code&gt;ReplicaSetController.syncHandler()&lt;&#x2F;code&gt;å‡¦ç†ã‚’å‘¼ã³å‡ºã—ã¦ã„ã¾ã™ã€‚
ã“ã®queueã¾ã‚ã‚Šã‚‚slideã®å¾ŒåŠã§è§£èª¬ã•ã‚Œã¦ã„ã¾ã—ãŸãŒã€æ¦‚è¦ã¨ã—ã¦ã¯api-serverã‹ã‚‰controllerãŒé–¢å¿ƒã®ã‚ã‚‹Eventã«çµã£ã¦å–å¾—ã—ã¦ã„ã‚‹ã¨ç†è§£ã—ã¦ã„ã¾ã™ã€‚&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; NewBaseController&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rsInformer appsinformers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;ReplicaSetInformer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; podInformer coreinformers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;PodInformer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; kubeClient clientset&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Interface&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; burstReplicas&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; int&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	gvk schema&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;GroupVersionKind&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; metricOwnerName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; queueName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; podControl controller&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;PodControlInterface&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;ReplicaSetController&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;    &#x2F;&#x2F;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;syncHandler&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;syncReplicaSet&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	return&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L163&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L163&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;ReplicaSetController.syncHandler&lt;&#x2F;code&gt;ã«ã¯&lt;code&gt;syncReplicaSet&lt;&#x2F;code&gt;ãŒç”Ÿæˆå‡¦ç†æ™‚ã«ã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;&#x2F;&#x2F; syncReplicaSet will sync the ReplicaSet with the given key if it has had its expectations fulfilled,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;&#x2F;&#x2F; meaning it did not expect to see any more of its pods created or deleted. This function is not meant to be&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;&#x2F;&#x2F; invoked concurrently with the same key.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;rsc &lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;ReplicaSetController&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; syncReplicaSet&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	namespace&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; name&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; cache&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;SplitMetaNamespaceKey&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;rsLister&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;ReplicaSets&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;namespace&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;).&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Get&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;name&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	selector&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; metav1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;LabelSelectorAsSelector&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Spec&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Selector&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	allPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;podLister&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Pods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Namespace&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;).&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;List&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;labels&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Everything&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;())&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; Ignore inactive pods.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	filteredPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; controller&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;FilterActivePods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;allPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; NOTE: filteredPods are pointing to objects from cache - if you need to&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; modify them, you need to copy it first.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	filteredPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;claimPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; selector&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; filteredPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	var&lt;&#x2F;span&gt;&lt;span&gt; manageReplicasErr&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	if&lt;&#x2F;span&gt;&lt;span&gt; rsNeedsSync&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span&gt; rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;DeletionTimestamp&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; == nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		manageReplicasErr&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;manageReplicas&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;filteredPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;    &#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æ¦‚è¦ã¨ã—ã¦ã¯ã€å‡¦ç†å¯¾è±¡ã®&lt;code&gt;ReplicaSet&lt;&#x2F;code&gt;ã¨filterlingã—ãŸ&lt;code&gt;Pod&lt;&#x2F;code&gt;ã‚’å–å¾—ã—ã¦ã€&lt;code&gt;ReplicaSetController.manageReplicas()&lt;&#x2F;code&gt;ã‚’å‘¼ã‚“ã§ã„ã¾ã™ã€‚
ã“ã‚Œã§ã‚ˆã†ã‚„ãslideã®æœ€åˆã®å‡¦ç†ã®ãŸã©ã‚Šç€ãã¾ã—ãŸã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;replicasetcontroller-managereplicas&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#replicasetcontroller-managereplicas&quot; aria-label=&quot;Anchor link for: replicasetcontroller-managereplicas&quot;&gt;&lt;code&gt;ReplicaSetController.manageReplicas()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;

&lt;a href=&quot;https:&amp;#x2F;&amp;#x2F;speakerdeck.com&amp;#x2F;govargo&amp;#x2F;under-the-kubernetes-controller-36f9b71b-9781-4846-9625-23c31da93014?slide=20&quot;&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;controller_2.jpeg&quot; 
      alt=&quot;&quot;, 
       
      
    &gt;
    
  &lt;&#x2F;div&gt;
  
&lt;&#x2F;figure&gt;

&lt;&#x2F;a&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;&#x2F;&#x2F; manageReplicas checks and updates replicas for the given ReplicaSet.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;&#x2F;&#x2F; Does NOT modify &amp;lt;filteredPods&amp;gt;.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;&#x2F;&#x2F; It will requeue the replica set in case of an error while creating&#x2F;deleting pods.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;rsc &lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;ReplicaSetController&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; manageReplicas&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;filteredPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; []&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;apps&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;ReplicaSet&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	diff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; len&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;filteredPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; - int&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Spec&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Replicas&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	rsKey&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; controller&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;KeyFunc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	if&lt;&#x2F;span&gt;&lt;span&gt; diff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt; 0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		diff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *= -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;		&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		successfulCreations&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; slowStartBatch&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;diff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; controller&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;SlowStartInitialBatchSize&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;()&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;			err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;podControl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;CreatePodsWithControllerRef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Namespace&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;amp;&lt;&#x2F;span&gt;&lt;span&gt;rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Spec&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Template&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; metav1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;NewControllerRef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;GroupVersionKind&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;			if&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; != nil &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span&gt; errors&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;IsTimeout&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;				&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;				return nil&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;			}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;			return&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;		})&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;		&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		return&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L459&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L459:34&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; slowStartBatch&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;count&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; int&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; initialBatchSize&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; int&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; fn&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;()&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	remaining&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; count&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	successes&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt; 0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	for&lt;&#x2F;span&gt;&lt;span&gt; batchSize&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; integer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;IntMin&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;remaining&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; initialBatchSize&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; batchSize&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt; 0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; batchSize&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; integer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;IntMin&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;batchSize&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; remaining&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		errCh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; make&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;chan error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; batchSize&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		var&lt;&#x2F;span&gt;&lt;span&gt; wg sync&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;WaitGroup&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		wg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Add&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;batchSize&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		for&lt;&#x2F;span&gt;&lt;span&gt; i&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt; 0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; i&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;lt;&lt;&#x2F;span&gt;&lt;span&gt; batchSize&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; i&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;++&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;			go func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;() {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;				defer&lt;&#x2F;span&gt;&lt;span&gt; wg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Done&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;				if&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; fn&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;()&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; != nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;					errCh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;lt;-&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;				}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;			}()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;		}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		wg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Wait&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		curSuccesses&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; batchSize&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; len&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;errCh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		successes&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; +=&lt;&#x2F;span&gt;&lt;span&gt; curSuccesses&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		if&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; len&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;errCh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt; 0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;			return&lt;&#x2F;span&gt;&lt;span&gt; successes&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;lt;-&lt;&#x2F;span&gt;&lt;span&gt;errCh&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;		}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		remaining&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; -=&lt;&#x2F;span&gt;&lt;span&gt; batchSize&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	return&lt;&#x2F;span&gt;&lt;span&gt; successes&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; nil&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L658&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L658&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;Pod&lt;&#x2F;code&gt;ã¨&lt;code&gt;ReplicaSet&lt;&#x2F;code&gt;ã®replicaæ•°ã®å·®åˆ†ã‚’ã¨ã£ã¦ã€&lt;code&gt;Pod&lt;&#x2F;code&gt;ã®ä½œæˆå‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã­ã€‚
&lt;code&gt;slowStartBatch()&lt;&#x2F;code&gt;ã¯ä½œæˆå‡¦ç†ã‚’ä¸¦åˆ—ã§èµ°ã‚‰ã›ã‚‹helperé–¢æ•°ã®ã‚ˆã†ã§ã™ã€‚
æ®µéšçš„ã«ä¸€åº¦ã«èµ·å‹•ã™ã‚‹goroutineã®æ•°ã‚’å¢—ã‚„ã—ã¦ã„ãå‡¦ç†ã®æ›¸ãæ–¹ã¨ã—ã¦éå¸¸ã«å‚è€ƒã«ãªã‚Šã¾ã™ã€‚(&lt;code&gt;IntMin()&lt;&#x2F;code&gt;ã®ã‚ˆã†ãªå‡¦ç†ã¯std libã§æ¬²ã—ã„ã¨æ€ã£ã¦ã—ã¾ã†)
&lt;code&gt;ReplicaSetController.podControl&lt;&#x2F;code&gt;ã¯interfaceã§ã€å®Ÿéš›ã®&lt;code&gt;Pod&lt;&#x2F;code&gt;ä½œæˆå‡¦ç†ã¯&lt;code&gt;ReadPodControl&lt;&#x2F;code&gt;ãŒå®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;r RealPodControl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; CreatePodsWithControllerRef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;namespace&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; template&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;PodTemplateSpec&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; controllerObject runtime&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Object&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; controllerRef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;metav1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;OwnerReference&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	if&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; validateControllerRef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;controllerRef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; != nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		return&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	return&lt;&#x2F;span&gt;&lt;span&gt; r&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;createPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&amp;quot;&amp;quot;,&lt;&#x2F;span&gt;&lt;span&gt; namespace&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; template&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; controllerObject&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; controllerRef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;speakerdeck.com&#x2F;govargo&#x2F;under-the-kubernetes-controller-36f9b71b-9781-4846-9625-23c31da93014?slide=19&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;controller_utils.go#L523&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;r RealPodControl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; createPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;nodeName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; namespace&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; template&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;PodTemplateSpec&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; object runtime&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Object&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; controllerRef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;metav1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;OwnerReference&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; GetPodFromTemplate&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;template&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; object&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; controllerRef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	if&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; len&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;nodeName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; !=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt; 0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Spec&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;NodeName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; nodeName&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	newPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; r&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;KubeClient&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;CoreV1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Pods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;namespace&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;).&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Create&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	if&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; != nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		r&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Recorder&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Eventf&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;object&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;EventTypeWarning&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; FailedCreatePodReason&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt;Error creating: &lt;&#x2F;span&gt;&lt;span style=&quot;color: #EBCB8B;&quot;&gt;%v&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;&amp;quot;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		return&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	return nil&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;speakerdeck.com&#x2F;govargo&#x2F;under-the-kubernetes-controller-36f9b71b-9781-4846-9625-23c31da93014?slide=19&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;controller_utils.go#L567&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;ç¢ºã‹ã«slideã®ã¨ãŠã‚Šã€&lt;code&gt;r.createPods(&quot;&quot;, namespace, template, controllerObject, controllerRef)&lt;&#x2F;code&gt; ã¨ã—ã¦&lt;code&gt;nodeName&lt;&#x2F;code&gt;ãŒç©ºã®&lt;code&gt;Pod&lt;&#x2F;code&gt;ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;schedulergaenqueue&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#schedulergaenqueue&quot; aria-label=&quot;Anchor link for: schedulergaenqueue&quot;&gt;SchedulerãŒenqueue&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;

&lt;a href=&quot;https:&amp;#x2F;&amp;#x2F;speakerdeck.com&amp;#x2F;govargo&amp;#x2F;under-the-kubernetes-controller-36f9b71b-9781-4846-9625-23c31da93014?slide=21&quot;&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;controller_3.jpeg&quot; 
      alt=&quot;&quot;, 
       
      
    &gt;
    
  &lt;&#x2F;div&gt;
  
&lt;&#x2F;figure&gt;

&lt;&#x2F;a&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; AddAllEventHandlers&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;...&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;    &#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	podInformer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Informer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;AddEventHandler&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		cache&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;FilteringResourceEventHandler&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;{&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;			FilterFunc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;obj&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; interface&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;{})&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; bool&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;				switch&lt;&#x2F;span&gt;&lt;span&gt; t&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; obj&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;type&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;				case *&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;					return !&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;assignedPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;t&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; responsibleForPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;t&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; schedulerName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;				case&lt;&#x2F;span&gt;&lt;span&gt; cache&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;DeletedFinalStateUnknown&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;					if&lt;&#x2F;span&gt;&lt;span&gt; pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; ok&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; t&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Obj&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; ok&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;						return !&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;assignedPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; responsibleForPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; schedulerName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;					}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;					utilruntime&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;HandleError&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;fmt&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Errorf&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt;unable to convert object &lt;&#x2F;span&gt;&lt;span style=&quot;color: #EBCB8B;&quot;&gt;%T&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt; to *v1.Pod in &lt;&#x2F;span&gt;&lt;span style=&quot;color: #EBCB8B;&quot;&gt;%T&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;&amp;quot;,&lt;&#x2F;span&gt;&lt;span&gt; obj&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; sched&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;					return false&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;				default&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;					utilruntime&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;HandleError&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;fmt&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Errorf&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt;unable to handle object in &lt;&#x2F;span&gt;&lt;span style=&quot;color: #EBCB8B;&quot;&gt;%T&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color: #EBCB8B;&quot;&gt;%T&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;&amp;quot;,&lt;&#x2F;span&gt;&lt;span&gt; sched&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; obj&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;					return false&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;				}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;			},&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;			Handler&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span&gt; cache&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;ResourceEventHandlerFuncs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;{&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;				AddFunc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span&gt;    sched&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;addPodToSchedulingQueue&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;				UpdateFunc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span&gt; sched&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;updatePodInSchedulingQueue&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;				DeleteFunc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span&gt; sched&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;deletePodFromSchedulingQueue&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;			},&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;		},&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;scheduler&#x2F;eventhandlers.go#L418&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;scheduler&#x2F;eventhandlers.go#L418&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; assignedPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; bool&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	return&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; len&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Spec&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;NodeName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; !=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt; 0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;scheduler&#x2F;eventhandlers.go#L418&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;scheduler&#x2F;eventhandlers.go#L323&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;Scheduler&lt;&#x2F;code&gt;ãŒ&lt;code&gt;podInformer&lt;&#x2F;code&gt;ã«event handlerã‚’ç™»éŒ²ã™ã‚‹éš›ã«ã€podãŒassigne(&lt;code&gt;NodeName&lt;&#x2F;code&gt;ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹)ã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’æ¡ä»¶ã¨ã™ã‚‹filterã‚’è¨­å®šã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;kubelethaskip&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#kubelethaskip&quot; aria-label=&quot;Anchor link for: kubelethaskip&quot;&gt;kubeletã¯skip&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;

&lt;a href=&quot;https:&amp;#x2F;&amp;#x2F;speakerdeck.com&amp;#x2F;govargo&amp;#x2F;under-the-kubernetes-controller-36f9b71b-9781-4846-9625-23c31da93014?slide=22&quot;&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;controller_4.jpeg&quot; 
      alt=&quot;&quot;, 
       
      
    &gt;
    
  &lt;&#x2F;div&gt;
  
&lt;&#x2F;figure&gt;

&lt;&#x2F;a&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;&#x2F;&#x2F; NewSourceApiserver creates a config source that watches and pulls from the apiserver.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; NewSourceApiserver&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;c clientset&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Interface&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; nodeName types&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;NodeName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; updates&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; chan&amp;lt;- interface&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;{}) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	lw&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; cache&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;NewListWatchFromClient&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;c&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;CoreV1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;RESTClient&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(), &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt;pods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;&amp;quot;,&lt;&#x2F;span&gt;&lt;span&gt; metav1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;NamespaceAll&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; fields&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;OneTermEqualSelector&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;api&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;PodHostField&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;nodeName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;	newSourceApiserverFromLW&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;lw&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; updates&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;kubelet&#x2F;config&#x2F;apiserver.go#L32&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;kubelet&#x2F;config&#x2F;apiserver.go#L32&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;kubelet&lt;&#x2F;code&gt;ã®api serverã¸ã®clientç”Ÿæˆå‡¦ç†æ™‚ã«ã€&lt;code&gt;Pod&lt;&#x2F;code&gt;ã®HoståãŒ(ãŠãã‚‰ã)è‡ªèº«ã®nodeåã¨ä¸€è‡´ã™ã‚‹Filterã‚’è¨­å®šã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;schedulerganode-namewoshe-ding&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#schedulerganode-namewoshe-ding&quot; aria-label=&quot;Anchor link for: schedulerganode-namewoshe-ding&quot;&gt;SchedulerãŒnode nameã‚’è¨­å®š&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;

&lt;a href=&quot;https:&amp;#x2F;&amp;#x2F;speakerdeck.com&amp;#x2F;govargo&amp;#x2F;under-the-kubernetes-controller-36f9b71b-9781-4846-9625-23c31da93014?slide=23&quot;&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;controller_5.jpeg&quot; 
      alt=&quot;&quot;, 
       
      
    &gt;
    
  &lt;&#x2F;div&gt;
  
&lt;&#x2F;figure&gt;

&lt;&#x2F;a&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;sched &lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;Scheduler&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; scheduleOne&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;() {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; sched&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;NextPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	scheduleResult&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; sched&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;schedule&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; pluginContext&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	assumedPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;DeepCopy&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; assume modifies `assumedPod` by setting NodeName=scheduleResult.SuggestedHost&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; sched&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;assume&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;assumedPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; scheduleResult&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;SuggestedHost&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;[https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;scheduler&#x2F;scheduler.go#L516](white-space:nowrap;
overflow:scroll;)&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;sched &lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;Scheduler&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; assume&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;assumed&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; host&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;    &#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	assumed&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Spec&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;NodeName&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; host&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;    &#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	return nil&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;[https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;scheduler&#x2F;scheduler.go#L447](white-space:nowrap;
overflow:scroll;)&lt;&#x2F;p&gt;
&lt;p&gt;Schedulingå‡¦ç†è‡ªä½“ã¯ä¸€å¤§Topicã§ã™ãŒã€æµã‚Œã¨ã—ã¦ã¯ã€ãªã‚“ã‚‰ã‹ã®æ–¹æ³•ã§Nodeåã‚’é¸å‡ºã—ã¦ã€&lt;code&gt;Pod&lt;&#x2F;code&gt;ã®nodeåã«æŒ‡å®šã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;kubeletgakontenawoqi-dong&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#kubeletgakontenawoqi-dong&quot; aria-label=&quot;Anchor link for: kubeletgakontenawoqi-dong&quot;&gt;&lt;code&gt;kubelet&lt;&#x2F;code&gt;ãŒã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;

&lt;a href=&quot;https:&amp;#x2F;&amp;#x2F;speakerdeck.com&amp;#x2F;govargo&amp;#x2F;under-the-kubernetes-controller-36f9b71b-9781-4846-9625-23c31da93014?slide=24&quot;&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;controller_6.jpeg&quot; 
      alt=&quot;&quot;, 
       
      
    &gt;
    
  &lt;&#x2F;div&gt;
  
&lt;&#x2F;figure&gt;

&lt;&#x2F;a&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;m &lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;kubeGenericRuntimeManager&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; SyncPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; podStatus&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;kubecontainer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;PodStatus&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; pullSecrets&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; []&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Secret&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; backOff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;flowcontrol&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Backoff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) (&lt;&#x2F;span&gt;&lt;span&gt;result kubecontainer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;PodSyncResult&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt; 	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; Step 6: start the init container.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	if&lt;&#x2F;span&gt;&lt;span&gt; container&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; podContainerChanges&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;NextInitContainerToStart&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; container&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; != nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;		&#x2F;&#x2F; Start the next init container.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		if&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; start&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt;init container&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;&amp;quot;,&lt;&#x2F;span&gt;&lt;span&gt; container&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; != nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;			return&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;		}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;		&#x2F;&#x2F; Successfully started the container; clear the entry in the failure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		klog&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;V&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;).&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Infof&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt;Completed init container &lt;&#x2F;span&gt;&lt;span style=&quot;color: #EBCB8B;&quot;&gt;%q&lt;&#x2F;span&gt;&lt;span style=&quot;color: #A3BE8C;&quot;&gt; for pod &lt;&#x2F;span&gt;&lt;span style=&quot;color: #EBCB8B;&quot;&gt;%q&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;&amp;quot;,&lt;&#x2F;span&gt;&lt;span&gt; container&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Name&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; format&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;    &#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;kubelet&#x2F;kuberuntime&#x2F;kuberuntime_manager.go#L803&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;kubelet&#x2F;kuberuntime&#x2F;kuberuntime_manager.go#L803&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;kubelet&lt;&#x2F;code&gt;ã®å‡¦ç†ã¯ã¾ã£ãŸãè¿½ãˆã¦ã„ãªã„ã®ã§ã™ãŒã€ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¦ã„ã‚‹ã‚ˆã†ãªå‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;kubeletgapodnostatuswogeng-xin&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#kubeletgapodnostatuswogeng-xin&quot; aria-label=&quot;Anchor link for: kubeletgapodnostatuswogeng-xin&quot;&gt;&lt;code&gt;kubelet&lt;&#x2F;code&gt;ãŒ&lt;code&gt;Pod&lt;&#x2F;code&gt;ã®statusã‚’æ›´æ–°&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;speakerd.s3.amazonaws.com&#x2F;presentations&#x2F;173fdf8b50f445ba895b82fb6650825c&#x2F;preview_slide_24.jpg?13730934:image=https:&#x2F;&#x2F;speakerd.s3.amazonaws.com&#x2F;presentations&#x2F;173fdf8b50f445ba895b82fb6650825c&#x2F;preview_slide_24.jpg?13730934&quot;&gt;https:&#x2F;&#x2F;speakerd.s3.amazonaws.com&#x2F;presentations&#x2F;173fdf8b50f445ba895b82fb6650825c&#x2F;preview_slide_24.jpg?13730934:image=https:&#x2F;&#x2F;speakerd.s3.amazonaws.com&#x2F;presentations&#x2F;173fdf8b50f445ba895b82fb6650825c&#x2F;preview_slide_24.jpg?13730934&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;kl &lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;Kubelet&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; syncPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;o syncPodOptions&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; pull out the required options&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; o&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	mirrorPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; o&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;mirrorPod&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	podStatus&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; o&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;podStatus&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	updateType&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; o&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;updateType&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; Generate final API pod status with pod and status manager status&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	apiPodStatus&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; kl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;generateAPIPodStatus&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; podStatus&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;kubelet&#x2F;kubelet.go#L1481&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;kubelet&#x2F;kubelet.go#L1481&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;podnoterminating&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#podnoterminating&quot; aria-label=&quot;Anchor link for: podnoterminating&quot;&gt;&lt;code&gt;Pod&lt;&#x2F;code&gt;ã®Terminating&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;

&lt;a href=&quot;https:&amp;#x2F;&amp;#x2F;speakerdeck.com&amp;#x2F;govargo&amp;#x2F;under-the-kubernetes-controller-36f9b71b-9781-4846-9625-23c31da93014?slide=26&quot;&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;controller_7.jpeg&quot; 
      alt=&quot;&quot;, 
       
      
    &gt;
    
  &lt;&#x2F;div&gt;
  
&lt;&#x2F;figure&gt;

&lt;&#x2F;a&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;&#x2F;&#x2F; dispatchWork starts the asynchronous sync of the pod in a pod worker.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;&#x2F;&#x2F; If the pod is terminated, dispatchWork&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;kl &lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;Kubelet&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; dispatchWork&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; syncType kubetypes&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;SyncPodType&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; mirrorPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; start time&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Time&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	if&lt;&#x2F;span&gt;&lt;span&gt; kl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;podIsTerminated&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		if&lt;&#x2F;span&gt;&lt;span&gt; pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;DeletionTimestamp&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; != nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;			&#x2F;&#x2F; If the pod is in a terminated state, there is no pod worker to&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;			&#x2F;&#x2F; handle the work item. Check if the DeletionTimestamp has been&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;			&#x2F;&#x2F; set, and force a status update to trigger a pod deletion request&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;			&#x2F;&#x2F; to the apiserver.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;			kl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;statusManager&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;TerminatePod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;		}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		return&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;    &#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;kubelet&#x2F;kubelet.go#L1999&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;kubelet&#x2F;kubelet.go#L1999&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;replicasetcontrollergapodwoxue-chu&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#replicasetcontrollergapodwoxue-chu&quot; aria-label=&quot;Anchor link for: replicasetcontrollergapodwoxue-chu&quot;&gt;&lt;code&gt;ReplicaSetController&lt;&#x2F;code&gt;ãŒ&lt;code&gt;Pod&lt;&#x2F;code&gt;ã‚’å‰Šé™¤&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;

&lt;a href=&quot;https:&amp;#x2F;&amp;#x2F;speakerdeck.com&amp;#x2F;govargo&amp;#x2F;under-the-kubernetes-controller-36f9b71b-9781-4846-9625-23c31da93014?slide=28&quot;&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;controller_8.jpeg&quot; 
      alt=&quot;&quot;, 
       
      
    &gt;
    
  &lt;&#x2F;div&gt;
  
&lt;&#x2F;figure&gt;

&lt;&#x2F;a&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #D8DEE9; background-color: #2E3440;&quot;&gt;&lt;code data-lang=&quot;go&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; (&lt;&#x2F;span&gt;&lt;span&gt;rsc &lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;ReplicaSetController&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; manageReplicas&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;filteredPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; []&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;apps&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;ReplicaSet&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	diff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; len&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;filteredPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; - int&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Spec&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Replicas&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	rsKey&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; controller&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;KeyFunc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;	&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	if&lt;&#x2F;span&gt;&lt;span&gt; diff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt; 0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;		&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; else if&lt;&#x2F;span&gt;&lt;span&gt; diff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B48EAD;&quot;&gt; 0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;		&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;		&#x2F;&#x2F; Choose which Pods to delete, preferring those in earlier phases of startup.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		podsToDelete&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; getPodsToDelete&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;filteredPods&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; diff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;		&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		errCh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt; make&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;chan error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; diff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		var&lt;&#x2F;span&gt;&lt;span&gt; wg sync&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;WaitGroup&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		wg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Add&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;diff&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		for&lt;&#x2F;span&gt;&lt;span&gt; _&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; := range&lt;&#x2F;span&gt;&lt;span&gt; podsToDelete&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;			go func&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;targetPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; *&lt;&#x2F;span&gt;&lt;span&gt;v1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;) {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;				defer&lt;&#x2F;span&gt;&lt;span&gt; wg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Done&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;				if&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span&gt; rsc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;podControl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;DeletePod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span&gt;rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Namespace&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; targetPod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;Name&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt; rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; != nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;					&#x2F;&#x2F; ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;					errCh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; &amp;lt;-&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;				}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;			}(&lt;&#x2F;span&gt;&lt;span&gt;pod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;		}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;		wg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #88C0D0;&quot;&gt;Wait&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		select&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		case&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; := &amp;lt;-&lt;&#x2F;span&gt;&lt;span&gt;errCh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #616E88;&quot;&gt;			&#x2F;&#x2F; all errors have been reported before and they&amp;#39;re likely to be the same, so we&amp;#39;ll only return the first one we hit.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;			if&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt; != nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;				return&lt;&#x2F;span&gt;&lt;span&gt; err&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;			}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;		default&lt;&#x2F;span&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;		}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #ECEFF4;&quot;&gt;	}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #81A1C1;&quot;&gt;	return nil&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L459&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;blob&#x2F;2f76f5e63872a40ac08056289a6c52b4f6250154&#x2F;pkg&#x2F;controller&#x2F;replicaset&#x2F;replica_set.go#L459&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;ã“ã“ã§å†ã³ã€&lt;code&gt;ReplicaSetController.manageReplicas()&lt;&#x2F;code&gt;ã«æˆ»ã£ã¦ãã¾ã—ãŸã€‚ä»Šåº¦ã¯ã€specã‚ˆã‚Šã‚‚å®Ÿéš›ã®&lt;code&gt;Pod&lt;&#x2F;code&gt;ãŒå¤šã„ã®ã§ã€å‰Šé™¤å‡¦ç†ãŒèµ°ã‚‹ã‚ˆã†ã§ã™ã€‚å‰Šé™¤å‡¦ç†ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«å‰Šé™¤ã™ã‚‹æ•°ã ã‘goroutineã‚’èµ·å‹•ã™ã‚‹ã‚ˆã†ã§ã™ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;reconcile&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#reconcile&quot; aria-label=&quot;Anchor link for: reconcile&quot;&gt;Reconcile&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;

&lt;a href=&quot;https:&amp;#x2F;&amp;#x2F;speakerd.s3.amazonaws.com&amp;#x2F;presentations&amp;#x2F;173fdf8b50f445ba895b82fb6650825c&amp;#x2F;preview_slide_29.jpg?13730939:image=https:&amp;#x2F;&amp;#x2F;speakerd.s3.amazonaws.com&amp;#x2F;presentations&amp;#x2F;173fdf8b50f445ba895b82fb6650825c&amp;#x2F;preview_slide_29.jpg?13730939&quot;&gt;

&lt;figure class=&quot;&quot;&gt;
  &lt;div class=&quot;fig-images-row&quot;&gt;
    
    &lt;img 
      src=&quot;images&amp;#x2F;controller_9.jpeg&quot; 
      alt=&quot;&quot;, 
       
      
    &gt;
    
  &lt;&#x2F;div&gt;
  
&lt;&#x2F;figure&gt;

&lt;&#x2F;a&gt;
&lt;p&gt;ã“ã“ã¾ã§ã€éå¸¸ã«ç°¡å˜ã«ã§ã™ãŒslideã«ãã£ã¦ã€&lt;code&gt;ReplicaSetController&lt;&#x2F;code&gt;ã‚’ä¸­å¿ƒã«è©²å½“ã‚³ãƒ¼ãƒ‰ã‚’è¿½ã„ã‹ã‘ã¦ã¿ã¾ã—ãŸã€‚
kubernetesã®codeã‚’åˆã‚ã¦èª­ã‚“ã ã®ã§ã™ãŒã€å„componentã®å®Ÿè£…ãŒã ã„ãŸã„ã©ã®ã‚ãŸã‚Šã‚ã‚‹ã®ã‹ã‚’çŸ¥ã‚‹ãŸã‚ã®ã¨ã£ã‹ã‹ã‚Šã¨ã—ã¦éå¸¸ã«å‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚slideã®å¾ŒåŠã§ã¯ã€&lt;code&gt;Informer&lt;&#x2F;code&gt;ã‚„&lt;code&gt;WorkQueue&lt;&#x2F;code&gt;ã«ã¤ã„ã¦ã‚‚è§£èª¬ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€æ˜¯éãã¡ã‚‰ã‚‚è¿½ã„ã‹ã‘ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
