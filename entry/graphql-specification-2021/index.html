<!doctype html><html lang=ja><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=https://blog.ymgyt.io/favicon.ico rel=icon sizes=any><link href=https://blog.ymgyt.io/icon.svg rel=icon type=image/svg+xml><link href=https://blog.ymgyt.io/apple-touch-icon.png rel=apple-touch-icon><link href=https://blog.ymgyt.io/manifest.webmanifest rel=manifest><link href=https://blog.ymgyt.io/style.css rel=stylesheet><link href=https://blog.ymgyt.io/atom.xml rel=alternate title=Atom type=application/atom+xml><script src="https://www.googletagmanager.com/gtag/js?id=G-GTB0KMLN90" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[];gtag(`js`,new Date());gtag(`config`,`G-GTB0KMLN90`)</script><title>🕸  GraphQL Specificationを読んでみる | Happy developing</title><meta content=GraphQLの仕様を読んでみた感想について name=description><meta content=summary name=twitter:card><meta content="@YAmaguchixt " name=twitter:site><meta content="🕸  GraphQL Specificationを読んでみる" name=twitter:title><meta content=GraphQLの仕様を読んでみた感想について name=twitter:description><meta content=https://blog.ymgyt.io/images/emoji/spider_web.png name=twitter:image><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><body><div class=world><div class=content-container><header class=blog-header-container><div class=blog-logo><a href=https://blog.ymgyt.io>Happy developing</a></div><div class=blog-nav><nav><ul><li><a href=https://blog.ymgyt.io/entry/>Entries</a><li><a href=https://blog.ymgyt.io/tags/>Tags</a><li><a href=https://blog.ymgyt.io/about/>About</a><li><a href=https://github.com/ymgyt> <img alt=Github class=icon src=https://blog.ymgyt.io/images/icon/github.svg> </a><li><a href="https://twitter.com/YAmaguchixt "> <img alt=Twitter class=icon src=https://blog.ymgyt.io/images/icon/twitter.svg> </a></ul></nav></div></header><main class=blog-main><article><header class=entry-header><h1 class=entry-title>🕸 GraphQL Specificationを読んでみる</h1><div class=entry-meta><p class=entry-meta-item>🗓 2022-11-04<p class=entry-meta-item>🏷 <span class=tag><a href=https://blog.ymgyt.io/tags/book/>book</a></span></div></header><aside class=entry-toc><nav><ul class=entry-toc-toplevel-list><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#1-overview>1 Overview</a> <ul><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#graphql-design-principals>GraphQL design principals</a></ul><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#2-language>2 Language</a> <ul><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#operations>Operations</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#selection-sets>Selection Sets</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#values>Values</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#variables>Variables</a></ul><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#3-type-system>3 Type System</a> <ul><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#descriptions>Descriptions</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#schema>Schema</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#types>Types</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#scalars>Scalars</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#interfaces>Interfaces</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#unions>Unions</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#non-null>Non-Null</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#directives-1>Directives</a></ul><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#4-introspection>4 Introspection</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#5-validation>5 Validation</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#6-execution>6 Execution</a> <ul><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#executing-requests>Executing Requests</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#executing-operations>Executing Operations</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#executing-selection-sets>Executing Selection Sets</a></ul><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#7-response>7 Response</a> <ul><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#response-format>Response format</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#serialization-format>Serialization Format</a></ul><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#appendix>Appendix</a><li><a href=https://blog.ymgyt.io/entry/graphql-specification-2021/#matome>まとめ</a></ul></nav></aside><div class=entry-content><figure><div class=fig-images-row><img , alt src=images/gql_spec.png></div></figure><p>本記事ではGraphQLの<a href=https://spec.graphql.org/October2021/>仕様</a>を読んだ感想について書きます。具体的にはOctober 2021 Editionです。<br> <a href=https://spec.graphql.org/October2021/>仕様</a>を読んでみようとおもったきっかけなのですが、Githubのgraphql apiにリクエストを送ろうとHttp requestを作っていた際に最終的にどういうjsonのbodyを作ればいいかわからず仕様でどうなっているのか気になったのがきっかけです。また<a href=https://spec.graphql.org/October2021/>仕様</a>には具体例ものっており思ったより読みやすそうという印象もうけました。🕸<h2 id=1-overview><a aria-label="Anchor link for: 1-overview" class=zola-anchor href=#1-overview>1 Overview</a></h2><p>GraphQLの概要について。<blockquote><p>GraphQL is a query language designed to build client applications by providing an intuitive and flexible syntax and system for describing their data requirements and interactions.</blockquote><p>GraphQLはclient applicationが欲しいデータを直感的かつ柔軟に表現できるsyntaxを提供する。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">user</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">id</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-numeric z-integer z-graphql">4</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">name</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>確かに上記のqueryでuser idが4のuserのnameを取得したいと素直に読めます。<blockquote><p>GraphQL is not a programming language capable of arbitrary computation, but is instead a language used to make requests to application services that have capabilities defined in this specification. GraphQL does not mandate a particular programming language or storage system for application services that implement it.</blockquote><ul><li>GraphQLはGraphQL serverへのrequestを作るためのlanguage<li>特定のprogramming言語を強制しない</ul><h3 id=graphql-design-principals><a aria-label="Anchor link for: graphql-design-principals" class=zola-anchor href=#graphql-design-principals>GraphQL design principals</a></h3><p>GraphQLには以下のdesign principlesがあるそうです。<ul><li>Product-centric<li>Hierarchical<li>Strong-typing<li>Client-specified response<li>Introspective</ul><h4 id=product-centric><a aria-label="Anchor link for: product-centric" class=zola-anchor href=#product-centric>Product-centric</a></h4><blockquote><p>GraphQL is unapologetically driven by the requirements of views and the front-end engineers that write them. GraphQL starts with their way of thinking and requirements and builds the language and runtime necessary to enable that.</blockquote><p>画面を作るfrontendのための言語であることが最初に宣言されているのが印象的です。<h4 id=hierarchical><a aria-label="Anchor link for: hierarchical" class=zola-anchor href=#hierarchical>Hierarchical</a></h4><blockquote><p>Most product development today involves the creation and manipulation of view hierarchies. To achieve congruence with the structure of these applications, a GraphQL request itself is structured hierarchically. The request is shaped just like the data in its response. It is a natural way for clients to describe data requirements.</blockquote><p>今日のproductにおいてはview hierarchiesを扱うのが一般的。<br> view hierarchiesの理解があやしいですが、例えばGithubのあるrepositoryのissueのtitle一覧が欲しいみたいな必要なdataが<code>aaa.bbb.ccc.ddd</code>のようにresourceの関係性で表現できるというようなことでしょうか。確かにあるrepositoryのissueのtitle一覧を取得しようと思った時に<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql">repository(owner: <span class="z-string z-quoted z-double z-graphql"><span class="z-string z-quoted z-double z-begin z-graphql">"</span>kubernetes<span class="z-string z-quoted z-double z-end z-graphql">"</span></span><span class="z-punctuation z-separator z-sequence z-graphql">,</span> name: <span class="z-string z-quoted z-double z-graphql"><span class="z-string z-quoted z-double z-begin z-graphql">"</span>kubernetes<span class="z-string z-quoted z-double z-end z-graphql">"</span></span>) <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">id</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">issues</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-variable z-parameter z-graphql">orderBy</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-meta z-mapping z-graphql"><span class="z-punctuation z-section z-mapping z-begin z-graphql">{</span><span class="z-meta z-mapping z-key z-graphql">field</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-constant z-other z-graphql">UPDATED_AT</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span> <span class="z-meta z-mapping z-key z-graphql">direction</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-constant z-other z-graphql">ASC</span> <span class="z-punctuation z-section z-mapping z-end z-graphql">}</span></span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-variable z-parameter z-graphql">states</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-meta z-sequence z-graphql"><span class="z-punctuation z-section z-sequence z-begin z-graphql">[</span><span class="z-constant z-other z-graphql">OPEN</span><span class="z-punctuation z-section z-sequence z-end z-graphql">]</span></span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-variable z-parameter z-graphql">first</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-numeric z-integer z-graphql">10</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">pageInfo</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">            <span class="z-entity z-name z-field z-graphql">startCursor</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">            <span class="z-entity z-name z-field z-graphql">endCursor</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">            <span class="z-entity z-name z-field z-graphql">hasNextPage</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">            <span class="z-entity z-name z-field z-graphql">hasPreviousPage</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">totalCount</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">edges</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">            <span class="z-entity z-name z-field z-graphql">cursor</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">            <span class="z-entity z-name z-field z-graphql">node</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">                <span class="z-entity z-name z-field z-graphql">id</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">                <span class="z-entity z-name z-field z-graphql">number</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">                <span class="z-entity z-name z-field z-graphql">title</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">            <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>のようなqueryをapiになげるのですが, responseとして<pre class="language-json z-code" data-lang=json><code class=language-json data-lang=json><span class="z-source z-json"> <span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>data<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>: <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-json">    </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>repository<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>id<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>MDEwOlJlcG9zaXRvcnkyMDU4MDQ5OA==<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>issues<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>pageInfo<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>startCursor<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Y3Vyc29yOnYyOpK5MjAxOC0wMS0xNlQyMTo1OToxOSswOTowMM4Gha_N<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>endCursor<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Y3Vyc29yOnYyOpK5MjAxOS0wNS0wN1QwNDoyNzo0NyswOTowMM4CkpIm<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>hasNextPage<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-language z-json">true</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>hasPreviousPage<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-language z-json">false</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>totalCount<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">1576</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>edges<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">          <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>cursor<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Y3Vyc29yOnYyOpK5MjAxOC0wMS0xNlQyMTo1OToxOSswOTowMM4Gha_N<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>node<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">              </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>id<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>MDU6SXNzdWUxMDk0MjQ1ODk=<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">              </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>number<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">14961</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">              </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>title<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Write proposal for controller pod management: adoption, orphaning, ownership, etc. (aka controllers v2)<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">          <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">          <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>cursor<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Y3Vyc29yOnYyOpK5MjAxOC0wMS0xOFQxNDoxMzozMSswOTowMM4LjpVk<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">            </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>node<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">              </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>id<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>MDU6SXNzdWUxOTM4OTM3MzI=<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">              </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>number<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">38216</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">              </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>title<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Expose enough information to resolve object references and label selectors generically<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">            <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">          <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span></span></span></code></pre><p>のようにqueryの構造に対応するresponseが返ってきて非常に直感的です。<h4 id=strong-typing><a aria-label="Anchor link for: strong-typing" class=zola-anchor href=#strong-typing>Strong-typing</a></h4><blockquote><p>Every GraphQL service defines an application-specific type system. Requests are executed within the context of that type system. Given a GraphQL operation, tools can ensure that it is both syntactically correct and valid within that type system before execution, i.e. at development time, and the service can make certain guarantees about the shape and nature of the response.</blockquote><p>型づけされている。<h4 id=client-specified-response><a aria-label="Anchor link for: client-specified-response" class=zola-anchor href=#client-specified-response>Client-specified response</a></h4><blockquote><p>Through its type system, a GraphQL service publishes the capabilities that its clients are allowed to consume. It is the client that is responsible for specifying exactly how it will consume those published capabilities. These requests are specified at field-level granularity. In the majority of client-server applications written without GraphQL, the service determines the shape of data returned from its various endpoints. A GraphQL response, on the other hand, contains exactly what a client asks for and no more.</blockquote><p>GraphQLではresponseの構造をclientが決める。<br> これがやりたくてGraphQL使いたいみたいなところがあります。RESTでAPI開発していてこのendpointでどこまで関連するリソース返すかはいつも悩みどころでした。(だいたい最初の開発が画面に引きづられて負債になる)<h4 id=introspective><a aria-label="Anchor link for: introspective" class=zola-anchor href=#introspective>Introspective</a></h4><blockquote><p>GraphQL is introspective. A GraphQL service’s type system can be queryable by the GraphQL language itself, as will be described in this specification. GraphQL introspection serves as a powerful platform for building common tools and client software libraries.</blockquote><p>GraphQLのapiはGraphQL自身で調べられる。便利だなくらいに思っていましたが仕様で最初から考慮されていたんですね。<h4 id=design-principles-matome><a aria-label="Anchor link for: design-principles-matome" class=zola-anchor href=#design-principles-matome>Design principles まとめ</a></h4><blockquote><p>Because of these principles, ... Product developers and designers building applications against working GraphQL services—supported with quality tools—can quickly become productive without reading extensive documentation and with little or no formal training.</blockquote><p>これらの原則のおかげでextensive documentationを読むことなくほとんどformal trainingなしにproductiveになれるみたいです。<br> (GraphQLやってみるにあたり割と色々解説記事探したりしていたので、quickly become productiveになれていなくて焦ります。)<p>まとめるとGraphQLは、frontend engineersが欲しいデータを関係性含めて型に基づいて表現できる言語という感じでしょうか。(+ Meta情報の公開の仕方も決まっている)<h2 id=2-language><a aria-label="Anchor link for: 2-language" class=zola-anchor href=#2-language>2 Language</a></h2><p>GraphQLのoperation(query,mutation,subscription)やselection set, variable, data typeといったcomponentについて。<blockquote><p>Clients use the GraphQL query language to make requests to a GraphQL service. We refer to these request sources as documents. A document may contain operations (queries, mutations, and subscriptions) as well as fragments, a common unit of composition allowing for data requirement reuse.</blockquote><p>GraphQL serverへのrequestにはdocumentを含める。documentにはoperationsやfragmentsを含めることができる。<br> Githubのgraphql apiへhttp request作ろうとした際にどんなjson投げればいいのか知りたくて本仕様を見てみたのですが、仕様上はなんらかの方法で"document"を含めるというような書きぶりでした。<blockquote><p>A GraphQL document is defined as a syntactic grammar where terminal symbols are tokens (indivisible lexical units). These tokens are defined in a lexical grammar which matches patterns of source characters. In this document, syntactic grammar productions are distinguished with a colon : while lexical grammar productions are distinguished with a double-colon ::.</blockquote><blockquote><p>The source text of a GraphQL document must be a sequence of SourceCharacter. The character sequence must be described by a sequence of Token and Ignored lexical grammars. The lexical token sequence, omitting Ignored, must be described by a single Document syntactic grammar.</blockquote><p>GraphQLのdocumentはtokenを終端記号とするsyntactic grammarで定義される。syntactic grammarのproductionsは<code>:</code>で定義される。<br> tokenはlexical grammarで定義される。lexical grammar productionsは<code>::</code>で定義される。<br> ソース -> token列 -> documentという流れでparseされるという理解です。<br> その他、Source Textとして有効なunicode code pointが定義されていたり、改行コードが定義されていたりします。UnicodeBOM入っていても仕様上有効という発見がありました。<h3 id=operations><a aria-label="Anchor link for: operations" class=zola-anchor href=#operations>Operations</a></h3><p>実際に書くGraphQL queryやmutationはどのように規定されているか。<pre class=z-code><code><span class="z-text z-plain">OperationDefinition :
</span><span class="z-text z-plain">  - OperationType Name? VariableDefinitions? Directives? SelectionSet
</span><span class="z-text z-plain">  - SelectionSet
</span><span class="z-text z-plain"> 
</span><span class="z-text z-plain">OperationType : one of `query` `mutation` `subscription`
</span></code></pre><p>Operationは上記のように定義されています。<br> GraphQLはじめた際に<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">repository</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">name</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>xxx<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">id</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-query z-graphql">query</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">repository</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">name</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>xxx<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">id</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-query z-graphql">query</span> <span class="z-entity z-name z-query z-graphql">FetchRepository</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">repository</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">name</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>xxx<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">id</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>のように色々な書き方があって混乱していたのですがOperationTypeを省略した際はqueryと解釈されて、operation nameは省略可能ということだったんですね。<h3 id=selection-sets><a aria-label="Anchor link for: selection-sets" class=zola-anchor href=#selection-sets>Selection Sets</a></h3><blockquote><p>An operation selects the set of information it needs, and will receive exactly that information and nothing more, avoiding over-fetching and under-fetching data.</blockquote><p>必要な情報だけを宣言するselectionについて。<pre class=z-code><code><span class="z-text z-plain">SelectionSet : { Selection+ }
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">Selection :
</span><span class="z-text z-plain">  - Field
</span><span class="z-text z-plain">  - FragmentSpread
</span><span class="z-text z-plain">  - InlineFragment
</span></code></pre><p>fieldかfragmentをかける。fragmentも別で定義するかinlineで書ける。<h4 id=field><a aria-label="Anchor link for: field" class=zola-anchor href=#field>Field</a></h4><pre class=z-code><code><span class="z-text z-plain">Field : Alias? Name Arguments? Directives? SelectionSet?
</span></code></pre><p>Fieldは上記のように定義されている。aliasが書けることや、再帰的にSelectionSetが書けることがわかります。<blockquote><p>Some fields describe complex data or relationships to other data. In order to further explore this data, a field may itself contain a selection set, allowing for deeply nested requests. All GraphQL operations must specify their selections down to fields which return scalar values to ensure an unambiguously shaped response.</blockquote><p>SelectionSetをnestさせても最終的にはscalarのfieldになる必要がある。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-query z-graphql">query</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">user</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">id</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-numeric z-integer z-graphql">3</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">id</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">birthday</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">            <span class="z-entity z-name z-field z-graphql">month</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">smallPic</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-parameter z-graphql">profilePic</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">size</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-numeric z-integer z-graphql">64</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">bigPic</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-parameter z-graphql">profilePic</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">size</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-numeric z-integer z-graphql">1024</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span><span class="z-punctuation z-separator z-sequence z-graphql">,</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>のようなqueryが書けることがわかりました。<h4 id=fragment><a aria-label="Anchor link for: fragment" class=zola-anchor href=#fragment>Fragment</a></h4><p>GraphQLだとuserを取得のようなことはできず必ずuserのどのfieldを取得するか毎回指定しないといけない。そのため、SelectionSetを再利用したくなり、そのための仕組みという理解です。<blockquote><p>Fragments are the primary unit of composition in GraphQL.</blockquote><blockquote><p>Fragments allow for the reuse of common repeated selections of fields, reducing duplicated text in the document. Inline Fragments can be used directly within a selection to condition upon a type condition when querying against an interface or union.</blockquote><p>仕様にも"reuse of common repeated selections of fields"とありますね。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-query z-graphql">query</span> <span class="z-entity z-name z-query z-graphql">withNestedFragments</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">user</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">id</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-numeric z-integer z-graphql">4</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">friends</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">first</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-numeric z-integer z-graphql">10</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      ...<span class="z-entity z-name z-field z-graphql">friendFields</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">mutualFriends</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">first</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-numeric z-integer z-graphql">10</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      ...<span class="z-entity z-name z-field z-graphql">friendFields</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-fragment z-graphql">fragment</span> <span class="z-entity z-name z-fragment z-graphql">friendFields</span> <span class="z-keyword z-other z-graphql">on</span> <span class="z-variable z-type z-graphql">User</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">id</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  ...<span class="z-entity z-name z-field z-graphql">standardProfilePic</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-fragment z-graphql">fragment</span> <span class="z-entity z-name z-fragment z-graphql">standardProfilePic</span> <span class="z-keyword z-other z-graphql">on</span> <span class="z-variable z-type z-graphql">User</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">profilePic</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">size</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-numeric z-integer z-graphql">50</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>fragmentからfragment参照できるのは知りませんでした。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-query z-graphql">query</span> <span class="z-entity z-name z-query z-graphql">FragmentTyping</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">profiles</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">handles</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-meta z-sequence z-graphql"><span class="z-punctuation z-section z-sequence z-begin z-graphql">[</span><span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>zuck<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-separator z-sequence z-graphql">,</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>coca-cola<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-sequence z-end z-graphql">]</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">handle</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    ...<span class="z-entity z-name z-field z-graphql">userFragment</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    ...<span class="z-entity z-name z-field z-graphql">pageFragment</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-fragment z-graphql">fragment</span> <span class="z-entity z-name z-fragment z-graphql">userFragment</span> <span class="z-keyword z-other z-graphql">on</span> <span class="z-variable z-type z-graphql">User</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">friends</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">count</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-fragment z-graphql">fragment</span> <span class="z-entity z-name z-fragment z-graphql">pageFragment</span> <span class="z-keyword z-other z-graphql">on</span> <span class="z-variable z-type z-graphql">Page</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">likers</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">count</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>fragmentは適用対象の型を明示する必要があり、上記の例では<code>profiles</code>が<code>User</code>か<code>Page</code>を返すので<pre class="language-json z-code" data-lang=json><code class=language-json data-lang=json><span class="z-source z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>profiles<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">    <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>handle<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>zuck<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>friends<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>count<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">1234</span> <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">    <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>handle<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>coca-cola<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>likers<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>count<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">90234512</span> <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">  <span class="z-punctuation z-section z-sequence z-end z-json">]</span></span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></code></pre><p>それぞれの型に対応したfragmentが適用されます。<pre class=z-code><code><span class="z-text z-plain">InlineFragment : ... TypeCondition? Directives? SelectionSet
</span></code></pre><p>fragmentはinlineでも書けて上記の例をinlineで書くと以下のようになります。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-query z-graphql">query</span> <span class="z-entity z-name z-query z-graphql">inlineFragmentTyping</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">profiles</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">handles</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-meta z-sequence z-graphql"><span class="z-punctuation z-section z-sequence z-begin z-graphql">[</span><span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>zuck<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-separator z-sequence z-graphql">,</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>coca-cola<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-sequence z-end z-graphql">]</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">handle</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    ... <span class="z-entity z-name z-field z-graphql">on</span> <span class="z-entity z-name z-field z-graphql">User</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">friends</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">count</span>
</span></span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    ... <span class="z-entity z-name z-field z-graphql">on</span> <span class="z-entity z-name z-field z-graphql">Page</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">likers</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">count</span>
</span></span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>またfragmentはdirectiveの適用範囲を指定するのにも使えるとのことです。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-query z-graphql">query</span> <span class="z-entity z-name z-query z-graphql">inlineFragmentNoType</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-punctuation z-definition z-variable z-graphql">$</span><span class="z-variable z-parameter z-graphql">expandedInfo</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Boolean</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">user</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">handle</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>zuck<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">id</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">name</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    ... @<span class="z-entity z-name z-field z-graphql">include</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">if</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-punctuation z-definition z-variable z-graphql">$</span><span class="z-variable z-other z-graphql">expandedInfo</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">firstName</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">lastName</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">birthday</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><h3 id=values><a aria-label="Anchor link for: values" class=zola-anchor href=#values>Values</a></h3><p>Int, Float, Boolean, String, Enum, List, Objectについては割愛。<h4 id=null-value><a aria-label="Anchor link for: null-value" class=zola-anchor href=#null-value>Null Value</a></h4><p>複数のprogramming言語またぐとなにかと問題になりがちなnullについて。<pre class=z-code><code><span class="z-text z-plain">NullValue : `null`
</span></code></pre><blockquote><p>Null values are represented as the keyword null.</blockquote><blockquote><p>GraphQL has two semantically different ways to represent the lack of a value: Explicitly providing the literal value: null. Implicitly not providing a value at all.</blockquote><p>値がないことを表現するには2種類の方法がある。一つは明示的に<code>null</code>を渡す。もう一つはvalueを渡さない。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">field</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">arg</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-language z-null z-graphql">null</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">field</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>上記は異なって解釈される場合があるそうです。例えばmutationにおいて、nullを渡すと当該fieldを削除して、何も渡さない場合は変更しない等。<blockquote><p>The same two methods of representing the lack of a value are possible via variables by either providing the variable value as null or not providing a variable value at all.</blockquote><p>変数についてもnullを渡す場合とvariableをそもそも渡さない場合の2種類がありえるということみたいです。<br> 個人的にはnull渡すのとなにも渡さないで挙動が変わるAPIは避けたい派です。二つの挙動あるならENUMで型として表現したいです。<br> (null渡すのとfiledがそもそもないのを区別するのjsだけだと思うのでそれをAPIにまで伝播させないでほしいと思ったり)<h3 id=variables><a aria-label="Anchor link for: variables" class=zola-anchor href=#variables>Variables</a></h3><p>operationから動的な部分を分離するためにvariableが使える。<pre class=z-code><code><span class="z-text z-plain">Variable : $ Name
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">VariableDefinitions : ( VariableDefinition+ )
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">VariableDefinition : Variable : Type DefaultValue? Directives[Const]?
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">DefaultValue : = Value[Const]
</span></code></pre><pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-query z-graphql">query</span> <span class="z-entity z-name z-query z-graphql">getZuckProfile</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-punctuation z-definition z-variable z-graphql">$</span><span class="z-variable z-parameter z-graphql">devicePicSize</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Int</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">user</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">id</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-numeric z-integer z-graphql">4</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">id</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">name</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">profilePic</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">size</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-punctuation z-definition z-variable z-graphql">$</span><span class="z-variable z-other z-graphql">devicePicSize</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><blockquote><p>A GraphQL operation can be parameterized with variables, maximizing reuse, and avoiding costly string building in clients at runtime.</blockquote><blockquote><p>Variables must be defined at the top of an operation and are in scope throughout the execution of that operation. Values for those variables are provided to a GraphQL service as part of a request so they may be substituted in during execution.</blockquote><p>ここでもvariableはrequestの一部という言及のみで具体的にどう渡すか書いていない。<h4 id=directives><a aria-label="Anchor link for: directives" class=zola-anchor href=#directives>Directives</a></h4><p>GraphQLの表現力を向上させられて、運用上大事になってきそうだけどいまいち理解できていないdirectiveについて。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql">Directives[Const] : Directive[?Const]+
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql">Directive[Const] : @ Name Arguments[?Const]?
</span></code></pre><blockquote><p>Directives provide a way to describe alternate runtime execution and type validation behavior in a GraphQL document.</blockquote><p>とあるので、runtimeの挙動を変えるのとvalidationが用途みたいです。<p>directiveは宣言する順番も影響するので下記の例ではdifferent semantic meaningをもつ<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">Person</span>
</span><span class="z-source z-graphql">  <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">addExternalFields</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">source</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>profiles<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span><span class="z-source z-graphql">  <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">excludeField</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>photo<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">Person</span>
</span><span class="z-source z-graphql">  <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">excludeField</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>photo<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span><span class="z-source z-graphql">  <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">addExternalFields</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">source</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>profiles<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><h2 id=3-type-system><a aria-label="Anchor link for: 3-type-system" class=zola-anchor href=#3-type-system>3 Type System</a></h2><p>GraphQLの型について。<blockquote><p>The GraphQL Type system describes the capabilities of a GraphQL service and is used to determine if a requested operation is valid, to guarantee the type of response results, and describes the input types of variables to determine if values provided at request time are valid.</blockquote><p>GraphQLの型systemは<ul><li>GraphQL serverができることを表現<li>Requestのoperationとvariableのvalidationに利用される<li>Responseの型を保証</ul><h3 id=descriptions><a aria-label="Anchor link for: descriptions" class=zola-anchor href=#descriptions>Descriptions</a></h3><blockquote><p>Documentation is a first-class feature of GraphQL type systems.</blockquote><p>GraphiQL等でAPI触っていてもdocumentがすぐ出てくるので別で調べに行かなくてよくて便利だなと思っていましたが、仕様上からfirst classだったんですね。<h3 id=schema><a aria-label="Anchor link for: schema" class=zola-anchor href=#schema>Schema</a></h3><blockquote><p>A GraphQL service’s collective type system capabilities are referred to as that service’s “schema”. A schema is defined in terms of the types and directives it supports as well as the root operation types for each kind of operation: query, mutation, and subscription; this determines the place in the type system where those operations begin.</blockquote><p>GraphQL Serverの機能はschemaとして表現される。<br> top levelに各query, mutation, subscriptionでできることが定義される。 また、型やdirectiveはschema上でuniqueである必要がある。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-schema z-graphql">schema</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-keyword z-other z-graphql">query</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">MyQueryRootType</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-keyword z-other z-graphql">mutation</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">MyMutationRootType</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">MyQueryRootType</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">someField</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">MyMutationRootType</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">setSomeField</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">to</span><span class="z-punctuation z-separator z-key-value">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>schemaを上記のように定義すると<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-query z-graphql">query</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">someField</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-mutation z-graphql">mutation</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">setSomeField</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">to</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>xxx<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">newField</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>のようにoperationを書ける。<br> また、mutationとsubscriptionのroot typeはoptionalであり、<code>Query</code>型を定義するとqueryのroot typeとなるので、以下のschema定義は有効。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">Query</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">someField</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><h3 id=types><a aria-label="Anchor link for: types" class=zola-anchor href=#types>Types</a></h3><pre class=z-code><code><span class="z-text z-plain">TypeDefinition :
</span><span class="z-text z-plain">  - ScalarTypeDefinition
</span><span class="z-text z-plain">  - ObjectTypeDefinition
</span><span class="z-text z-plain">  - InterfaceTypeDefinition
</span><span class="z-text z-plain">  - UnionTypeDefinition
</span><span class="z-text z-plain">  - EnumTypeDefinition
</span><span class="z-text z-plain">  - InputObjectTypeDefinition
</span></code></pre><blockquote><p>The fundamental unit of any GraphQL Schema is the type. There are six kinds of named type definitions in GraphQL, and two wrapping types.</blockquote><p>6つのnamed typeと2つのwrapping typesがある。(wrapping typesはListとNonNull)<br> ScalarとObjectはそのままの意味。<blockquote><p>GraphQL supports two abstract types: interfaces and unions.</blockquote><p>abstract typeとしてinterfaceとunionがある。<blockquote><p>An Interface defines a list of fields; Object types and other Interface types which implement this Interface are guaranteed to implement those fields. Whenever a field claims it will return an Interface type, it will return a valid implementing Object type during execution.</blockquote><p>Interfaceはfieldのlistで、schema上interfaceを返すと宣言されている場合、実際にはobject型が返ってくる。<blockquote><p>A Union defines a list of possible types; similar to interfaces, whenever the type system claims a union will be returned, one of the possible types will be returned.</blockquote><p>Interfaceと同様にschema上でunionが返されると宣言されている場合、実際にはそのうちのどれかが返ってくる。<blockquote><p>Finally, oftentimes it is useful to provide complex structs as inputs to GraphQL field arguments or variables; the Input Object type allows the schema to define exactly what data is expected.</blockquote><p>CreateXxxInput型定義しがちですが、Input型としてfirst classなのが他の型systemと違って特徴できだなと思ったりしました。<h4 id=wrapping-types><a aria-label="Anchor link for: wrapping-types" class=zola-anchor href=#wrapping-types>Wrapping Types</a></h4><p>上記の型はすべてnullableかつsingular。<br> <code>Non-Null</code>型と<code>List</code>が用意されておりwrapping typesとして他のnamed typesと区別される。<h4 id=input-and-output-types><a aria-label="Anchor link for: input-and-output-types" class=zola-anchor href=#input-and-output-types>Input and Output Types</a></h4><p>GraphQL serverへの入力に使われるかresponseの型定義に使われるかでinput typeとoutput typeが区別できる。<blockquote><p>Types are used throughout GraphQL to describe both the values accepted as input to arguments and variables as well as the values output by fields. These two uses categorize types as input types and output types. Some kinds of types, like Scalar and Enum types, can be used as both input types and output types; other kinds of types can only be used in one or the other. Input Object types can only be used as input types. Object, Interface, and Union types can only be used as output types. Lists and Non-Null types may be used as input types or output types depending on how the wrapped type may be used.</blockquote><ul><li>Scalar,Enum: input/output両方使用化<li>InputObject: inputのみ<li>Object,Interface,Union: outputのみ</ul><p>判定方法は以下<pre class=z-code><code><span class="z-text z-plain">IsInputType(type) :
</span><span class="z-text z-plain">  * If {type} is a List type or Non-Null type:
</span><span class="z-text z-plain">    * Let {unwrappedType} be the unwrapped type of {type}.
</span><span class="z-text z-plain">    * Return IsInputType({unwrappedType})
</span><span class="z-text z-plain">  * If {type} is a Scalar, Enum, or Input Object type:
</span><span class="z-text z-plain">    * Return {true}
</span><span class="z-text z-plain">  * Return {false}
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">IsOutputType(type) :
</span><span class="z-text z-plain">  * If {type} is a List type or Non-Null type:
</span><span class="z-text z-plain">    * Let {unwrappedType} be the unwrapped type of {type}.
</span><span class="z-text z-plain">    * Return IsOutputType({unwrappedType})
</span><span class="z-text z-plain">  * If {type} is a Scalar, Object, Interface, Union, or Enum type:
</span><span class="z-text z-plain">    * Return {true}
</span><span class="z-text z-plain">  * Return {false}
</span></code></pre><h3 id=scalars><a aria-label="Anchor link for: scalars" class=zola-anchor href=#scalars>Scalars</a></h3><blockquote><p>Scalar types represent primitive leaf values in a GraphQL type system. GraphQL responses take the form of a hierarchical tree; the leaves of this tree are typically GraphQL Scalar types (but may also be Enum types or null values).</blockquote><p>SectionSetで最終的に取得するのはscalar。<br> Built-inとして、Int,Float, String, Boolean, IDがある。<h4 id=custom-scalars><a aria-label="Anchor link for: custom-scalars" class=zola-anchor href=#custom-scalars>Custom Scalars</a></h4><p>Built-in scalarsに加えてcustom scalarsを使うことができる。<br> 例えば<code>UUID</code>や<code>URL</code>を使う場合が考えられる。<blockquote><p>When defining a custom scalar, GraphQL services should provide a scalar specification URL via the @specifiedBy directive or the specifiedByURL introspection field. This URL must link to a human-readable specification of the data format, serialization, and coercion rules for the scalar.</blockquote><p>Custom scalarsを定義する場合は<code>@specifiedBy</code>directiveで仕様のURLを明示する必要がある。(逆にBuiltinの仕様は本仕様に定められているので付与してはいけない)<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-scalar z-graphql">scalar</span> <span class="z-entity z-name z-type z-scalar z-graphql">UUID</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">specifiedBy</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">url</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>https://tools.ietf.org/html/rfc4122<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-scalar z-graphql">scalar</span> <span class="z-entity z-name z-type z-scalar z-graphql">URL</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">specifiedBy</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">url</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>https://tools.ietf.org/html/rfc3986<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span></code></pre><blockquote><p>A GraphQL service, when preparing a field of a given scalar type, must uphold the contract the scalar type describes, either by coercing the value or producing a field error if a value cannot be coerced or if coercion may result in data loss.</blockquote><p>また、Scalarの型に応じてcoercionをすることが許されるようです。<br> もっとも具体的にどのようにcoercionされるかは実装依存で仕様では定義されていないと思われますがBuilt-in scalarsについてはResult Coercion, Input Coercionそれぞれ仕様で定められています。<blockquote><p>Since this coercion behavior is not observable to clients of the GraphQL service, the precise rules of coercion are left to the implementation</blockquote><h3 id=interfaces><a aria-label="Anchor link for: interfaces" class=zola-anchor href=#interfaces>Interfaces</a></h3><blockquote><p>GraphQL interfaces represent a list of named fields and their arguments. GraphQL objects and interfaces can then implement these interfaces which requires that the implementing type will define all fields defined by those interfaces.</blockquote><pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-interface z-graphql">interface</span> <span class="z-entity z-name z-type z-interface z-graphql">NamedEntity</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-interface z-graphql">interface</span> <span class="z-entity z-name z-type z-interface z-graphql">ValuedEntity</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">value</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Int</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">Person</span> <span class="z-keyword z-declaration z-implements z-graphql">implements</span> <span class="z-variable z-type z-graphql">NamedEntity</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">age</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Int</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">Business</span> <span class="z-keyword z-declaration z-implements z-graphql">implements</span> <span class="z-variable z-type z-graphql">NamedEntity</span> <span class="z-punctuation z-separator z-sequence z-graphql">&</span> <span class="z-variable z-type z-graphql">ValuedEntity</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">value</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Int</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">employeeCount</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Int</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">Contact</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">entity</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">NamedEntity</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">phoneNumber</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">address</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>自分は専らRustのcodeからgraphqlのschemaを生成するのがメインのユースケースなのですが、graphql的な観点から綺麗なinterface定義できるか課題です。<br> 例えば<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">Contact</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>E<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span></span><span class="z-meta z-struct z-rust"> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">entity</span><span class="z-punctuation z-separator z-type z-rust">:</span> E,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">phoneNumber</span><span class="z-punctuation z-separator z-type z-rust">:</span> String,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">address</span><span class="z-punctuation z-separator z-type z-rust">:</span> String
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span></span><span class="z-meta z-impl z-rust"><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>E<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">Contact</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>E<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"></span><span class="z-meta z-impl z-rust"><span class="z-keyword z-other z-rust">where</span>  E<span class="z-punctuation z-separator z-rust">:</span> NamedEntity </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">xxx</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>のようにstruct定義にはtrait bound設けないで, implでtrait bound設定するのがよしとされているのでここからgraphqlの型を生成したときに上記のようにならないなという課題感です。(code firstが前提の話)<h3 id=unions><a aria-label="Anchor link for: unions" class=zola-anchor href=#unions>Unions</a></h3><blockquote><p>GraphQL Unions represent an object that could be one of a list of GraphQL Object types, but provides for no guaranteed fields between those types. They also differ from interfaces in that Object types declare what interfaces they implement, but are not aware of what unions contain them.</blockquote><p>responseのobjectがどれかになることを表す。unionのtype間で共通するfieldがあることは保証されない。またobjectはinterfaceを明示的にimplするがどのunionに含まれるかには関与しない。<blockquote><p>With interfaces and objects, only those fields defined on the type can be queried directly; to query other fields on an interface, typed fragments must be used. This is the same as for unions, but unions do not define any fields, so no fields may be queried on this type without the use of type refining fragments or inline fragments (with the exception of the meta-field __typename).</blockquote><p>Unionではfieldに関する保証がないのでqueryする際は型を明示する必要がある。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-interface z-graphql">union</span> <span class="z-entity z-name z-type z-union z-graphql">SearchResult</span> <span class="z-punctuation z-separator z-key-value z-graphql">=</span> <span class="z-variable z-type z-graphql">Photo</span> <span class="z-keyword z-operator z-graphql">|</span> <span class="z-variable z-type z-graphql">Person</span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">Person</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">age</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Int</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">Photo</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">height</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Int</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">width</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Int</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">SearchQuery</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">firstSearchResult</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">SearchResult</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">firstSearchResult</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    ... <span class="z-entity z-name z-field z-graphql">on</span> <span class="z-entity z-name z-field z-graphql">Person</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">name</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    ... <span class="z-entity z-name z-field z-graphql">on</span> <span class="z-entity z-name z-field z-graphql">Photo</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">height</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><h3 id=non-null><a aria-label="Anchor link for: non-null" class=zola-anchor href=#non-null>Non-Null</a></h3><blockquote><p>By default, all types in GraphQL are nullable; the null value is a valid response for all of the above types. To declare a type that disallows null, the GraphQL Non-Null type can be used. This type wraps an underlying type, and this type acts identically to that wrapped type, with the exception that null is not a valid response for the wrapping type. A trailing exclamation mark is used to denote a field that uses a Non-Null type like this: name: String!.</blockquote><p>原則として、GraphQLの型はnullable。nullを許容しない場合は、末尾に<code>!</code>をつける。<br> Listと組み合わせると下記の宣言が可能。<ul><li><code>[Int]</code><li><code>[Int]!</code><li><code>[Int!]</code><li><code>[Int!]!</code></ul><h3 id=directives-1><a aria-label="Anchor link for: directives-1" class=zola-anchor href=#directives-1>Directives</a></h3><blockquote><p>A GraphQL schema describes directives which are used to annotate various parts of a GraphQL document as an indicator that they should be evaluated differently by a validator, executor, or client tool such as a code generator.</blockquote><p>directiveとはなんなのかというと、仕様的にはvalidatorがexecutorかclient toolに異なる解釈を指示するindicatorという定義なんですね。<h4 id=built-in-directives><a aria-label="Anchor link for: built-in-directives" class=zola-anchor href=#built-in-directives>Built-in Directives</a></h4><ul><li><code>@skip</code><li><code>@include</code><li><code>@deprecated</code><li><code>@specifiedBy</code></ul><p>上記がbuilt-inのdirective。それ以外はcustom directives。<h5 id=skip><a aria-label="Anchor link for: skip" class=zola-anchor href=#skip><code>@skip</code></a></h5><pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-directive z-graphql">directive</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-entity z-name z-definition z-graphql">skip</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">if</span><span class="z-punctuation z-separator z-key-value">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Boolean</span></span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-keyword z-declaration z-directive z-graphql">on</span> <span class="z-constant z-language z-graphql">FIELD</span> <span class="z-keyword z-operator z-graphql">|</span> <span class="z-constant z-language z-graphql">FRAGMENT_SPREAD</span> <span class="z-keyword z-operator z-graphql">|</span> <span class="z-constant z-language z-graphql">INLINE_FRAGMENT</span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-query z-graphql">query</span> <span class="z-entity z-name z-query z-graphql">myQuery</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-punctuation z-definition z-variable z-graphql">$</span><span class="z-variable z-parameter z-graphql">someTest</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Boolean</span></span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">experimentalField</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql"><span class="z-support z-function z-graphql">skip</span></span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">if</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-punctuation z-definition z-variable z-graphql">$</span><span class="z-variable z-other z-graphql">someTest</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>引数の<code>if</code>で結果に当該filedを含めるか制御できる。<h5 id=include><a aria-label="Anchor link for: include" class=zola-anchor href=#include><code>@include</code></a></h5><pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-directive z-graphql">directive</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-entity z-name z-definition z-graphql">include</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">if</span><span class="z-punctuation z-separator z-key-value">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Boolean</span></span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-keyword z-declaration z-directive z-graphql">on</span> <span class="z-constant z-language z-graphql">FIELD</span> <span class="z-keyword z-operator z-graphql">|</span> <span class="z-constant z-language z-graphql">FRAGMENT_SPREAD</span> <span class="z-keyword z-operator z-graphql">|</span> <span class="z-constant z-language z-graphql">INLINE_FRAGMENT</span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-query z-graphql">query</span> <span class="z-entity z-name z-query z-graphql">myQuery</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-punctuation z-definition z-variable z-graphql">$</span><span class="z-variable z-parameter z-graphql">someTest</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Boolean</span></span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">experimentalField</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql"><span class="z-support z-function z-graphql">include</span></span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">if</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-punctuation z-definition z-variable z-graphql">$</span><span class="z-variable z-other z-graphql">someTest</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p><code>@skip</code>の逆の挙動。<code>@skip</code>と<code>@include</code>が両方指定された場合についても規定されているがそんなApiにはならないほうがいいと思う。<h5 id=deprecated><a aria-label="Anchor link for: deprecated" class=zola-anchor href=#deprecated><code>@deprecated</code></a></h5><pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-directive z-graphql">directive</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-entity z-name z-definition z-graphql">deprecated</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span>
</span><span class="z-source z-graphql">  <span class="z-variable z-parameter z-graphql">reason</span><span class="z-punctuation z-separator z-key-value">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span> <span class="z-punctuation z-separator z-key-value z-graphql">=</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>No longer supported<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span>
</span><span class="z-source z-graphql"><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-keyword z-declaration z-directive z-graphql">on</span> <span class="z-constant z-language z-graphql">FIELD_DEFINITION</span> <span class="z-keyword z-operator z-graphql">|</span> <span class="z-constant z-language z-graphql">ENUM_VALUE</span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">ExampleType</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">newField</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">oldField</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql"><span class="z-support z-function z-graphql">deprecated</span></span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">reason</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>Use `newField`.<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>schemaの変更が初めから考慮されていて現代的だなと思いました。<h5 id=specifiedby><a aria-label="Anchor link for: specifiedby" class=zola-anchor href=#specifiedby><code>@specifiedBy</code></a></h5><pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-directive z-graphql">directive</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-entity z-name z-definition z-graphql">specifiedBy</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">url</span><span class="z-punctuation z-separator z-key-value">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-keyword z-declaration z-directive z-graphql">on</span> <span class="z-constant z-language z-graphql">SCALAR</span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-scalar z-graphql">scalar</span> <span class="z-entity z-name z-type z-scalar z-graphql">UUID</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">specifiedBy</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">url</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>https://tools.ietf.org/html/rfc4122<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span></code></pre><p>custom scalarの仕様を明示するdirective。仕様上shouldでした。<h4 id=custom-directives><a aria-label="Anchor link for: custom-directives" class=zola-anchor href=#custom-directives>Custom Directives</a></h4><blockquote><p>When defining a custom directive, it is recommended to prefix the directive’s name to make its scope of usage clear and to prevent a collision with built-in directive which may be specified by future versions of this document (which will not include _ in their name).</blockquote><p>custom directivesを定義する際は、将来的なcollisionを防止する観点からprefixつけることが推奨されています。<p>directiveの書き方は以下のように定義されています。<pre class=z-code><code><span class="z-text z-plain">DirectiveDefinition : Description? directive @ Name ArgumentsDefinition? `repeatable`? on DirectiveLocations
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">DirectiveLocations :
</span><span class="z-text z-plain">  - DirectiveLocations | DirectiveLocation
</span><span class="z-text z-plain">  - `|`? DirectiveLocation
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">DirectiveLocation :
</span><span class="z-text z-plain">  - ExecutableDirectiveLocation
</span><span class="z-text z-plain">  - TypeSystemDirectiveLocation
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">ExecutableDirectiveLocation : one of
</span><span class="z-text z-plain">  - `QUERY`
</span><span class="z-text z-plain">  - `MUTATION`
</span><span class="z-text z-plain">  - `SUBSCRIPTION`
</span><span class="z-text z-plain">  - `FIELD`
</span><span class="z-text z-plain">  - `FRAGMENT_DEFINITION`
</span><span class="z-text z-plain">  - `FRAGMENT_SPREAD`
</span><span class="z-text z-plain">  - `INLINE_FRAGMENT`
</span><span class="z-text z-plain">  - `VARIABLE_DEFINITION`
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">TypeSystemDirectiveLocation : one of
</span><span class="z-text z-plain">  - `SCHEMA`
</span><span class="z-text z-plain">  - `SCALAR`
</span><span class="z-text z-plain">  - `OBJECT`
</span><span class="z-text z-plain">  - `FIELD_DEFINITION`
</span><span class="z-text z-plain">  - `ARGUMENT_DEFINITION`
</span><span class="z-text z-plain">  - `INTERFACE`
</span><span class="z-text z-plain">  - `UNION`
</span><span class="z-text z-plain">  - `ENUM`
</span><span class="z-text z-plain">  - `ENUM_VALUE`
</span><span class="z-text z-plain">  - `INPUT_OBJECT`
</span><span class="z-text z-plain">  - `INPUT_FIELD_DEFINITION`
</span></code></pre><p><code>directive @ my_directive on</code>QUERY`のようにonで適用スコープを明示する必要があるようです。<p>具体例。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-directive z-graphql">directive</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-entity z-name z-definition z-graphql">example</span> <span class="z-keyword z-declaration z-directive z-graphql">on</span> <span class="z-constant z-language z-graphql">FIELD_DEFINITION</span> <span class="z-keyword z-operator z-graphql">|</span> <span class="z-constant z-language z-graphql">ARGUMENT_DEFINITION</span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">SomeType</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">field</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">arg</span><span class="z-punctuation z-separator z-key-value">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Int</span></span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">example</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">example</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-directive z-graphql">directive</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-entity z-name z-definition z-graphql">delegateField</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">name</span><span class="z-punctuation z-separator z-key-value">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> repeatable on OBJECT | INTERFACE
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">Book</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">delegateField</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>pageCount<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">delegateField</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>author<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">id</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">ID</span></span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql">extend <span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">Book</span> <span class="z-punctuation z-definition z-annotation z-graphql">@</span><span class="z-variable z-function z-annotation z-graphql">delegateField</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>index<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span>
</span></code></pre><h2 id=4-introspection><a aria-label="Anchor link for: 4-introspection" class=zola-anchor href=#4-introspection>4 Introspection</a></h2><p>GraphQL serverのschemaはGraphQLを使って調べることができる。<br> Ecosystemを念頭にmeta情報の公開方法まで仕様で決めているのはうれしいですね。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">User</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">id</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">birthday</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">Date</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>このような型定義をもつGraphQL serverに対して<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">__type</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">name</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-string z-quoted z-double z-graphql"><span class="z-punctuation z-definition z-string z-begin z-graphql">"</span>User<span class="z-punctuation z-definition z-string z-end z-graphql">"</span></span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">name</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">fields</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">name</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">type</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">        <span class="z-entity z-name z-field z-graphql">name</span>
</span></span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>このrequestに対して以下のようなresponseが得られる<pre class="language-json z-code" data-lang=json><code class=language-json data-lang=json><span class="z-source z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>__type<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">    </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>User<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">    </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>fields<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">      <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>id<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>type<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>String<span class="z-punctuation z-definition z-string z-end z-json">"</span></span> <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">      <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>type<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>String<span class="z-punctuation z-definition z-string z-end z-json">"</span></span> <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">      <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>birthday<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>type<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Date<span class="z-punctuation z-definition z-string z-end z-json">"</span></span> <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">    <span class="z-punctuation z-section z-sequence z-end z-json">]</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">  <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></code></pre><p>introspection systemで利用するtypeやfieldは<code>__</code>から始まる。<br> introspection systemで利用できるschema自身もGraphQL schemaで以下のように定義されている。<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">__Schema</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">description</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">types</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-storage z-modifier z-list z-graphql">[</span><span class="z-variable z-type z-graphql">__Type</span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-storage z-modifier z-list z-graphql">]</span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">queryType</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">__Type</span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">mutationType</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">__Type</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">subscriptionType</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">__Type</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">directives</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-storage z-modifier z-list z-graphql">[</span><span class="z-variable z-type z-graphql">__Directive</span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-storage z-modifier z-list z-graphql">]</span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">__Type</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">kind</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">__TypeKind</span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">description</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-comment z-line z-graphql"><span class="z-punctuation z-definition z-comment z-graphql">#</span> must be non-null for OBJECT and INTERFACE, otherwise null.</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">fields</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">includeDeprecated</span><span class="z-punctuation z-separator z-key-value">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Boolean</span></span> <span class="z-punctuation z-separator z-key-value z-graphql">=</span> <span class="z-constant z-language z-boolean z-false z-graphql">false</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-storage z-modifier z-list z-graphql">[</span><span class="z-variable z-type z-graphql">__Field</span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-storage z-modifier z-list z-graphql">]</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-comment z-line z-graphql"><span class="z-punctuation z-definition z-comment z-graphql">#</span> must be non-null for OBJECT and INTERFACE, otherwise null.</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">interfaces</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-storage z-modifier z-list z-graphql">[</span><span class="z-variable z-type z-graphql">__Type</span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-storage z-modifier z-list z-graphql">]</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-comment z-line z-graphql"><span class="z-punctuation z-definition z-comment z-graphql">#</span> must be non-null for INTERFACE and UNION, otherwise null.</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">possibleTypes</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-storage z-modifier z-list z-graphql">[</span><span class="z-variable z-type z-graphql">__Type</span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-storage z-modifier z-list z-graphql">]</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-comment z-line z-graphql"><span class="z-punctuation z-definition z-comment z-graphql">#</span> must be non-null for ENUM, otherwise null.</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">enumValues</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">includeDeprecated</span><span class="z-punctuation z-separator z-key-value">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Boolean</span></span> <span class="z-punctuation z-separator z-key-value z-graphql">=</span> <span class="z-constant z-language z-boolean z-false z-graphql">false</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-storage z-modifier z-list z-graphql">[</span><span class="z-variable z-type z-graphql">__EnumValue</span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-storage z-modifier z-list z-graphql">]</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-comment z-line z-graphql"><span class="z-punctuation z-definition z-comment z-graphql">#</span> must be non-null for INPUT_OBJECT, otherwise null.</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">inputFields</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-storage z-modifier z-list z-graphql">[</span><span class="z-variable z-type z-graphql">__InputValue</span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-storage z-modifier z-list z-graphql">]</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-comment z-line z-graphql"><span class="z-punctuation z-definition z-comment z-graphql">#</span> must be non-null for NON_NULL and LIST, otherwise null.</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">ofType</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">__Type</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-comment z-line z-graphql"><span class="z-punctuation z-definition z-comment z-graphql">#</span> may be non-null for custom SCALAR, otherwise null.</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">specifiedByURL</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-enum z-graphql">enum</span> <span class="z-entity z-name z-type z-enum z-graphql">__TypeKind</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">SCALAR</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">OBJECT</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">INTERFACE</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">UNION</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">ENUM</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">INPUT_OBJECT</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">LIST</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">NON_NULL</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">__Field</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">description</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">args</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-storage z-modifier z-list z-graphql">[</span><span class="z-variable z-type z-graphql">__InputValue</span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-storage z-modifier z-list z-graphql">]</span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">type</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">__Type</span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">isDeprecated</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Boolean</span></span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">deprecationReason</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">__InputValue</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">description</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">type</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql">__Type</span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">defaultValue</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">__EnumValue</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">description</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">isDeprecated</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Boolean</span></span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">deprecationReason</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-graphql">type</span> <span class="z-entity z-name z-type z-object z-graphql">__Directive</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">name</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">description</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">String</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">locations</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-storage z-modifier z-list z-graphql">[</span><span class="z-variable z-type z-graphql">__DirectiveLocation</span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-storage z-modifier z-list z-graphql">]</span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">args</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-storage z-modifier z-list z-graphql">[</span><span class="z-variable z-type z-graphql">__InputValue</span><span class="z-storage z-modifier z-required z-graphql">!</span><span class="z-storage z-modifier z-list z-graphql">]</span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">isRepeatable</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-type z-graphql"><span class="z-support z-type z-graphql">Boolean</span></span><span class="z-storage z-modifier z-required z-graphql">!</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span><span class="z-source z-graphql">
</span><span class="z-source z-graphql"><span class="z-keyword z-declaration z-type z-enum z-graphql">enum</span> <span class="z-entity z-name z-type z-enum z-graphql">__DirectiveLocation</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">QUERY</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">MUTATION</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">SUBSCRIPTION</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">FIELD</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">FRAGMENT_DEFINITION</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">FRAGMENT_SPREAD</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">INLINE_FRAGMENT</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">VARIABLE_DEFINITION</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">SCHEMA</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">SCALAR</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">OBJECT</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">FIELD_DEFINITION</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">ARGUMENT_DEFINITION</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">INTERFACE</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">UNION</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">ENUM</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">ENUM_VALUE</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">INPUT_OBJECT</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-constant z-graphql">INPUT_FIELD_DEFINITION</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>試しにGithub GraphQL apiにdirectiveを問い合わせてみると<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">__schema</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">directives</span><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">name</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>以下のようなresponseが得られた。<pre class="language-json z-code" data-lang=json><code class=language-json data-lang=json><span class="z-source z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>data<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">    </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>__schema<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>directives<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">        <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>include<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">        <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>skip<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">        <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>deprecated<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">        <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>requiredCapabilities<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">      <span class="z-punctuation z-section z-sequence z-end z-json">]</span></span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">  <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></code></pre><h2 id=5-validation><a aria-label="Anchor link for: 5-validation" class=zola-anchor href=#5-validation>5 Validation</a></h2><blockquote><p>Typically validation is performed in the context of a request immediately before execution, however a GraphQL service may execute a request without explicitly validating it if that exact same request is known to have been validated before. For example: the request may be validated during development, provided it does not later change, or a service may validate a request once and memoize the result to avoid validating the same request again in the future. Any client-side or development-time tool should report validation errors and not allow the formulation or execution of requests known to be invalid at that given point in time.</blockquote><p>validationはrequestの実行前になされるが、事前にvalidであるとわかっている場合には省略することもある。<blockquote><p>As GraphQL type system schema evolves over time by adding new types and new fields, it is possible that a request which was previously valid could later become invalid. Any change that can cause a previously valid request to become invalid is considered a breaking change. GraphQL services and schema maintainers are encouraged to avoid breaking changes</blockquote><p>以前はvalidだったrequestがinvalidになるような変更はbreaking changeとみなされる。breaking changeはできるだけ避けることが望ましい。<br> このあとに続く以下の文章はいまいち理解できませんでした。<blockquote><p>however in order to be more resilient to these breaking changes, sophisticated GraphQL systems may still allow for the execution of requests which at some point were known to be free of any validation errors, and have not changed since.</blockquote><p>このあとはfragmentのmergeのruleだったり、argumentやvariableのvalidation ruleが記載されています。素直に使えばあまり意識しなくてよさそうと思われるので割愛。<h2 id=6-execution><a aria-label="Anchor link for: 6-execution" class=zola-anchor href=#6-execution>6 Execution</a></h2><p>GraphQLの実行方法について。<br> Requestは以下の情報から構成される。<ul><li>schema<li>document(operationとfragmentのdefinitionを含む)<li>operation name(optional)<li>operationで定義されているvariablesのvalues(optional)<li>an initial value corresponding to the root type being executed(これいまいち理解できず)</ul><h3 id=executing-requests><a aria-label="Anchor link for: executing-requests" class=zola-anchor href=#executing-requests>Executing Requests</a></h3><blockquote><p>To execute a request, the executor must have a parsed Document and a selected operation name to run if the document defines multiple operations, otherwise the document is expected to only contain a single operation. The result of the request is determined by the result of executing this operation according to the “Executing Operations” section below.</blockquote><p>まずdocumentをparseして実行するoperationを特定する。operationの実行結果がrequestの実行結果になる。<br> validationが必要なら実行前に行う。また、variablesが定義されている場合はここで必要なvariablesがrequestに含まれるかのvalidationが行われる。<h3 id=executing-operations><a aria-label="Anchor link for: executing-operations" class=zola-anchor href=#executing-operations>Executing Operations</a></h3><p>Schemaで述べたようにschemaのtop levelでquery root typeが指定されている。mutationとsubscriptionをサポートするならそれらも同様。<br> ExecuteOperationの実行結果はそれぞれの実行結果。<h4 id=query><a aria-label="Anchor link for: query" class=zola-anchor href=#query>Query</a></h4><blockquote><p>If the operation is a query, the result of the operation is the result of executing the operation’s top level selection set with the query root operation type.</blockquote><p>operationのtop level selection setに対応するquery rootの処理を実行する。<blockquote><p>allowing parallelization</blockquote><p>とあるのでselection setの実行を並列化してもよい。<h4 id=mutation><a aria-label="Anchor link for: mutation" class=zola-anchor href=#mutation>Mutation</a></h4><blockquote><p>If the operation is a mutation, the result of the operation is the result of executing the operation’s top level selection set on the mutation root object type. This selection set should be executed serially.</blockquote><p>Query同様にoperationのtop level selectionに対応するmutation rootの処理を実行する。ただし、mutationの場合はserialに実行することが仕様で規定されている。<blockquote><p>It is expected that the top level fields in a mutation operation perform side-effects on the underlying data system. Serial execution of the provided mutations ensures against race conditions during these side-effects.</blockquote><p>ここからunderlying data systemに対するside effectあるかどうかがqueryとmutationを分ける基準になると考えられる。(queryとmutationという名前から明らかではあるが)<h4 id=subscription><a aria-label="Anchor link for: subscription" class=zola-anchor href=#subscription>Subscription</a></h4><p>Queryとmutationはデータの取得と変更でわかりやすいのですが、subscriptionって具体的にはなんだってなりました。websocket等のconnectionはってserver側から変更を通知する処理の抽象化なんだろうなと思っていたので仕様でどう定義されているか気になります。<blockquote><p>If the operation is a subscription, the result is an event stream called the “Response Stream” where each event in the event stream is the result of executing the operation for each new event on an underlying “Source Stream”.</blockquote><p>とあるので、responseとしてはResponse Streamで、response streamはeventを返す理解でしょうか。そのeventはなにかというとunderlying Source Streamの新規eventに対するoperationの実行結果のことみたいです。<br> ようはSource Streamに対するeventのiterationということでしょうか。<br> 具体例として以下が挙げられています<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-keyword z-declaration z-subscription z-graphql">subscription</span> <span class="z-entity z-name z-subscription z-graphql">NewMessages</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">newMessage</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">roomId</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-constant z-numeric z-integer z-graphql">123</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">sender</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">text</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><pre class="language-json z-code" data-lang=json><code class=language-json data-lang=json><span class="z-source z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>data<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">    </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>newMessage<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>sender<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Hagrid<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>text<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>You're a wizard!<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">  <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></code></pre><h5 id=supporting-subscriptions-at-scale><a aria-label="Anchor link for: supporting-subscriptions-at-scale" class=zola-anchor href=#supporting-subscriptions-at-scale>Supporting Subscriptions at Scale</a></h5><blockquote><p>Supporting subscriptions is a significant change for any GraphQL service. Query and mutation operations are stateless, allowing scaling via cloning of GraphQL service instances. Subscriptions, by contrast, are stateful and require maintaining the GraphQL document, variables, and other context over the lifetime of the subscription.</blockquote><p>Subscriptionはquery,mutationと違って状態管理が必要になる。<blockquote><p>Consider the behavior of your system when state is lost due to the failure of a single machine in a service. Durability and availability may be improved by having separate dedicated services for managing subscription state and client connectivity.</blockquote><p>subscriptionの状態管理のためにseparate dedicated serviceを用意することが提案されている。<br> (実装したことないので実装してみたい..!)<h5 id=delivery-agnostic><a aria-label="Anchor link for: delivery-agnostic" class=zola-anchor href=#delivery-agnostic>Delivery Agnostic</a></h5><blockquote><p>GraphQL subscriptions do not require any specific serialization format or transport mechanism. Subscriptions specifies algorithms for the creation of a stream, the content of each payload on that stream, and the closing of that stream. There are intentionally no specifications for message acknowledgement, buffering, resend requests, or any other quality of service (QoS) details. Message serialization, transport mechanisms, and quality of service details should be chosen by the implementing service.</blockquote><p>subscriptionにおいてなにで実現するかは仕様で定めていない。<br> また、messagingにおけるackの方法等も実装に委ねられている。<br> Unsubscribeについても<blockquote><p>Cancel responseStream</blockquote><p>とだけ記載されている。<h3 id=executing-selection-sets><a aria-label="Anchor link for: executing-selection-sets" class=zola-anchor href=#executing-selection-sets>Executing Selection Sets</a></h3><p>Selection setの実行方法について詳細に定められている。<br> Fragmentとselectionでfieldが重複した場合やselection setのmerge等。<br> filedのresolve時にエラーがあった場合については<blockquote><p>If a field error is raised while resolving a field, it is handled as though the field returned null, and the error must be added to the "errors" list in the response.</blockquote><p>当該filedのresponseにはnullをいれてerrorを<code>errors</code>に追加することになっている。fieldが<code>Non-Null</code>の場合はその親をnullにする。親も<code>Non-Null</code>だった場合はresponseのdataがnullになる。<p>自分でGraphQLのresponse直接ハンドリングする際はfiled resolve時にエラーあってもdataにはnullとして表現され、errors field調べないといけないので注意が必要ですね。<h2 id=7-response><a aria-label="Anchor link for: 7-response" class=zola-anchor href=#7-response>7 Response</a></h2><p>GraphQL serverが返すresponseについて。<blockquote><p>A response may contain both a partial response as well as any field errors in the case that a field error was raised on a field and was replaced with null.</blockquote><p>成功か失敗でなく、一部成功のようなresponseがありえるのが特徴だなと思いました。<h3 id=response-format><a aria-label="Anchor link for: response-format" class=zola-anchor href=#response-format>Response format</a></h3><blockquote><p>A response to a GraphQL request must be a map.</blockquote><blockquote><p>If the request raised any errors, the response map must contain an entry with key errors. The value of this entry is described in the “Errors” section. If the request completed without raising any errors, this entry must not be present.</blockquote><blockquote><p>If the request included execution, the response map must contain an entry with key data. The value of this entry is described in the “Data” section. If the request failed before execution, due to a syntax error, missing information, or validation error, this entry must not be present.</blockquote><blockquote><p>The response map may also contain an entry with key extensions. This entry, if set, must have a map as its value. This entry is reserved for implementors to extend the protocol however they see fit, and hence there are no additional restrictions on its contents.</blockquote><blockquote><p>To ensure future changes to the protocol do not break existing services and clients, the top level response map must not contain any entries other than the three described above.</blockquote><ul><li>エラーの場合は<code>errors</code> fieldにいれる。<li>結果は<code>data</code> fieldにいれる<li>それ以外の拡張は<code>extensions</code>にいれる。<li>将来の変更のためにtop levelでは3つ以外のfieldを含んではならない。(must not)</ul><p>Responseがjsonであるとは限らないからentryというふうに抽象化されていて、entry = jsonのfieldと読み替えてます。<h4 id=data><a aria-label="Anchor link for: data" class=zola-anchor href=#data>Data</a></h4><p>request operationの実行結果は<code>data</code> fieldにいれる。<blockquote><p>If an error was raised before execution begins, the data entry should not be present in the result.</blockquote><p>executionの前にエラーが起きた場合は<code>data</code> fieldはresponseにいれない<blockquote><p>If an error was raised during the execution that prevented a valid response, the data entry in the response should be null.</blockquote><p>fieldのresolve時のエラーの場合は<code>data</code> fieldにnullをいれる。<h4 id=errors><a aria-label="Anchor link for: errors" class=zola-anchor href=#errors>Errors</a></h4><p>errorのformatについて。<blockquote><p>Every error must contain an entry with the key message with a string description of the error intended for the developer as a guide to understand and correct the error.</blockquote><blockquote><p>f an error can be associated to a particular point in the requested GraphQL document, it should contain an entry with the key locations with a list of locations, where each location is a map with the keys line and column, both positive numbers starting from 1 which describe the beginning of an associated syntax element.</blockquote><blockquote><p>If an error can be associated to a particular field in the GraphQL result, it must contain an entry with the key path that details the path of the response field which experienced the error. This allows clients to identify whether a null result is intentional or caused by a runtime error.</blockquote><ul><li><code>message</code>でdeveloperむけにdescriptionを含まなければならない(must)<li><code>locations</code>でgraphql documentのエラー箇所を明示すべき(should)<li><code>path</code>でerrorの原因となってfiledを明示しなければならない(must)</ul><p>具体例として<pre class="language-graphql z-code" data-lang=graphql><code class=language-graphql data-lang=graphql><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-entity z-name z-field z-graphql">hero</span><span class="z-punctuation z-section z-group z-begin z-graphql">(</span><span class="z-variable z-parameter z-graphql">episode</span><span class="z-punctuation z-separator z-type z-graphql">:</span> <span class="z-punctuation z-definition z-variable z-graphql">$</span><span class="z-variable z-other z-graphql">episode</span><span class="z-punctuation z-section z-group z-end z-graphql">)</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">name</span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-entity z-name z-field z-graphql">heroFriends</span><span class="z-punctuation z-separator z-key-value z-graphql">:</span> <span class="z-variable z-parameter z-graphql">friends</span> <span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-begin z-graphql">{</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">id</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">      <span class="z-entity z-name z-field z-graphql">name</span>
</span></span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">    <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-meta z-block z-graphql">  <span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></span><span class="z-source z-graphql"><span class="z-meta z-block z-graphql"><span class="z-punctuation z-section z-block z-end z-graphql">}</span></span>
</span></code></pre><p>のqueryでfriendsの一部のnameの取得に失敗した場合、以下のエラーが返る。<pre class="language-json z-code" data-lang=json><code class=language-json data-lang=json><span class="z-source z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>errors<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">    <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>message<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Name for character with ID 1002 could not be fetched.<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>locations<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>line<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">6</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>column<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">7</span> <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-section z-sequence z-end z-json">]</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>path<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>hero<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>heroFriends<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-constant z-numeric z-integer z-decimal z-json">1</span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-section z-sequence z-end z-json">]</span></span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">  <span class="z-punctuation z-section z-sequence z-end z-json">]</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>data<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">    </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>hero<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>R2-D2<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>heroFriends<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">        <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>id<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>1000<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Luke Skywalker<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">        <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>id<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>1002<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-language z-json">null</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">        <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>id<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>1003<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Leia Organa<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">      <span class="z-punctuation z-section z-sequence z-end z-json">]</span></span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">  <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></code></pre><p><code>name</code>が<code>Non-Null</code>だった場合、entry自体がnullになる。<pre class="language-json z-code" data-lang=json><code class=language-json data-lang=json><span class="z-source z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>errors<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">    <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>message<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Name for character with ID 1002 could not be fetched.<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>locations<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>line<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">6</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>column<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">7</span> <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-section z-sequence z-end z-json">]</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>path<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>hero<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>heroFriends<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-constant z-numeric z-integer z-decimal z-json">1</span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-section z-sequence z-end z-json">]</span></span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">  <span class="z-punctuation z-section z-sequence z-end z-json">]</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>data<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">    </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>hero<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>R2-D2<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>heroFriends<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">        <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>id<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>1000<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Luke Skywalker<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">        <span class="z-constant z-language z-json">null</span><span class="z-punctuation z-separator z-sequence z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">        <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>id<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>1003<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">          </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Leia Organa<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>
</span></span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">        <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">      <span class="z-punctuation z-section z-sequence z-end z-json">]</span></span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">  <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></code></pre><p>エラーコードを返したい場合は以下のように<code>extensions</code>を使う。<pre class="language-json z-code" data-lang=json><code class=language-json data-lang=json><span class="z-source z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>errors<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">    <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>message<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Name for character with ID 1002 could not be fetched.<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>locations<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>line<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">6</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>column<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">7</span> <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-section z-sequence z-end z-json">]</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>path<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>hero<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>heroFriends<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-constant z-numeric z-integer z-decimal z-json">1</span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-section z-sequence z-end z-json">]</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>extensions<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>code<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>CAN_NOT_FETCH_BY_ID<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">        </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>timestamp<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Fri Feb 9 14:33:09 UTC 2018<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>
</span></span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-mapping z-value z-json">      <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">  <span class="z-punctuation z-section z-sequence z-end z-json">]</span></span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></code></pre><p>以下のように<code>errors</code>のentryも独自拡張してはならない(should not)<pre class="language-json z-code" data-lang=json><code class=language-json data-lang=json><span class="z-source z-json"><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-json">  </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>errors<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">    <span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>message<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Name for character with ID 1002 could not be fetched.<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>locations<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-section z-mapping z-begin z-json">{</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>line<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">6</span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span> </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>column<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-constant z-numeric z-integer z-decimal z-json">7</span> <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span><span class="z-punctuation z-section z-sequence z-end z-json">]</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>path<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-punctuation z-section z-sequence z-begin z-json">[</span><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>hero<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>heroFriends<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-constant z-numeric z-integer z-decimal z-json">1</span><span class="z-punctuation z-separator z-sequence z-json">,</span> <span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>name<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-section z-sequence z-end z-json">]</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>code<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>CAN_NOT_FETCH_BY_ID<span class="z-punctuation z-definition z-string z-end z-json">"</span></span><span class="z-punctuation z-separator z-mapping z-pair z-json">,</span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">      </span><span class="z-meta z-mapping z-key z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>timestamp<span class="z-punctuation z-definition z-string z-end z-json">"</span></span></span><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-separator z-mapping z-key-value z-json">:</span> </span><span class="z-meta z-mapping z-value z-json"><span class="z-string z-quoted z-double z-json"><span class="z-punctuation z-definition z-string z-begin z-json">"</span>Fri Feb 9 14:33:09 UTC 2018<span class="z-punctuation z-definition z-string z-end z-json">"</span></span>
</span></span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json"><span class="z-meta z-mapping z-value z-json">    <span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-meta z-sequence z-json">  <span class="z-punctuation z-section z-sequence z-end z-json">]</span></span>
</span></span><span class="z-source z-json"><span class="z-meta z-mapping z-value z-json"><span class="z-punctuation z-section z-mapping z-end z-json">}</span></span>
</span></code></pre><h3 id=serialization-format><a aria-label="Anchor link for: serialization-format" class=zola-anchor href=#serialization-format>Serialization Format</a></h3><blockquote><p>GraphQL does not require a specific serialization format. However, clients should use a serialization format that supports the major primitives in the GraphQL response.</blockquote><p>基本はjsonだと思うが仕様的にはserialization formatについては規定していない。ただし、MapやList,Null等を表現できることは要求している。<blockquote><p>Since the result of evaluating a selection set is ordered, the serialized Map of results should preserve this order by writing the map entries in the same order as those fields were requested as defined by selection set execution.</blockquote><p>mapのorderについてはoperationのselection setと対応することが要求されている。<br> Protocol bufferのmapだとmapのorderは未定義なので地味に問題になりそうだなと思ったりしました。<h2 id=appendix><a aria-label="Anchor link for: appendix" class=zola-anchor href=#appendix>Appendix</a></h2><p>仕様で使われているNotation Conventionsの説明がのっています。<h2 id=matome><a aria-label="Anchor link for: matome" class=zola-anchor href=#matome>まとめ</a></h2><ul><li>GraphQLの全体像がわかった <ul><li>どこまでが仕様で定義されていて、これはlibrary側の話等。</ul><li>それぞれの機能がどんな意図で設計されたかが書いてあっておもしろかった<li>具体的にHttpレベルでどうリクエスト作るかについては規定されていないのが意外だった。<li>extendまわりのユースケースがわかっていない<li><a href=https://spec-md.com/>Spec Markdown</a>で書かれていたり、具体例豊富で読みやすかった</ul></div></article></main><footer class=blog-footer><p>© 2025 <a href=https://blog.ymgyt.io> ymgyt </a> | Made with <a href=https://www.getzola.org rel=noopener target=_blank>Zola</a> | <a href=https://github.com/ymgyt/blog>Repository</a> | <a href=https://blog.ymgyt.io/atom.xml target=_blank title=rss> <svg viewbox="0 0 24 24" class=icon fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx=5 cy=19 r=1></circle></svg> </a></footer></div></div>