<!doctype html><html lang=ja><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=https://blog.ymgyt.io/favicon.ico rel=icon sizes=any><link href=https://blog.ymgyt.io/icon.svg rel=icon type=image/svg+xml><link href=https://blog.ymgyt.io/apple-touch-icon.png rel=apple-touch-icon><link href=https://blog.ymgyt.io/manifest.webmanifest rel=manifest><link href=https://blog.ymgyt.io/style.css rel=stylesheet><link href=https://blog.ymgyt.io/atom.xml rel=alternate title=Atom type=application/atom+xml><script src="https://www.googletagmanager.com/gtag/js?id=G-GTB0KMLN90" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[];gtag(`js`,new Date());gtag(`config`,`G-GTB0KMLN90`)</script><title>🚛 BlogをZola + Github Pagesに移行した | Happy developing</title><meta content="Rust製 static site generator zolaとGithub Pagesでblogを公開するまで" name=description><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><body><div class=world><div class=content-container><header class=blog-header-container><div class=blog-logo><a href=https://blog.ymgyt.io>Happy developing</a></div><div class=blog-nav><nav><ul><li><a href=https://blog.ymgyt.io/entry/>Entries</a><li><a href=https://blog.ymgyt.io/tags/>Tags</a><li><a href=https://blog.ymgyt.io/about/>About</a><li><a href=https://github.com/ymgyt> <img alt=Github class=icon src=https://blog.ymgyt.io/images/icon/github.svg> </a><li><a href="https://twitter.com/YAmaguchixt "> <img alt=Twitter class=icon src=https://blog.ymgyt.io/images/icon/twitter.svg> </a></ul></nav></div></header><main class=blog-main><article><header class=entry-header><h1 class=entry-title>🚛 BlogをZola + Github Pagesに移行した</h1><div class=entry-meta><p class=entry-meta-item>🗓 2023-02-13<p class=entry-meta-item>🏷 <span class=tag><a href=https://blog.ymgyt.io/tags/etc/>etc</a></span></div></header><aside class=entry-toc><nav><ul class=entry-toc-toplevel-list><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#ji-neng-nogai-yao>機能の概要</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#yi-xing-nokitukatuke>移行のきっかっけ</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#zolanoshi-ifang>Zolaの使い方</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#zolanodirectorygou-zao>Zolaのdirectory構造</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#sectiontopage>Sectionとpage</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#templatenoshu-kifang>Templateの書き方</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#shortcodes>Shortcodes</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#tagguan-li>Tag管理</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#syntax-highlight>Syntax highlight</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#sass>Sass</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#theme>Theme</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#github-actions>Github actions</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#custom-domainnoshe-ding>Custom domainの設定</a> <ul><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#zola-config-tomlnoshe-ding>Zola config.tomlの設定</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#static-cname-filenozuo-cheng>static/CNAME fileの作成</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#github-pages-custom-domainnoshe-ding>Github pages custom domainの設定</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#route53-cname-recordnozuo-cheng>Route53 CNAME Recordの作成</a></ul><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#linknoque-ren>Linkの確認</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#draft>Draft</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#sonota-ecosystem>その他ecosystem</a> <ul><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#feeds-rss>Feeds(RSS)</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#sitemap>Sitemap</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#404>404</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#robots-txt>robots.txt</a></ul><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#zola-servenozhu-yi-dian>zola serveの注意点</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#owarini>おわりに</a><li><a href=https://blog.ymgyt.io/entry/migrated-blog-to-zola-and-github-pages/#yi-xing-tohaguan-xi-naihua>移行とは関係ない話</a></ul></nav></aside><div class=entry-content><p>Blogを<a href=https://hatenablog.com/>Hatena blog</a>から<a href=https://docs.github.com/en/pages>Github pages</a>に移行しました。<br> Markdownで記事を書いて、Rust製のstatic site generator <a href=https://github.com/getzola/zola>zola</a>でhtmlを生成する構成です。<br> 本記事では、移行にあたって調べた事や行った設定について書きます。<p>Zolaのversionは<a href=https://github.com/getzola/zola/releases/tag/v0.16.1><code>0.16.1</code></a>です。<h2 id=ji-neng-nogai-yao><a aria-label="Anchor link for: ji-neng-nogai-yao" class=zola-anchor href=#ji-neng-nogai-yao>機能の概要</a></h2><p>最初にzolaでできることの概要をまとめました。<ul><li>Markdownをtemplateでhtlmに変換する仕組み <ul><li>Markdown中から呼び出せるDSL(shortcodes)<li>Markdownをparseしてtemplate rendering時に参照できる変数として提供<li>Template engine(tera)の拡張</ul><li>Draftsによる公開の制御機能(build対象のfilterling)<li>Syntax highlight(codeblockからhtml+cssへの変換)<li>Taxonomiesによる記事のtagging<li>記事(page)および記事グループ(section)のmetadataの拡張(extra)<li>Sitemap生成<li>Feed生成<li>Localの確認環境<li>Redirect設定<li>Pathのslugify<li>外部Link,内部Linkの有効性確認<li>Sassサポート(ただし<code>LibSass 3.6.4</code>)<li>Github actions deploy用action<li>Theme</ul><p>また、本記事では言及できていないのですが、SearchやMultilingual対応機能もあります。<h2 id=yi-xing-nokitukatuke><a aria-label="Anchor link for: yi-xing-nokitukatuke" class=zola-anchor href=#yi-xing-nokitukatuke>移行のきっかっけ</a></h2><p>Hatena blogには特に不満はなかったです。<br> ただ、記事をgitで管理して、完成したらHatena blogのUIに貼り付けていました。これがpushだけで完結したら楽だなーと思っていました。<br> そんな時にzolaを知り、試してみたらsimpleで使いやすかったので移行してみることにしました。<h2 id=zolanoshi-ifang><a aria-label="Anchor link for: zolanoshi-ifang" class=zola-anchor href=#zolanoshi-ifang>Zolaの使い方</a></h2><p>Installについては<a href=https://www.getzola.org/documentation/getting-started/installation/>公式のInstallation</a>を参照してください。<br> 自分はsourceからbuildしました。<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">❯</span></span><span class="z-meta z-function-call z-arguments z-shell"> git clone https://github.com/getzola/zola.git</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">❯</span></span><span class="z-meta z-function-call z-arguments z-shell"> cd zola</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">❯</span></span><span class="z-meta z-function-call z-arguments z-shell"> cargo build<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>release</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>quiet</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">❯</span></span><span class="z-meta z-function-call z-arguments z-shell"> zola<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>version</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">zola</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0.16.1</span>
</span></code></pre><p>Zolaには以下のコマンドがあります。<ol><li>Project初期化用の<code>zola init</code><li>書いている記事を手元で確認するための<code>zola serve</code><li>Build及び記事のlinkが生きていることを確認する<code>zola check</code><li>最終的に公開するhtml等を生成する<code>zola build</code></ol><h2 id=zolanodirectorygou-zao><a aria-label="Anchor link for: zolanodirectorygou-zao" class=zola-anchor href=#zolanodirectorygou-zao>Zolaのdirectory構造</a></h2><p>まずは<code>zola init</code>から始めます。<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">❯</span></span><span class="z-meta z-function-call z-arguments z-shell"> mkdir zola-handson</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">❯</span></span><span class="z-meta z-function-call z-arguments z-shell"> cd zola-handson</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">❯</span></span><span class="z-meta z-function-call z-arguments z-shell"> zola init</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Welcome</span></span><span class="z-meta z-function-call z-arguments z-shell"> to Zola!</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Please</span></span><span class="z-meta z-function-call z-arguments z-shell"> answer a few questions to get started quickly.</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Any</span></span><span class="z-meta z-function-call z-arguments z-shell"> choices made can be changed by modifying the <span class="z-meta z-group z-expansion z-command z-backticks z-shell"><span class="z-punctuation z-section z-group z-begin z-shell">`</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">config.toml</span></span><span class="z-punctuation z-section z-group z-end z-shell">`</span></span> file later.</span>
</span><span class="z-source z-shell z-bash"><span class="z-keyword z-operator z-assignment z-redirection z-shell">></span> What <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">is</span></span><span class="z-meta z-function-call z-arguments z-shell"> the URL of your site<span class="z-keyword z-operator z-regexp z-quantifier z-shell">?</span> (https://example.com</span><span class="z-meta z-function-call z-shell"></span>)<span class="z-meta z-function-call z-shell"><span class="z-support z-function z-colon z-shell">:</span></span><span class="z-meta z-function-call z-arguments z-shell"> https://blog.ymgyt.io</span>
</span><span class="z-source z-shell z-bash"><span class="z-keyword z-operator z-assignment z-redirection z-shell">></span> Do <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">you</span></span><span class="z-meta z-function-call z-arguments z-shell"> want to enable Sass compilation<span class="z-keyword z-operator z-regexp z-quantifier z-shell">?</span> <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>Y/n<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span>: Y</span>
</span><span class="z-source z-shell z-bash"><span class="z-keyword z-operator z-assignment z-redirection z-shell">></span> Do <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">you</span></span><span class="z-meta z-function-call z-arguments z-shell"> want to enable syntax highlighting<span class="z-keyword z-operator z-regexp z-quantifier z-shell">?</span> <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>y/N<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span>: y</span>
</span><span class="z-source z-shell z-bash"><span class="z-keyword z-operator z-assignment z-redirection z-shell">></span> Do <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">you</span></span><span class="z-meta z-function-call z-arguments z-shell"> want to build a search index of the content<span class="z-keyword z-operator z-regexp z-quantifier z-shell">?</span> <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>y/N<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span>: N</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Done!</span></span><span class="z-meta z-function-call z-arguments z-shell"> Your site was created in /private/tmp/zola-handson</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Get</span></span><span class="z-meta z-function-call z-arguments z-shell"> started by moving into the directory and using the built-in server: <span class="z-meta z-group z-expansion z-command z-backticks z-shell"><span class="z-punctuation z-section z-group z-begin z-shell">`</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">zola</span></span><span class="z-meta z-function-call z-arguments z-shell"> serve</span><span class="z-punctuation z-section z-group z-end z-shell">`</span></span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Visit</span></span><span class="z-meta z-function-call z-arguments z-shell"> https://www.getzola.org for the full documentation.</span>
</span></code></pre><p><code>zola init</code>実行後にいくつか質問に答えるとdirectoryが作成されます。<br> なお、messageにある通り設定は後から変えられるので適当に答えても特に問題ありません。<p>directory構成を確認します。<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">❯</span></span><span class="z-meta z-function-call z-arguments z-shell"> exa<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>T</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>F</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">./</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">├──</span></span><span class="z-meta z-function-call z-arguments z-shell"> config.toml</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">├──</span></span><span class="z-meta z-function-call z-arguments z-shell"> content/</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">├──</span></span><span class="z-meta z-function-call z-arguments z-shell"> sass/</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">├──</span></span><span class="z-meta z-function-call z-arguments z-shell"> static/</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">├──</span></span><span class="z-meta z-function-call z-arguments z-shell"> templates/</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">└──</span></span><span class="z-meta z-function-call z-arguments z-shell"> themes/</span>
</span></code></pre><ul><li><code>config.toml</code>がzolaの設定fileです<li><code>content</code>がmarkdownを格納するdirectoryです<li><code>sass</code>は適用するcss(sass)を配置します<li><code>static</code>に公開される画像等のasset fileを置きます<li><code>templates</code>にmakrdown fileをhtmlに変換する方法を指示するtemplateを置きます<li><code>thems</code>適用するthemeの格納場所です</ul><p><code>zola</code>コマンドを実行するとcontent配下のmarkdown filesがtemplatesに従ってhtmlに変換され、sass配下のcssとstatic配下のasset fileと共に<code>public</code>(設定で変更可) directoryに出力されます。<h2 id=sectiontopage><a aria-label="Anchor link for: sectiontopage" class=zola-anchor href=#sectiontopage>Sectionとpage</a></h2><p>さっそくmarkdownを書いていきたいところですが、その前にzolaの<a href=https://www.getzola.org/documentation/content/section/>Section</a>と<a href=https://www.getzola.org/documentation/content/page/>Page</a>について説明させてください。<br> まず、Pageはcontentとして公開するmarkdownのことです。Pageには以下のようにmetadataを付与することでtemplateで処理する際に参照することができます。<pre class=z-code><code><span class="z-text z-plain">+++
</span><span class="z-text z-plain">title = "🚛 BlogをZola + Github Pagesに移行した"
</span><span class="z-text z-plain">slug = "migrated-blog-to-zola-and-github-pages"
</span><span class="z-text z-plain">date = "2023-02-13"
</span><span class="z-text z-plain">draft = true
</span><span class="z-text z-plain">description = "Rust製 static site generator zolaとGithub Pagesでblogを公開するまで"
</span><span class="z-text z-plain">[taxonomies]
</span><span class="z-text z-plain">tags = ["etc"]
</span><span class="z-text z-plain">+++
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">Blogを...
</span></code></pre><p>上記は本記事のmetadataです。<ul><li><code>title</code> 記事のtitle<li><code>slug</code> 記事のpathに利用される<li><code>date</code> 公開日、pageを日付でsortする場合に参照される<li><code>draft</code> draftの設定、後述します<li><code>description</code> description templateで必要なら参照できる<li><code>taxonomies</code> いわゆるtagでzolaが提供するpageの分類機能、こちらも後述</ul><p>その他<code>aliases</code>でredirect用のpathを設定できたりもします。詳しくは<a href=https://www.getzola.org/documentation/content/page/#front-matter>公式doc</a>を参照してください。<p>次にSectionを作成します。<code>content</code>配下にdirectoryを作成し、<code>_index.md</code> fileを配置するとそのdirectoryがzolaからSectionとして認識されます。<br> Sectionは作らなくても良いのですが、同じ分類のpageをSectionにまとめておくとtemplateでlistとして参照できて便利です。<br> 今回、blogの記事は<code>entry</code> Sectionとして作成することにしました。<br> まずは、<code>content/entry/_index.md</code>を作成します。<code>content</code>配下はそのまま公開時のpath名になるので、記事のURLは<code>https://blog.ymgyt.io/entry/{page_metadata.slug}</code>になります。<br> Page同様にSectionにも<code>_index.md</code>にmetadataを記述できます。<pre class=z-code><code><span class="z-text z-plain">+++
</span><span class="z-text z-plain">title = "Blog entries"
</span><span class="z-text z-plain">sort_by = "date"
</span><span class="z-text z-plain">template = "entry.html"
</span><span class="z-text z-plain">page_template = "entry/page.html"
</span><span class="z-text z-plain">insert_anchor_links = "heading"
</span><span class="z-text z-plain">+++
</span></code></pre><ul><li><code>title</code> templateから参照できます<li><code>sort_by</code> pageのsort方法、templateでsortされている前提で扱えます<li><code>template</code> Section pageのtemplateの指定<li><code>page_template</code> defaultで利用するpage共通のtemplateの指定<li><code>insert_anchor_links</code> markdownの見出し(<code>## Chapter2</code>)にanchor(<code>#</code>)用のlinkを作成するかの指定</ul><p>Page同様、詳しくは<a href=https://www.getzola.org/documentation/content/section/>公式doc</a>を参照してください。<p>Sectionで<code>/entry</code>や<code>/entry/hello-world</code>のようなpathでアクセスがあった際にrenderingに利用するtemplateが指定できたので、次はtemplateについて見ていきます。<h2 id=templatenoshu-kifang><a aria-label="Anchor link for: templatenoshu-kifang" class=zola-anchor href=#templatenoshu-kifang>Templateの書き方</a></h2><p>Zolaでは<a href=https://github.com/Keats/tera>Tera</a>というtemplate engineが利用されています。<br> Goのtemplate等、なにかしらのtemplate engineを利用したことがあればすぐに使えると思います。 使い方は<a href=https://tera.netlify.app/docs>公式のdoc</a>があるので参照してください。<br> 以下ではとりあえずこれだけ知ってれば書き始められるくらいのことを書きます。<ul><li><code>{{ expression }}</code> <code>{{</code>と<code>}}</code>で囲むとexpressionを書けます。 <ul><li><code>{{ config.base_url }}</code>のように変数にアクセスできます<li><code>{{ page.date | date(format="%m/%d") }}</code>のように <code>|</code>でbuilt-in関数にpipeできます</ul><li><code>{% %}</code>がstatementでif, loop, include, extend等の制御が書けます<li><code>{# #}</code>がcommentでhtmlに出力されないcommentが書けます</ul><p>上記を前提にしてまず、どのtemplateがどのpath用のhtmlを生成するためのものかはzolaの規約で決まっています。(ないしは指定できます)<br> その際、zolaがtop levelで参照できる変数を用意してくれるのでtemplateではそれを前提にします。<br> 例えば、<code>/entry/hello-world</code>用のhtmlを生成する為に際はzolaは<code>/entry/hello-world/index.md</code>(もしくは<code>/entry/hello-world.md</code>)を参照することを知っているので、当該pageのmetadataを保持した変数をtemplateに渡してくれます。<pre class="language-html z-code" data-lang=html><code class=language-html data-lang=html><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">h1</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{{ page.title }}<span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">h1</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{{ page.date }}<span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{{ page.content | safe }}<span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span></code></pre><p>の様なことが書けるわけです。<br> 以降はzolaというよりはteraの話になってしまいますが、templateに関して調べたことを書いていきます。<p>まず、templateの共通処理に関しては<code>include</code>と<code>extend</code>があります。<br> <code>include</code>は被include側のcontentがinclude側にそのまま展開されます。<br> <code>extend</code>は被extend側で定義したblockをextend側のcontentで置き換えることができます。<p>自分は各pageからextendするbase用のtemplateを一つ用意して使いました。child extend (parent extend root)のようにextendしていくこともできます。<pre class="language-html z-code" data-lang=html><code class=language-html data-lang=html><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-sgml z-doctype z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT!</span><span class="z-keyword z-declaration z-doctype z-html">DOCTYPE</span> <span class="z-constant z-language z-doctype z-html">html</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-structure z-any z-html">html</span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">lang</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>ja<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-structure z-any z-html">head</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  {% include "base/head.html" %}
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">  {# head.html側に定義するとextend側でoverrideできない #}
</span><span class="z-text z-html z-basic">  {% block title -%}
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-any z-html">title</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{{ config.title }}<span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-any z-html">title</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  {%- endblock title %}
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">  {% block description %}
</span><span class="z-text z-html z-basic">  {% endblock description %}
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-structure z-any z-html">head</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-structure z-any z-html">body</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">world</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">content-container</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">      {% include "base/header.html" %}
</span><span class="z-text z-html z-basic">      <span class="z-meta z-tag z-other z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span></span><span class="z-meta z-tag z-other z-html"><span class="z-entity z-name z-tag z-other z-html">main</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">blog-main</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">        {% block content %}
</span><span class="z-text z-html z-basic">        {% endblock content %}
</span><span class="z-text z-html z-basic">      <span class="z-meta z-tag z-other z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span></span><span class="z-meta z-tag z-other z-html"><span class="z-entity z-name z-tag z-other z-html">main</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">      {% include "base/footer.html" %}
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-structure z-any z-html">body</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-structure z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-structure z-any z-html">html</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span></code></pre><p><code>{% block xxx %}</code>から<code>{% endblock xxx %}</code>までがextend側にcontentを提供してもらう想定の場所です。<br> extendされなかった場合用にdefaultのcontentを書いておくこともできます。<br> 被include templateにblockが定義してあってもextendできなかったのがはまりポイントでした。<p>実際にentry pageで利用するtemplateから以下のようにしてextendしました。<pre class="language-html z-code" data-lang=html><code class=language-html data-lang=html><span class="z-text z-html z-basic">{% import "macro/title.html" as macro %}
</span><span class="z-text z-html z-basic">{% extends "base/base.html" %}
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">{% block title %}
</span><span class="z-text z-html z-basic">{{ macro::title(title=page.title) }}
</span><span class="z-text z-html z-basic">{% endblock title %}
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">{% block description %}
</span><span class="z-text z-html z-basic">{% if page.description %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-any z-html">meta</span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">name</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>description<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">content</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>{{ page.description }}<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">{% endif %}
</span><span class="z-text z-html z-basic">{% endblock description %}
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">{% block content %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">article</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">entry-content</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">    {{ page.content | safe }}
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">article</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">{% endblock content %}
</span></code></pre><p><code>{% import "macro/title.html" as macro %}</code>としているところはteraのmacroの処理です。<br> <code>&LThead></code>の<code>&LTtitle></code>を"記事のtitle | Blog name"のようにしたかったので以下のようなmacroを用意しました。<pre class="language-html z-code" data-lang=html><code class=language-html data-lang=html><span class="z-text z-html z-basic">{% macro title(title) %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-any z-html">title</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{{ title }} | {{ config.title }}<span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-any z-html">title</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">{% endmacro title %}
</span></code></pre><p>teraではfor,if,variableへのassignができるので、やろうと思えばなんでもできそうです。<p>例えば、記事のTableOfContent(TOC)を作る場合、専用の機能があるのではなくtemplateで作ることができます。<pre class="language-html z-code" data-lang=html><code class=language-html data-lang=html><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">aside</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">entry-toc</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">nav</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">ul</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">entry-toc-toplevel-list</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">      {% for h1 in page.toc %}
</span><span class="z-text z-html z-basic">      <span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-any z-html">li</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">        <span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">href</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>{{ h1.permalink | safe }}<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{{ h1.title }}<span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">        {% if h1.children %}
</span><span class="z-text z-html z-basic">        <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">ul</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">          {% for h2 in h1.children %}
</span><span class="z-text z-html z-basic">          <span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-any z-html">li</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">            <span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">href</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>{{ h2.permalink | safe }}<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{{ h2.title }}<span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">          <span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-any z-html">li</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">          {% endfor %}
</span><span class="z-text z-html z-basic">        <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">ul</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">        {% endif %}
</span><span class="z-text z-html z-basic">      <span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-any z-html">li</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">      {% endfor %}
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">ul</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">nav</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">aside</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span></code></pre><p><code>page</code>には<code>Array&LTHeader></code>型の<code>toc</code> fieldがあるのでそれをiterateしています。<br> どんな変数が参照できるかは<a href=https://www.getzola.org/documentation/templates/pages-sections/>公式doc</a>を参照してください。<p>記事の一覧を表示する<code>/entry</code>も以下の様にして作成しました。<pre class="language-html z-code" data-lang=html><code class=language-html data-lang=html><span class="z-text z-html z-basic">{% block content %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">h1</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>Entries<span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">h1</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">{% for year, pages in section.pages | group_by(attribute="year") %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">entry-group</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">entry-year</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{{ year }}<span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">ul</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">entry-list</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">    {% for page in pages %}
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-any z-html">li</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">entry-item</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">      <span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">href</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>{{ page.permalink | safe }}<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span><span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-any z-html">span</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">entry-item-title</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{{ page.title }}<span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-any z-html">span</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">        <span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-any z-html">span</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">entry-date</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{{ page.date | date(format="%m/%d") }}<span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-any z-html">span</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">      <span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-any z-html">li</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">    {% endfor %}
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">ul</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">{% endfor %}
</span><span class="z-text z-html z-basic">
</span><span class="z-text z-html z-basic">{% endblock content %}
</span></code></pre><h2 id=shortcodes><a aria-label="Anchor link for: shortcodes" class=zola-anchor href=#shortcodes>Shortcodes</a></h2><p>基本的にmarkdown fileが先頭のmetadataの記述を除いてはzolaに処理されることを意識しなくて良いようになっています。<br> ただし、markdown側から生成したいhtmlを指定したい場合もあるかと思います。その際にmarkdown側から呼び出せるDSLがshortcodesとして提供されています。<br> 自分はHatena blogから移行するにあたって、記事への画像の埋め込みにHatena blog側の機能を利用していたので、画像まわりの処理に利用しました。<p>具体的には、記事中に画像を貼りたいところで<p><code>{{</code> <code>figure(caption="Component diagram", images=["images/cqrs_component_diagram.png"] )</code> <code>}}</code><p>上記のような処理を書いて、<code>&LTfigure></code> tagを生成しました。<br> この<code>figure()</code>呼び出しを有効にするには<code>templates/shortcodes/figure.html</code>を作成します。<br> file名が関数(shortcodes)名になります。<br> templateの中では、引数(<code>caption</code>, <code>images</code>)が変数として参照できるので下記のように参照できます。<pre class="language-html z-code" data-lang=html><code class=language-html data-lang=html><span class="z-text z-html z-basic">{% if href %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">href</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>{{ href }}<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">{% endif %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">figure</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">{%</span> <span class="z-meta z-class-name z-html">if</span> <span class="z-meta z-class-name z-html">class</span> <span class="z-meta z-class-name z-html">%}</span> <span class="z-meta z-class-name z-html">{{</span> <span class="z-meta z-class-name z-html">class</span> <span class="z-meta z-class-name z-html">}}</span> <span class="z-meta z-class-name z-html">{%</span> <span class="z-meta z-class-name z-html">endif</span> <span class="z-meta z-class-name z-html">%}</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span> <span class="z-meta z-attribute-with-value z-class z-html"><span class="z-entity z-other z-attribute-name z-class z-html">class</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span></span><span class="z-string z-quoted z-double z-html"><span class="z-meta z-class-name z-html">fig-images-row</span><span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">    {% for src in images %}
</span><span class="z-text z-html z-basic">    <span class="z-meta z-tag z-inline z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-inline z-any z-html">img</span> 
</span></span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-inline z-any z-html">      <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">src</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>{{ src }}<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span> 
</span></span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-inline z-any z-html">      <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">{%</span> </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">if</span> </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">width</span>  </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">%}</span> </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">width</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>{{ width }},<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span>  <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">{%</span> </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">endif</span> </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">%}</span> 
</span></span></span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-inline z-any z-html"><span class="z-meta z-attribute-with-value z-html">      </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">{%</span> </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">if</span> </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">height</span> </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">%}</span> </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">height</span><span class="z-punctuation z-separator z-key-value z-html">=</span><span class="z-string z-quoted z-double z-html"><span class="z-punctuation z-definition z-string z-begin z-html">"</span>{{ height }}<span class="z-punctuation z-definition z-string z-end z-html">"</span></span></span> <span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">{%</span> </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">endif</span> </span><span class="z-meta z-attribute-with-value z-html"><span class="z-entity z-other z-attribute-name z-html">%}</span>
</span></span></span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-inline z-any z-html"><span class="z-meta z-attribute-with-value z-html">    </span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">    {% endfor %}
</span><span class="z-text z-html z-basic">  <span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">div</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">  {% if caption %}<span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html"><</span><span class="z-entity z-name z-tag z-block z-any z-html">figcaption</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{{ caption }}<span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">figcaption</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>{% endif %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-block z-any z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-block z-any z-html">figure</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">{% if href %}
</span><span class="z-text z-html z-basic"><span class="z-meta z-tag z-inline z-a z-html"><span class="z-punctuation z-definition z-tag z-begin z-html">&LT/</span><span class="z-entity z-name z-tag z-inline z-a z-html">a</span><span class="z-punctuation z-definition z-tag z-end z-html">></span></span>
</span><span class="z-text z-html z-basic">{% endif %}
</span></code></pre><p>(<code>img.alt</code>が設定できていないので改善したい)<h2 id=tagguan-li><a aria-label="Anchor link for: tagguan-li" class=zola-anchor href=#tagguan-li>Tag管理</a></h2><p>よくある記事にtagをつける機能は<a href=https://www.getzola.org/documentation/content/taxonomies/>Taxonomies</a>としてサポートされています。<br> 今回は<code>tags</code>というtaxonomyを定義して、記事ごとに<code>tags = ["rust", "etc"]</code>のようにtag付けしていきます。<p>まず、<code>config.toml</code>に以下のように定義します。<pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">taxonomies</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span>
</span><span class="z-source z-toml">  <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">name</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>tags<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">feed</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">true</span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">render</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">true</span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span></code></pre><p>これでzolaに<code>tags</code>というtaxonomyがあると宣言できます。<br> 記事にtagを振るには記事のmetadata(<code>/content/entry/hello-world/index.md</code>)に<code>tags</code>を定義します<pre class=z-code><code><span class="z-text z-plain">+++
</span><span class="z-text z-plain">title = "🚛 BlogをZola + Github Pagesに移行した"
</span><span class="z-text z-plain">// ...
</span><span class="z-text z-plain">[taxonomies]
</span><span class="z-text z-plain">tags = ["etc"]
</span><span class="z-text z-plain">+++
</span></code></pre><p><code>tags</code>というtaxonomiesが定義されると、zolaは<code>/tags</code>と<code>/tags/etc</code>のようなtag一覧とtagごとの記事一覧のpageを用意しようとします。<br> そして、<code>templates/tags/list.html</code>と<code>templates/tags/single.html</code>がそれぞれ対応するtemplateなのでこれを用意しておきます。<br> Taxonomies用のtemplateがない場合それぞれ<code>templates/{taxonomy_single.html,taxonomy_list.html}</code>が参照されます。<p><code>list.html</code>,<code>single.html</code>ではそれぞれtaxonomyの情報を変数で渡してくれるのでtemplateではそれを利用します。<h2 id=syntax-highlight><a aria-label="Anchor link for: syntax-highlight" class=zola-anchor href=#syntax-highlight>Syntax highlight</a></h2><p>Markdownからhtmlに変換する際にどうしても必要になるのはsyntax highlightではないでしょうか。<br> 手元でcodeblockを書いている分にはplugin等でsyntax highlightが効いた状態で見えるかと思いますが、html化するにあたっては、markupした上でcss用のclass付与等が必要になると思います。<br> Zolaでsyntax highlightを有効にするには<code>config.toml</code>で以下のように設定します。<pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">markdown</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">highlight_code</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">true</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">highlight_theme</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>monokai<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span></code></pre><p>指定できるthemeについては<a href=https://www.getzola.org/documentation/getting-started/configuration/#syntax-highlighting>公式doc</a>を参照してください。<p>markupとcssのclass付与だけ行い、cssは自分で管理したいというユースケースにも対応しています。<br> その場合、<code>highlight_theme = "css"</code>を指定します。(<code>css</code>は特別扱いされます)<p>さらに<pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">markdown</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">highlight_themes_css</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span>
</span><span class="z-source z-toml">  <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">theme</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>base16-ocean-dark<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">filename</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>syntax-theme-dark.css<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml">  <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">theme</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>base16-ocean-light<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">filename</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>syntax-theme-light.css<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span></code></pre><p>を指定すると適用されるcssを出力してくれます。<br> 自分は<code>highlight_theme = "css"</code>を指定して、<a href=https://github.com/crabique/Nord-plist/tree/0d655b23d6b300e691676d9b90a68d92b267f7ec>nord</a>のthemeを<code>color</code>を調整して利用しました。<h2 id=sass><a aria-label="Anchor link for: sass" class=zola-anchor href=#sass>Sass</a></h2><p>cssに関しては<a href=https://github.com/sass/libsass>LibSass</a>が利用されています。<br> <code>sass/style.scss</code>を書いておくと、<code>public/style.css</code>が出力されます。<br> <code>@use</code>は使えず、<code>@import</code>を利用しました。<h2 id=theme><a aria-label="Anchor link for: theme" class=zola-anchor href=#theme>Theme</a></h2><p>Themeの適用に関しては最初わかりづらかったです。<br> 結論からいうと自分はthemeは利用せずcssを書きました。<p>themeを利用するには、<code>themes</code> directory配下に利用したthemeのrepositoryをgit cloneやsubmodule等でfetchします。<br> その後、<code>config.toml</code>で<code>theme = "my_theme"</code>で指定します。<br> これで何が起きるか最初はわからなかったのですが、現状の理解は以下です。<p>Zolaのfile search pathに<code>themes</code>配下が含まれている。<br> そのため、sectionのtemplateを検索する際に、userが専用のtemplateを指定しないと<code>section.html</code>にfallbackされる。さらにそのfileが<code>templates</code>以下に定義されていないと<code>themes</code>配下が検索される。<br> 利用するtheme側のrepositoryに<code>templates/section.html</code>があるとそれが利用される。<br> 結果的にthemeが適用される。<p>なので、自分はthemeを適用する前に、page, entry section用のtemplateを既に作成して指定していたのでthemeを設定しても一向に反映されませんでした。<br> また、自分はtaxonomiesに<code>tags</code>を定義しましたが、theme側ではuserが<code>tags</code>を定義するかはわからないので、taxonomiesのfallback用の<code>taxonomy_list.html</code>を用意するまでしかできません。<h2 id=github-actions><a aria-label="Anchor link for: github-actions" class=zola-anchor href=#github-actions>Github actions</a></h2><p>Github Pages公開にはGithub actionsを利用しました。<br> <a href=https://www.getzola.org/documentation/deployment/github-pages/>公式のexample</a>をほぼそのまま利用しました。<pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> On every push this script is executed
</span></span><span class="z-source z-yaml"><span class="z-constant z-language z-boolean z-yaml">on</span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">push</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">branches</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">main</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">Build and deploy GH Pages</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">jobs</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">build</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">runs-on</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">ubuntu-latest</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">steps</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">checkout</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">uses</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">actions/checkout@v3.0.0</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">build_and_deploy</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">uses</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">shalzz/zola-deploy-action@v0.16.1-1</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">env</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">          <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Target branch
</span></span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">PAGES_BRANCH</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">gh-pages</span>
</span><span class="z-source z-yaml">          <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">TOKEN</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">${{ secrets.GITHUB_TOKEN }}</span>
</span></code></pre><p>main branchにpushすると<code>gh-pages</code> branchのtop levelに<code>public</code>以下が展開されます。<br> <code>gh-pages</code> branchをGithub pages側のbranchに設定します。<h2 id=custom-domainnoshe-ding><a aria-label="Anchor link for: custom-domainnoshe-ding" class=zola-anchor href=#custom-domainnoshe-ding>Custom domainの設定</a></h2><p>Hatena blogでは自分のdomain(<code>blog.ymgyt.io</code>)を利用していたのでGithub pagesでも<a href=https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site>custom domain</a>の機能を利用することにしました。<br> 実際にやってみたことろ以下の作業が必要でした。なお、DNS管理はAWS Route53を利用しています。<ol><li>zola <code>config.toml</code>の設定<li><code>static/CNAME</code> fileの作成<li>Github pages custom domainの設定<li>Route53 CNAME Recordの作成</ol><p>以下それぞれの作業を具体的に見ていきます。<br> 設定に利用したdomainは<code>blog.ymgyt.io</code>, github account名は<code>ymgyt</code>という前提です。<h3 id=zola-config-tomlnoshe-ding><a aria-label="Anchor link for: zola-config-tomlnoshe-ding" class=zola-anchor href=#zola-config-tomlnoshe-ding>Zola <code>config.toml</code>の設定</a></h3><p>zola設定fileの<code>config.toml</code>に利用するurlを設定します。<pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">base_url</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>https://blog.ymgyt.io<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span></code></pre><h3 id=static-cname-filenozuo-cheng><a aria-label="Anchor link for: static-cname-filenozuo-cheng" class=zola-anchor href=#static-cname-filenozuo-cheng><code>static/CNAME</code> fileの作成</a></h3><p>Github pagesではcustom domainを利用する場合、top levelのdirectoryに<code>CNAME</code>というfileがあることを期待しています。 意外とこの<code>CNAME</code>に何を書けばいいのか説明がなかったのですが、<a href=https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#cname-errors>Troubleshoot a custom domain</a>に説明がありました。<blockquote><ul><li>The CNAME file can contain only one domain. To point multiple domains to your site, you must set up a redirect through your DNS provider.<li>The CNAME file must contain the domain name only. For example, www.example.com, blog.example.com, or example.com.</ul></blockquote><p>ということで、domainを<code>CNAME</code>に記載します。<pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>blog.ymgy.io<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span> <span class="z-keyword z-operator z-assignment z-redirection z-shell">></span> static/CNAME</span>
</span></code></pre><p><code>static/</code>配下に置いておけばbuild時にtop levelで出力されるのでGithub pagesの期待通りになります。<h3 id=github-pages-custom-domainnoshe-ding><a aria-label="Anchor link for: github-pages-custom-domainnoshe-ding" class=zola-anchor href=#github-pages-custom-domainnoshe-ding>Github pages custom domainの設定</a></h3><p><code>CNAME</code> fileをpushした段階でGithub側でcustom domainの設定が有効になり、UI自体では特になにも設定しませんでした。<br> 一応documentにはRepository Settings > Pages > Custom domainにdomainを入力する必要があると書かれていました。<p>Enforce HTTPSは有効にしました。<h3 id=route53-cname-recordnozuo-cheng><a aria-label="Anchor link for: route53-cname-recordnozuo-cheng" class=zola-anchor href=#route53-cname-recordnozuo-cheng>Route53 CNAME Recordの作成</a></h3><p>Route53で以下のrecordを作成しました。(実際はhatena用のCNAME recordを更新しました)<ul><li>Record name: <code>blgo.ymgyt.io</code><li>Record type: <code>CNAME</code><li>Value: <code>ymgyt.github.io.</code></ul><pre class="language-sh z-code" data-lang=sh><code class=language-sh data-lang=sh><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">❯</span></span><span class="z-meta z-function-call z-arguments z-shell"> dig blog.ymgyt.io +nostats +nocomments +nocmd</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"></span><span class="z-keyword z-operator z-logical z-continue z-shell">;</span> <span class="z-keyword z-operator z-assignment z-redirection z-shell"><</span><span class="z-keyword z-operator z-assignment z-redirection z-shell"><</span><span class="z-keyword z-operator z-assignment z-redirection z-shell">>></span> DiG <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">9.10.6</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-keyword z-operator z-assignment z-redirection z-shell"><</span><span class="z-keyword z-operator z-assignment z-redirection z-shell"><</span><span class="z-keyword z-operator z-assignment z-redirection z-shell">>></span> blog.ymgyt.io +nostats +nocomments +nocmd</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"></span>;<span class="z-keyword z-operator z-logical z-continue z-shell">;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">global</span></span><span class="z-meta z-function-call z-arguments z-shell"> options: +cmd</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"></span><span class="z-keyword z-operator z-logical z-continue z-shell">;</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">blog.ymgyt.io.</span></span><span class="z-meta z-function-call z-arguments z-shell">                 IN      A</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">blog.ymgyt.io.</span></span><span class="z-meta z-function-call z-arguments z-shell">          300     IN      CNAME   ymgyt.github.io.</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ymgyt.github.io.</span></span><span class="z-meta z-function-call z-arguments z-shell">        3600    IN      A       185.199.110.153</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ymgyt.github.io.</span></span><span class="z-meta z-function-call z-arguments z-shell">        3600    IN      A       185.199.109.153</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ymgyt.github.io.</span></span><span class="z-meta z-function-call z-arguments z-shell">        3600    IN      A       185.199.108.153</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ymgyt.github.io.</span></span><span class="z-meta z-function-call z-arguments z-shell">        3600    IN      A       185.199.111.153</span>
</span></code></pre><p>これでcustom domainの設定は完了です。<h2 id=linknoque-ren><a aria-label="Anchor link for: linknoque-ren" class=zola-anchor href=#linknoque-ren>Linkの確認</a></h2><p><code>zola check</code>でbuild及びLink(<code>anchor tagのhref</code>)の確認ができます。<br> codeblockでsyntax highlighが効いていない場合もwarningを出してくれます。(watがなかった)<p>Linkの確認では<code>mod.rs#L10-L20</code>のようなfragmentが有効かどうかまでチェックしてくれます。<br> ただし、githubでの行間のhighlightを<code>#L10-L20</code>のようにしていると無効と判定されてしまいました。<br> このような場合は以下の様に<code>config.toml</code>でskipすることができます。<pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">link_checker</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">skip_prefixes</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span>
</span><span class="z-source z-toml">    <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>http://[2001:db8::]/<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span><span class="z-source z-toml">
</span><span class="z-source z-toml"><span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span> Skip anchor checking for external URLs that start with these prefixes</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">skip_anchor_prefixes</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span>
</span><span class="z-source z-toml">    <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>https://caniuse.com/<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span><span class="z-punctuation z-separator z-array z-toml">,</span>
</span><span class="z-source z-toml"><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span><span class="z-source z-toml"> 
</span></code></pre><p>数年前の記事ですとfragmentが無効になっているケースも多々あったのでfragment付ければいいものでもないなと思いました。<br> また、<code>zola check</code>をCIで回そうかとも考えたのですが、linkは外部の要因で壊れたりもするので、最初は見送りました。<h2 id=draft><a aria-label="Anchor link for: draft" class=zola-anchor href=#draft>Draft</a></h2><p>記事を作成中はまだ公開したくないという状態があるかと思います。<br> その際は、pageのmetadataで<code>draft = true</code>を指定するとdraft扱いとなります。<br> Draftのpageは<code>zola build</code>時に無視されるので、本番に公開されなくなります。<br> Localでdraftを確認するには、<code>zola serve --drafts</code>のように<code>--drafts</code> flagを付与します。(buildも同様)<h2 id=sonota-ecosystem><a aria-label="Anchor link for: sonota-ecosystem" class=zola-anchor href=#sonota-ecosystem>その他ecosystem</a></h2><h3 id=feeds-rss><a aria-label="Anchor link for: feeds-rss" class=zola-anchor href=#feeds-rss>Feeds(RSS)</a></h3><p><code>config.toml</code>にて<pre class="language-toml z-code" data-lang=toml><code class=language-toml data-lang=toml><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">generate_feed</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">true</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">feed_filename</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">"</span>atom.xml<span class="z-punctuation z-definition z-string z-end z-toml">"</span></span>
</span></code></pre><p>を指定すると生成してくれます。<h3 id=sitemap><a aria-label="Anchor link for: sitemap" class=zola-anchor href=#sitemap>Sitemap</a></h3><p>defaultで<code>public/sitemap.xml</code>を出力してくれます。<br> Google search consoleで指定したら問題なく認識されました。<h3 id=404><a aria-label="Anchor link for: 404" class=zola-anchor href=#404>404</a></h3><p><code>templates/404.html</code>を書いておくと404 pageを作成できます。<h3 id=robots-txt><a aria-label="Anchor link for: robots-txt" class=zola-anchor href=#robots-txt>robots.txt</a></h3><p>defaultで以下のfileが作成されます。templateで上書きもできます。<pre class="language-text z-code" data-lang=text><code class=language-text data-lang=text><span class="z-text z-plain">User-agent: *
</span><span class="z-text z-plain">Disallow:
</span><span class="z-text z-plain">Allow: /
</span><span class="z-text z-plain">Sitemap: https://blog.ymgyt.io/sitemap.xml
</span></code></pre><h2 id=zola-servenozhu-yi-dian><a aria-label="Anchor link for: zola-servenozhu-yi-dian" class=zola-anchor href=#zola-servenozhu-yi-dian><code>zola serve</code>の注意点</a></h2><p><code>zola serve</code>でちょっとはまった点があったので書いておきます。<br> serveで立ち上がるhttp serverは末尾の<code>/</code>がない場合にreedirectして<code>/</code>を付与するという挙動はしません。<p>https://github.com/getzola/zola/issues/1781<p>またこれに関連して、記事から画像等のassetへlinkを付与する際に以下の二つが候補になりました。<ol><li><code>static/</code>配下に置く<li><code>content/entry/hello-world/</code>等のpageと同一のdirectoryに置く(collocation)</ol><p>pageと同一のdirectoryに置いた際に、linkは相対pathで<code>images/aaa.png</code>のように書くこともできます。<br> そうすると末尾に<code>/</code>を付与せずにアクセスすると当該リソースはnot foundになります。<br> この問題は<code>get_url(path="/images/path/to/aaa.png")</code>のように何らかの方法で絶対pathにすることで回避できます。<br> また、Github pagesは末尾<code>/</code>へのredirectをしてくれる仕様のようでlocalでのみ問題となりました。<p>個人的には関連するfileは近くに置いておきたいので、page用にdirectoryをきってそこに関連fileを置く様にしています。<h2 id=owarini><a aria-label="Anchor link for: owarini" class=zola-anchor href=#owarini>おわりに</a></h2><p>ここまで駆け足でzolaの概要を見てきました。<br> 正直、全て<a href=https://www.getzola.org/documentation/getting-started/overview/>公式doc</a>に書いてある内容ですが、自分の整理もかねて記事にしました。<p>Zolaはとてもsimpleでありながらここ設定したいと思ったら大抵、設定させてくれるので使ってみたくなりました。 多少のshortcodesというDSLとmetadataを受け入れられればmarkdownをほぼそのままで利用できるので別システムへの移行も特に問題なくできそうな点も良いと思っています。<p>個人的にはまたひとつ開発toolのrust化が前進したので満足です。<h2 id=yi-xing-tohaguan-xi-naihua><a aria-label="Anchor link for: yi-xing-tohaguan-xi-naihua" class=zola-anchor href=#yi-xing-tohaguan-xi-naihua>移行とは関係ない話</a></h2><p>ここからは移行とは直接関係ない話です。<br> 今回の移行に際して、htmlとcssをtemplate/scssというlayerはあるにしても、ほぼ素でかけてとても楽しかったです。<br> Frontendの複雑化(typescript, js-runtime, react, build system, module system,...)にともなって、なかなかhtmlやcssを直接扱う機会がなかったのが正直なところでした。<p>なので、あれhtmlの<code>&LThead></code>になに書けばいいんだっけ?となりました。 そこで、<a href=https://www.amazon.co.jp/dp/4862465277>HTML解体新書-仕様から紐解く本格入門</a>とかを読んだりしました。<p>Faviconに関してはちょうど<a href=https://evilmartians.com/chronicles/how-to-favicon-in-2021-six-files-that-fit-most-needs>How to Favicon in 2023: Six files that fit most needs</a>をTLで教えてもらったので参考にしました。<p>CSSに関してはもっと大変で、とりあえず本屋にいっておもしろそうな本をいくつか買ってきました。<br> なかなか今の自分にちょうどいい本がなく、MDNに書いてあることだったり、大規模サイトを複数人でメンテできるようにいかに保守性高めるかの設計論だったりでちょうどいい本が見つかりませんでした。<p><a href=https://every-layout.dev/>Every Layout</a>はとてもおもしろく、CSSはbrowserへの詳細な指示ではなく、ガイドであるというような趣旨のことが書いてあったり、intrinsicなlayoutではmedia-queryは不要みたいな考えに触れ視座が上がったけれど手が動かなかったりしました。<p>結局、自分に一番合っていたのは<a href=https://css-for-js.dev/>CSS FOR JAVASCRIPT DEVELOPERS</a>でした。<p>$400(5万くらい)払いましたが、かなりよかったです。<br> おかげで、reset/normalize系のcssから自分で書けて、知らないcss propertyが適用されていないという状況を達成できました。(当たり前かもしれませんが)<p>いくつかとても参考になった記事も貼っておきます。<ul><li><a href=https://www.joshwcomeau.com/css/surprising-truth-about-pixels-and-accessibility/>The Surprising Truth About Pixels and Accessibility</a><li><a href=https://www.joshwcomeau.com/css/interactive-guide-to-flexbox/>An Interactive Guide to Flexbox</a> <ul><li><del>css flexboxの検索結果は汚染されていて、</del> これが最初にでればどれだけ助かったかと思います</ul><li><a href=https://www.joshwcomeau.com/css/color-formats/>Color Formats in CSS</a> <ul><li>colorはhsl派になりました。devtoolでshiftでcolor formatを変換できるのも知りませんでした。</ul></ul></div></article></main><footer class=blog-footer><p>© 2025 <a href=https://blog.ymgyt.io> ymgyt </a> | Made with <a href=https://www.getzola.org rel=noopener target=_blank>Zola</a> | <a href=https://github.com/ymgyt/blog>Repository</a> | <a href=https://blog.ymgyt.io/atom.xml target=_blank title=rss> <svg viewbox="0 0 24 24" class=icon fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx=5 cy=19 r=1></circle></svg> </a></footer></div></div>