<!doctype html><html lang=ja><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=https://blog.ymgyt.io/favicon.ico rel=icon sizes=any><link href=https://blog.ymgyt.io/icon.svg rel=icon type=image/svg+xml><link href=https://blog.ymgyt.io/apple-touch-icon.png rel=apple-touch-icon><link href=https://blog.ymgyt.io/manifest.webmanifest rel=manifest><link href=https://blog.ymgyt.io/style.css rel=stylesheet><link href=https://blog.ymgyt.io/atom.xml rel=alternate title=Atom type=application/atom+xml><script src="https://www.googletagmanager.com/gtag/js?id=G-GTB0KMLN90" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[];gtag(`js`,new Date());gtag(`config`,`G-GTB0KMLN90`)</script><title>🔭 OpenTelemetry Meetup 2023-10にいってきました | Happy developing</title><meta content="OpenTelemetry Meetupにいってきたので感想を書きます" name=description><meta content=summary name=twitter:card><meta content="@YAmaguchixt " name=twitter:site><meta content="🔭 OpenTelemetry Meetup 2023-10にいってきました" name=twitter:title><meta content="OpenTelemetry Meetupにいってきたので感想を書きます" name=twitter:description><meta content=https://blog.ymgyt.io/images/emoji/telescope.png name=twitter:image><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><body><div class=world><div class=content-container><header class=blog-header-container><div class=blog-logo><a href=https://blog.ymgyt.io>Happy developing</a></div><div class=blog-nav><nav><ul><li><a href=https://blog.ymgyt.io/entry/>Entries</a><li><a href=https://blog.ymgyt.io/tags/>Tags</a><li><a href=https://blog.ymgyt.io/about/>About</a><li><a href=https://github.com/ymgyt> <img alt=Github class=icon src=https://blog.ymgyt.io/images/icon/github.svg> </a><li><a href="https://twitter.com/YAmaguchixt "> <img alt=Twitter class=icon src=https://blog.ymgyt.io/images/icon/twitter.svg> </a></ul></nav></div></header><main class=blog-main><article><header class=entry-header><h1 class=entry-title>🔭 OpenTelemetry Meetup 2023-10にいってきました</h1><div class=entry-meta><p class=entry-meta-item>🗓 2023-10-19<p class=entry-meta-item>🏷 <span class=tag><a href=https://blog.ymgyt.io/tags/event/>event</a></span> <span class=tag><a href=https://blog.ymgyt.io/tags/opentelemetry/>opentelemetry</a></span></div></header><aside class=entry-toc><nav><ul class=entry-toc-toplevel-list><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#opuningu>オープニング</a><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#opentelemetrynokoko4nian-ruo-noliu-re>OpenTelemetryのここ4年弱の流れ</a><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#oteldao-ru-shi-li-1-ziyoinsitatimunomaikurosabisutatiwozai-ji-zhuang-sitahua>OTel導入事例1: ジョインしたチームのマイクロサービスたちを再計装した話</a><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#henriniokeruke-guan-ce-xing-huo-de-henoqu-rizu-mi>ヘンリーにおける可観測性獲得への取り組み</a><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#q-a>Q&A</a> <ul><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#collectornomerituto>Collectorのメリット</a><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#observabilitynofei-yong-dui-xiao-guo>Observabilityの費用対効果</a><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#sidecar-collectornocpu>Sidecar collectorのCPU</a><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#jie-ju-toresutoroguhahe-gawei-unodesuka>結局、トレースとログは何が違うのですか？</a><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#realtime-user-monitoringnituite>Realtime User Monitoringについて</a><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#kosutonoyi-efang>コストの抑え方</a><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#metricsnoexamplarnoshi-ifang>Metricsのexamplarの使い方</a></ul><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#matome>まとめ</a><li><a href=https://blog.ymgyt.io/entry/opentelemetry-meetup-2023-10/#can-kao>参考</a></ul></nav></aside><div class=entry-content><p>2023年10月19日に行なわれた<a href=https://opentelemetry.connpass.com/event/296353/>OpenTelemetry Meetup 2023-10</a>にいってみました。<br> 楽しかったので感想を書きます。<p>なお、本eventは<ul><li>会場/配信: <a href=https://cartaholdings.co.jp/en/>CARTA HOLDINGS社</a><li>飲み物: <a href=https://www.splunk.com/>Splunk社</a></ul><p>の協賛で行なわれたそうです。ありがとうございます🙏<p><a href="https://twitter.com/ShuzoN__/status/1714945903575093307?s=20">会場の様子</a><p>リアルのeventはとても久しぶりでconnpass上ですと前回参加したのは2019年の<a href=https://blog.ymgyt.io/entry/kubernetes-meetup-tokyo-23/>Kubernetes Meetup Tokyo #23</a>でした。<h2 id=opuningu><a aria-label="Anchor link for: opuningu" class=zola-anchor href=#opuningu>オープニング</a></h2><p><a href="https://docs.google.com/presentation/d/1Qm8R5AA5Bvqj15Aq7qKTOX3zXWJxv_4ojMdExxAhSkA/edit?pli=1#slide=id.p">スライド</a><p>本eventが開催されたのは"機運がたかまってきた"からということでした。<br> 自分がOpenTelemetryに興味をもったのは、<a href=https://github.com/tokio-rs/tracing-opentelemetry>tokio-rs/tracing-opentelemetry crate</a>をみかけたのがきっかけでした。<figure><div class=fig-images-row><img , alt src=images/ss-question-1.png></div><figcaption>あなたはOpenTelemetryを...</figcaption></figure><p>最初にアイスブレイクでOpenTelemetryの使用に関する質問がありました。<br> Eventに参加されるだけあって、利用されている方々が多かったです。<br> <del>自分は気が大きくなってopentelemetry-rustのgood first issueをやったし、コントリビューターでしょと回答してしまいました</del><h2 id=opentelemetrynokoko4nian-ruo-noliu-re><a aria-label="Anchor link for: opentelemetrynokoko4nian-ruo-noliu-re" class=zola-anchor href=#opentelemetrynokoko4nian-ruo-noliu-re>OpenTelemetryのここ4年弱の流れ</a></h2><p><a href=https://speakerdeck.com/ymotongpoo/opentelemetry-in-last-4-plus-years>スライド</a><p>スピーカー: 山口能迪さん（@ymotongpoo）<p>2022年に発表された<a href=https://cloudnativedays.jp/o11y2022/talks/1347>OpenTelemetryのこれまでとこれから</a> を今回のevent用に更新/まとめていただいた内容でした。<p>自分がOpenTelemetryについて知ったのは2022年だったので、歴史的経緯の説明は非常にありがたいです。<br> OTLPについても自分はprotobuf定義してあって、言語に依らずに data構造定義されていて便利だなくらいにしか思っていなかったのですが、それができた問題意識等の説明がありました。<p>2023年10月の各言語の実装状況では、Javaがtrace,metrics,logでstableとなっており、実装が先行しているそうです。<br> C/C++も3 signalでstableとなっており、さすが強いと思いました。 Rustについてはopentelemetry-rustをみている限り、現在絶賛実装中という感じです。<p>また、エコシステム(Splunk, Elastic, Honeycomb, Dynatrace, Sentry,...)でもOTLPのサポートが増えてきているそうです。<br> うれしいですね。<p>これは完全に知らなかったのですが、<a href=https://github.com/open-telemetry/oteps/pull/237>Profilingを標準化する試み</a>もあるそうです。<br> OpenTelemetryでprofilingも扱うことができるようになるのは夢があると思いました。<br> また、<a href=https://github.com/open-telemetry/oteps>Opentelemetry Enhancement Proposal(OTEP)</a>というrepositoryを知れました。これからPRをwatchしていこうと思います。<h2 id=oteldao-ru-shi-li-1-ziyoinsitatimunomaikurosabisutatiwozai-ji-zhuang-sitahua><a aria-label="Anchor link for: oteldao-ru-shi-li-1-ziyoinsitatimunomaikurosabisutatiwozai-ji-zhuang-sitahua" class=zola-anchor href=#oteldao-ru-shi-li-1-ziyoinsitatimunomaikurosabisutatiwozai-ji-zhuang-sitahua>OTel導入事例1: ジョインしたチームのマイクロサービスたちを再計装した話</a></h2><p><a href=https://speakerdeck.com/k6s4i53rx/getting-started-tracing-instrument-micro-service-with-opentelemetry>スライド</a><p>スピーカー: 逆井（さかさい）啓佑さん<p>参画されたプロダクトにOpenTelemetryのtraceを計装された点についてのお話でした。<br> 再計装というのは一部、前任者の方が導入された点を引き継いだという文脈でした。<p>現状、自分はcontrib版のopentelemetry-collectorを利用しているのですが、productionでは必要なcomponentのみを備えたものをbuildするほうがよいというアドバイスがありました。<br> 実際に利用しそうなreceiverやprocessorのあたりがついてきたので、自前のcollector作成にも取り組んでみようと思いました。 Rustならこの点はfeatureで制御できそうで、rustでcollectorが実装される日を夢見ています。<p>実際にチームに展開する際の取り組みやlocalの切り分け等、とても参考になるお話でした。<br> また、Span Metrics Connectorは知らなかったので、調べてみたいと思いました。<h2 id=henriniokeruke-guan-ce-xing-huo-de-henoqu-rizu-mi><a aria-label="Anchor link for: henriniokeruke-guan-ce-xing-huo-de-henoqu-rizu-mi" class=zola-anchor href=#henriniokeruke-guan-ce-xing-huo-de-henoqu-rizu-mi>ヘンリーにおける可観測性獲得への取り組み</a></h2><p><a href=https://speakerdeck.com/nabeo/henriniokeruke-guan-ce-xing-huo-de-henoqu-rizu-mi>スライド</a><p>スピーカー: 株式会社ヘンリー Nabeoさん<p>複雑なdomainを背景にOpenTelemetryを導入する際の検討について共有いただいた話。<br> こういう案試したけど、こうでしたという話はひたすら参考になるので非常にありがたいです。<br> opentelemetry-collectorをsidecarとして利用する方法にもメリット/デメリットあるので、うまいことトレードオフするのが自分の課題だったので、とても参考になりました。<br> 現状はsidecarでcollectorを動かしていますが、リソースの有効利用の観点からdeploymentかdaemonsetもありかなと現状では考えています。<br> ただ、daemonsetでcollector動かすと、特定のtelemetryのrewrite系の処理がメンテしづらくなりそうだなと懸念していたりします。<h2 id=q-a><a aria-label="Anchor link for: q-a" class=zola-anchor href=#q-a>Q&A</a></h2><p>発表後にslidoでのQ&Aがありました。<br> 質問は30以上はあったかと思います。<p>slidoの質問のURLの取得方法がわからなかったので、自分がメモした範囲でSSを掲載します。<h3 id=collectornomerituto><a aria-label="Anchor link for: collectornomerituto" class=zola-anchor href=#collectornomerituto>Collectorのメリット</a></h3><figure><div class=fig-images-row><img , alt src=images/ss-slido-1.png></div></figure><p>Collectorを導入するメリットはいろいろあると思います。<br> 識者の方々の回答としてはprocessorを利用できる点があげられていました。<br> 逆にいうとcollectorというcomponentを一つ増やす以上はcollectorの機能を使い倒さないと管理コストだけ増えることになるので、collectorの理解度をあげないとなと思いました。<h3 id=observabilitynofei-yong-dui-xiao-guo><a aria-label="Anchor link for: observabilitynofei-yong-dui-xiao-guo" class=zola-anchor href=#observabilitynofei-yong-dui-xiao-guo>Observabilityの費用対効果</a></h3><figure><div class=fig-images-row><img , alt src=images/ss-slido-2.png></div></figure><p>個人的にはやらないという選択肢はないと思っていたのですが、こういった問題意識は忘れずに、運用での問題調査や改善でopentelemetry導入して正解でしたね、にしないといけないと思っています。 <del>いうのは簡単だが、果たして</del><h3 id=sidecar-collectornocpu><a aria-label="Anchor link for: sidecar-collectornocpu" class=zola-anchor href=#sidecar-collectornocpu>Sidecar collectorのCPU</a></h3><figure><div class=fig-images-row><img , alt src=images/ss-slido-3.png></div></figure><p>Cloud Runは利用したことがないのですが、collectorへのリソース割当は自分も悩ましく思っています。<br> これは実際に計測するしかないので、collectorを計測できるようにするのが次の課題だと思っています。<h3 id=jie-ju-toresutoroguhahe-gawei-unodesuka><a aria-label="Anchor link for: jie-ju-toresutoroguhahe-gawei-unodesuka" class=zola-anchor href=#jie-ju-toresutoroguhahe-gawei-unodesuka>結局、トレースとログは何が違うのですか？</a></h3><figure><div class=fig-images-row><img , alt src=images/ss-slido-4.png></div></figure><p>回答: "同じです"<br> 補足: samplingされていて、water fallになっていて、latencyに関する情報をもっているのがtrace。<br> 任意の情報をもっているのがlog。<p>なにごとも言い切れるのはすごいと思ってしまう。<h3 id=realtime-user-monitoringnituite><a aria-label="Anchor link for: realtime-user-monitoringnituite" class=zola-anchor href=#realtime-user-monitoringnituite>Realtime User Monitoringについて</a></h3><figure><div class=fig-images-row><img , alt src=images/ss-slido-5.png></div></figure><p>実装が公開されているのでそれをまずは見てみましょうということでした。<p>Frontの話ですがここも追っていかなければ..<h3 id=kosutonoyi-efang><a aria-label="Anchor link for: kosutonoyi-efang" class=zola-anchor href=#kosutonoyi-efang>コストの抑え方</a></h3><figure><div class=fig-images-row><img , alt src=images/ss-slido-6.png></div></figure><p>Samplingの話でした。<br> Traceの全件取得は実際問題現実的でないので、samplingは必須という認識でした。<br> 自分はhead samplingしてapplicationへのperformanceへの影響も抑えたいと考えていたのですが、errorの補足の観点からはtail samplingしたくなるので、ここも課題です。<del>課題しかない</del><h3 id=metricsnoexamplarnoshi-ifang><a aria-label="Anchor link for: metricsnoexamplarnoshi-ifang" class=zola-anchor href=#metricsnoexamplarnoshi-ifang>Metricsのexamplarの使い方</a></h3><figure><div class=fig-images-row><img , alt src=images/ss-slido-7.png></div></figure><p>これは自分が質問しました。<br> 答えとしては、metricsとtraceを紐付ける機能ということでした。<br> 例えばCPU使用率のmetricsが高くなった場合に相関するtraceを紐付けるといったことが可能となるようです。<br> これができてはじめて、traceとmetricsを統一して扱うメリットが得られると思うので、調べて実装していきたいです。<br> 時間の関係で回答は得られませんでしたが、semantic conventionsにおけるschema_urlの利用例も気になるところでした。<h2 id=matome><a aria-label="Anchor link for: matome" class=zola-anchor href=#matome>まとめ</a></h2><p>楽しかったので次回も参加してみたいです。<br> Rustが一度も言及されなかったので、Rust + OpenTelemetryをがんばっていきたいと思いました。<h2 id=can-kao><a aria-label="Anchor link for: can-kao" class=zola-anchor href=#can-kao>参考</a></h2><ul><li><a href=https://ymotongpoo.hatenablog.com/entry/2022/12/02/145308>Tail Smapling Processorを使ってAPMの使用量を効率化しよう</a></ul></div></article></main><footer class=blog-footer><p>© 2025 <a href=https://blog.ymgyt.io> ymgyt </a> | Made with <a href=https://www.getzola.org rel=noopener target=_blank>Zola</a> | <a href=https://github.com/ymgyt/blog>Repository</a> | <a href=https://blog.ymgyt.io/atom.xml target=_blank title=rss> <svg viewbox="0 0 24 24" class=icon fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx=5 cy=19 r=1></circle></svg> </a></footer></div></div>