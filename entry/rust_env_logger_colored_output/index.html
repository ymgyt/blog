<!doctype html><html lang=ja><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=https://blog.ymgyt.io/favicon.ico rel=icon sizes=any><link href=https://blog.ymgyt.io/icon.svg rel=icon type=image/svg+xml><link href=https://blog.ymgyt.io/apple-touch-icon.png rel=apple-touch-icon><link href=https://blog.ymgyt.io/manifest.webmanifest rel=manifest><link href=https://blog.ymgyt.io/style.css rel=stylesheet><link href=https://blog.ymgyt.io/atom.xml rel=alternate title=Atom type=application/atom+xml><script src="https://www.googletagmanager.com/gtag/js?id=G-GTB0KMLN90" async></script><script>window.dataLayer = window.dataLayer || [];
	function gtag() {dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-GTB0KMLN90');</script><title>ğŸ¨ Rustã®env_loggerã«è‰²ã‚’ã¤ã‘ã‚‹ | Happy developing</title><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><body><div class=world><div class=content-container><header class=blog-header-container><div class=blog-logo><a href=https://blog.ymgyt.io>Happy developing</a></div><div class=blog-nav><nav><ul><li><a href=https://blog.ymgyt.io/entry/>Entries</a><li><a href=https://blog.ymgyt.io/tags/>Tags</a><li><a href=https://blog.ymgyt.io/about/>About</a><li><a href=https://github.com/ymgyt> <img alt=Github class=icon src=https://blog.ymgyt.io/images/icon/github.svg> </a><li><a href="https://twitter.com/YAmaguchixt "> <img alt=Twitter class=icon src=https://blog.ymgyt.io/images/icon/twitter.svg> </a></ul></nav></div></header><main class=blog-main><article><header class=entry-header><h1 class=entry-title>ğŸ¨ Rustã®env_loggerã«è‰²ã‚’ã¤ã‘ã‚‹</h1><div class=entry-meta><p class=entry-meta-item>ğŸ—“ 2019-08-09<p class=entry-meta-item>ğŸ· <span class=tag><a href=https://blog.ymgyt.io/tags/rust/>rust</a></span></div></header><aside class=entry-toc><nav><ul class=entry-toc-toplevel-list></ul></nav></aside><div class=entry-content><p>env_loggerã®å‡ºåŠ›ã«è‰²ã‚’ã¤ã‘ãŸã‹ã£ãŸã®ã§ã™ãŒã€exampleãŒè¦‹ã¤ã‹ã‚‰ãšã€docã‚’èª­ã‚“ã çµæœä»¥ä¸‹ã®ã‚ˆã†ãªå‡¦ç†ã«ãªã‚Šã¾ã—ãŸã€‚<pre class=giallo style=color:#d8dee9;background-color:#2e3440><code data-lang=toml><span class=giallo-l><span style=color:#eceff4>[</span><span>dependencies</span><span style=color:#eceff4>]</span></span>
<span class=giallo-l><span>log</span><span style=color:#eceff4> = "</span><span style=color:#a3be8c>0.4.8</span><span style=color:#eceff4>"</span></span>
<span class=giallo-l><span>env_logger</span><span style=color:#eceff4> = "</span><span style=color:#a3be8c>0.6.2</span><span style=color:#eceff4>"</span></span></code></pre><pre class=giallo style=color:#d8dee9;background-color:#2e3440><code data-lang=rust><span class=giallo-l><span style=color:#81a1c1>use</span><span> env_logger</span><span style=color:#81a1c1>::</span><span style=color:#eceff4>{</span><span>fmt</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Color</span><span style=color:#eceff4>,</span><span style=color:#8fbcbb> Builder</span><span style=color:#eceff4>};</span></span>
<span class=giallo-l><span style=color:#81a1c1>use</span><span> log</span><span style=color:#81a1c1>::</span><span style=color:#eceff4>{</span><span style=color:#8fbcbb>Level</span><span style=color:#eceff4>,</span><span>trace</span><span style=color:#eceff4>,</span><span>debug</span><span style=color:#eceff4>,</span><span>info</span><span style=color:#eceff4>,</span><span>warn</span><span style=color:#eceff4>,</span><span>error</span><span style=color:#eceff4>};</span></span>
<span class=giallo-l><span style=color:#81a1c1>use</span><span> std</span><span style=color:#81a1c1>::</span><span>io</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Write</span><span style=color:#eceff4>;</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#81a1c1>fn</span><span style=color:#88c0d0> init_logger</span><span style=color:#eceff4>() {</span></span>
<span class=giallo-l><span style=color:#81a1c1>    let mut</span><span> builder</span><span style=color:#81a1c1> =</span><span style=color:#8fbcbb> Builder</span><span style=color:#81a1c1>::</span><span style=color:#88c0d0>new</span><span style=color:#eceff4>();</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>    builder</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>format</span><span style=color:#eceff4>(</span><span style=color:#81a1c1>|</span><span>buf</span><span style=color:#eceff4>,</span><span> record</span><span style=color:#81a1c1>|</span><span style=color:#eceff4> {</span></span>
<span class=giallo-l><span style=color:#81a1c1>        let</span><span> level_color</span><span style=color:#81a1c1> = match</span><span> record</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>level</span><span style=color:#eceff4>() {</span></span>
<span class=giallo-l><span>            Level</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Trace</span><span style=color:#81a1c1> =></span><span> Color</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>White</span><span style=color:#eceff4>,</span></span>
<span class=giallo-l><span>            Level</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Debug</span><span style=color:#81a1c1> =></span><span> Color</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Blue</span><span style=color:#eceff4>,</span></span>
<span class=giallo-l><span>            Level</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Info</span><span style=color:#81a1c1> =></span><span> Color</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Green</span><span style=color:#eceff4>,</span></span>
<span class=giallo-l><span>            Level</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Warn</span><span style=color:#81a1c1> =></span><span> Color</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Yellow</span><span style=color:#eceff4>,</span></span>
<span class=giallo-l><span>            Level</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Error</span><span style=color:#81a1c1> =></span><span> Color</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Red</span><span style=color:#eceff4>,</span></span>
<span class=giallo-l><span style=color:#eceff4>        };</span></span>
<span class=giallo-l><span style=color:#81a1c1>        let mut</span><span> level_style</span><span style=color:#81a1c1> =</span><span> buf</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>style</span><span style=color:#eceff4>();</span></span>
<span class=giallo-l><span>        level_style</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>set_color</span><span style=color:#eceff4>(</span><span>level_color</span><span style=color:#eceff4>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#88c0d0;font-weight:700>        writeln!</span><span style=color:#eceff4>(</span></span>
<span class=giallo-l><span>            buf</span><span style=color:#eceff4>,</span></span>
<span class=giallo-l><span style=color:#eceff4>            "</span><span style=color:#ebcb8b>{</span><span style=color:#a3be8c>level</span><span style=color:#ebcb8b>} {</span><span style=color:#a3be8c>file</span><span style=color:#ebcb8b>}</span><span style=color:#a3be8c>:</span><span style=color:#ebcb8b>{</span><span style=color:#a3be8c>line</span><span style=color:#ebcb8b>} {</span><span style=color:#a3be8c>args</span><span style=color:#ebcb8b>}</span><span style=color:#eceff4>",</span></span>
<span class=giallo-l><span>            level</span><span style=color:#81a1c1> =</span><span> level_style</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>value</span><span style=color:#eceff4>(</span><span>record</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>level</span><span style=color:#eceff4>()),</span></span>
<span class=giallo-l><span>            args</span><span style=color:#81a1c1> =</span><span> level_style</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>value</span><span style=color:#eceff4>(</span><span>record</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>args</span><span style=color:#eceff4>()),</span></span>
<span class=giallo-l><span>            file</span><span style=color:#81a1c1> =</span><span> level_style</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>value</span><span style=color:#eceff4>(</span><span style=color:#81a1c1>&</span><span>record</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>file</span><span style=color:#eceff4>()</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>unwrap_or</span><span style=color:#eceff4>("</span><span style=color:#a3be8c>____unknown</span><span style=color:#eceff4>")[</span><span style=color:#b48ead>4</span><span style=color:#81a1c1>..</span><span style=color:#eceff4>]),</span><span style=color:#616e88> // src/file.rs -> file.rs</span></span>
<span class=giallo-l><span>            line</span><span style=color:#81a1c1> =</span><span> level_style</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>value</span><span style=color:#eceff4>(</span><span>record</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>line</span><span style=color:#eceff4>()</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>unwrap_or</span><span style=color:#eceff4>(</span><span style=color:#b48ead>0</span><span style=color:#eceff4>)),</span></span>
<span class=giallo-l><span style=color:#eceff4>        )</span></span>
<span class=giallo-l><span style=color:#eceff4>    });</span></span>
<span class=giallo-l><span>    builder</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>filter</span><span style=color:#eceff4>(</span><span style=color:#8fbcbb>None</span><span style=color:#eceff4>,</span><span> log</span><span style=color:#81a1c1>::</span><span>LevelFilter</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Trace</span><span style=color:#eceff4>);</span></span>
<span class=giallo-l><span>    builder</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>write_style</span><span style=color:#eceff4>(</span><span>env_logger</span><span style=color:#81a1c1>::</span><span>WriteStyle</span><span style=color:#81a1c1>::</span><span style=color:#8fbcbb>Auto</span><span style=color:#eceff4>);</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span>    builder</span><span style=color:#81a1c1>.</span><span style=color:#88c0d0>init</span><span style=color:#eceff4>();</span></span>
<span class=giallo-l><span style=color:#eceff4>}</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#81a1c1>fn</span><span style=color:#88c0d0> main</span><span style=color:#eceff4>() {</span></span>
<span class=giallo-l><span style=color:#88c0d0>    init_logger</span><span style=color:#eceff4>();</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#88c0d0;font-weight:700>    trace!</span><span style=color:#eceff4>("</span><span style=color:#a3be8c>trace</span><span style=color:#eceff4>");</span></span>
<span class=giallo-l><span style=color:#88c0d0;font-weight:700>    debug!</span><span style=color:#eceff4>("</span><span style=color:#a3be8c>debug</span><span style=color:#eceff4>");</span></span>
<span class=giallo-l><span style=color:#88c0d0;font-weight:700>    info!</span><span style=color:#eceff4>("</span><span style=color:#a3be8c>info</span><span style=color:#eceff4>");</span></span>
<span class=giallo-l><span style=color:#88c0d0;font-weight:700>    warn!</span><span style=color:#eceff4>("</span><span style=color:#a3be8c>warn</span><span style=color:#eceff4>");</span></span>
<span class=giallo-l><span style=color:#88c0d0;font-weight:700>    error!</span><span style=color:#eceff4>("</span><span style=color:#a3be8c>error</span><span style=color:#eceff4>");</span></span>
<span class=giallo-l><span style=color:#eceff4>}</span></span></code></pre></div></article></main><footer class=blog-footer><p>Â© 2026 <a href=https://blog.ymgyt.io> ymgyt </a> | Made with <a href=https://www.getzola.org rel=noopener target=_blank>Zola</a> | <a href=https://github.com/ymgyt/blog>Repository</a> | <a href=https://blog.ymgyt.io/atom.xml target=_blank title=rss> <svg viewbox="0 0 24 24" class=icon fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24 xmlns=http://www.w3.org/2000/svg><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx=5 cy=19 r=1></circle></svg> </a></footer></div></div>